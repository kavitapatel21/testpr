{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/url-join/lib/url-join.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./public/assets/js/dpit-public.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///./node_modules/@wpackio/entrypoint/lib/index.js","webpack:///./includes/assets/js/modules/DPColors.js","webpack:///./includes/assets/js/modules/DpitHooks.js","webpack:///./node_modules/replace-string/index.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./includes/assets/js/modules/BulletsAnimation.js","webpack:///./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./public/assets/js/modules/DPUserVisitCounter.js","webpack:///./public/assets/js/utils/dp-utils.js","webpack:///./includes/assets/js/modules/BrowserSupport.js","webpack:///./public/assets/js/modules/DPIntroTour.js","webpack:///./node_modules/color-blend/dist/index.modern.js","webpack:///./node_modules/classnames/index.js","webpack:///./public/assets/js/modules/DPBoundingBox.js","webpack:///./public/assets/js/utils/goldenRatioPosAlg.js","webpack:///./public/assets/js/modules/DPIntroCore.js","webpack:///./includes/assets/js/modules/DPIncUtils.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError","definition","normalize","strArray","resultArray","length","match","first","shift","replace","i","component","push","str","join","parts","split","_typeof","arguments","slice","call","module","exports","constructor","prototype","__esModule","DpitHooks","init","window","dpIntroTourPublicConfig","dpDebugEn","jQuery","on","$","console","log","DPUserVisitCounter","processVisit","tours","forEach","tourCfg","DPIntroTour","_arrayLikeToArray","len","arr2","path","concat","DPColors","config","_classCallCheck","_createClass","srcColor","preferWhiteText","undefined","resColorsPossibilities","fallBackContrastThreshold","resColorsFallback","contrasts","color","colorObj","Color","contrast","sort","a","b","srcColorsObj","rgbIdx","res","colorsObj","compareColorsByRgbHue","red","green","blue","rgb","Math","min","max","getRgbHueFeature","actions","filters","addAction","tag","callback","priority","addFilter","removeAction","filter","splice","removeFilter","doAction","args","hook","hooks","applyFilters","string","needle","replacement","options","result","matchCount","prevIndex","fromIndex","index","caseInsensitive","toLowerCase","indexOf","replaceStr","beginSlice","_toPropertyKey","arg","input","hint","prim","toPrimitive","String","Number","_defineProperties","target","props","descriptor","Constructor","protoProps","staticProps","BulletsAnimation","containerSelector","id","bulletsClasses","count","clockPeriodMs","this","backward","containerLayerOverride","jOverlayLayer","jBullets","find","removeClass","bullet4Animation","createBullets","appendChild","startReloadingSpinnerBack","startReloadingSpinner","bulletsLayer","document","createElement","addClass","attr","style","opacity","display","ulContainer","innerLi","idx","stopReloadSpinner","spinnerInterval","clearInterval","_this","bulletHideTimeout","clearTimeout","setInterval","activateBullet","round","_this2","_unsupportedIterableToArray","o","minLen","n","toString","name","test","__webpack_amd_options__","instance","mainCfg","_processVisit","vclsid","visitedData","_getVisitCount","url","localStorage","setItem","JSON","stringify","currentUrl","URL","location","currentUrlUnified","DPIncUtils","unifyUrl","pathname","visitedJSON","getItem","visitedObj","isNaN","parse","exc","error","visitedThisPage","parseInt","currentUserId","loggedInVisitCnt","$S","selector","def","isTouchDevice","navigator","maxTouchPoints","msMaxTouchPoints","exception","i18n","text","translations","getDocBB","mobileBreakPointWidth","width","prop","height","DPBoundingBox","actualizeBottomAndRight","top","left","getWinBB","innerWidth","innerHeight","hideElement","htmlEl","byOpacity","noSpace","classNames","showElement","resetInlineOpacityTo","css","dpZIndex","increment","getTransitionDurationMs","overlayContainerStyle","getComputedStyle","transitionDuration","num","parseFloat","endsWith","getCssVarVal","layer","variableName","tmp","getPropertyValue","getCssValFloat","cssParam","getReverseBasePos","pos","BrowserSupport","wrapElement","vh","setProperty","ua","userAgent","msie","trident","isSupported","isIE","onResize","onExit","reason","fn","jquery","tourId","text_styles","_objectSpread","hookOptions","startStep","getDpUrlParam","shouldInitialize","initWrapperLayer","initBulletsAnimation","updateTheme","initTriggers","initCore","initTour","shouldInit","diviBuilderMode","searchParams","get","oxygenBuilderMode","defVal","queryParamsDefs","bulletsAnimation","LAYER_CLASSES","overlayContainer","rbAnim","triggers","triggerCfg","jElement","isInRun","wasRunInThisSession","activeTriggerIdx","dpIntroWrapper","wrapper","tourIdWrapper","getTourIdPostfix","initRootWrapper","body","dpIntroMain","main","_this$tourCfg","_this$mainCfg","_this$mainCfg$mobile_","vHFix","setMobileSizeCoef","mobile_break_points","mobile","adjustBulletsAnimationSizeVar","breakPointOverride","breakPoint","winSize","trigger","shouldAlwaysRunOnLoad","_trigger$config","_trigger$config$disab","_this$mainCfg2","_this$mainCfg2$curren","_this3","run","visitedCnt","getVisitCount","first_user_visit_only","first_n_user_visit","allow_just_for_logged_in_users","disable_for_roles","currentUserRoles","_step","_iterator","_createForOfIteratorHelper","s","done","val","includes","err","e","f","shouldRunAtCurrentDevice","isOnLoadTrigger","isOnLoadDisabled","startTourWithAnimation","once_per_session_only","setTimeout","activateTrigger","_this4","initTourWithSelectedTrigger","_this5","event","start","specific_key_pressed","keyCode","startTour","preventDefault","stopPropagation","DPIntroCore","core","createCoreInstance","steps","initPreprocessSteps","afterIntroCoreInit","isStepsEnough2Start","setOptions","getIntroCoreOptions","checkStickyTheme","isStickyTheme","setOption","behaviour","show_progress_bar","actualizeTooltipMaxWidth","_this6","parseJSON","map","step","preprocessedStep","keys","paramName","decodeStepParamAdvancedVal","stepDefinitions","scrollToElement","scrollTo","enable_interaction","showStepNumbers","show_step_numbers","showProgress","showBullets","show_bullet_navigation","labeling","nextLabel","prevLabel","skipLabel","doneLabel","exitOnOverlayClick","hide_previous_step_button","hideNextAlways","hide_skip_button","overlayBlurred","disable_navigation_by_bullets","max_tooltip_width","skip_absent_ref_el","customTextStylesEn","isEmptyObject","_getScrollSpeed","scrollSpeed","cfgScrollSpeed","cfgScrollSpeedSanitized","scrollSpeedPerPageMs","pow","maxScrollSpeedPerPageMs","_this$core","_classNames","parent","relativePosition","tourInRun","documentElement","builderInRun","isBuilder","theme","_classNames2","prefix","_this$tourCfg2","_this$mainCfg3","_this$mainCfg3$mobile","setAccentColor","accentColor","setRadiuses","setTextStyles","tooltip_radius","highlight_radius","button_radius","_this$tourCfg3","_this$tourCfg3$behavi","bulletAnimSize","size1Bullet","isMobileSize","bulletAnimBorderRadius","_this$core2","actualizeAutoFocus","accent","currentAccentColor","accentContrastColor","getContrastColor","isDark","gentleAccentColor","mix","accentContrastInvColor","removeProperty","adjustContrastToOverlayVar","_window$DpitApi","_this7","isThisInRun","DpitApi","COMMANDS","goToNext","goToNextStep","goToPrev","goToPreviousStep","goToStep","stepIdx","exit","_exitIntro","setAccent","getScrollSpeed","_this7$tourCfg","_this7$tourCfg$behavi","setScrollSpeed","speedToSet","setCoreOptions","setInRunClasses","subscribeEvent","EVENTS","ended","onExitWrap","onResizeWrap","clearInRunClasses","unsubscribeEvent","_this8","forceStart","animationTimeMs","disableStartAnimation","hideElementsAtStart","setAsRunningTour","addOverlayLayer","createAndRun","destroy","disableIsInRunCheck","isInitializedBackward","tourName","_hideElementAtStart","bind","jHideEl","each","element","fadeOut","fadeIn","showHiddenElementsAtStart","resetAsRunningTour","r","t","g","u","c","sqrt","abs","h","M","m","d","p","v","x","O","unitInput","unitOutput","roundOutput","I","q","w","j","k","l","y","z","A","B","C","D","E","F","G","H","J","K","L","N","P","Q","R","S","hasOwn","hasOwnProperty","classes","argType","inner","apply","default","_len","elements","_key","mergeBoundingBoxes","el","getElBoundingBox","bottom","right","boundingBox","enabled","scrollTop","scrollLeft","st","sl","boundingBoxNew","_len2","boundingBoxes","_key2","notNulBBs","bb","tops","lefts","bottoms","rights","actualizeHeightAndWidth","_len3","_key3","area","bb1","bb2","diffBB","diff","originalBB","extendTopBottomPx","extendLeftRightPx","resBB","extendSizePx","includeMargin","relativeToCurrentScrollTop","offset","boundingBox2RelativeScrollPos","outerWidth","outerHeight","calculateSpaceAroundFeature","tooltipBB","maxScreenBB","isLeftOrRight","spaceAroundRatio","determineGoldenIncrement","spaceAroundFeature","isOverHeight","maxDocBB","closerToTargetBB","tooltipPos","moveCloserToWinBorder","sign","range","base","modifyTooltipPosition","tooltipLayer","tooltipBBBkp","newWidth","align","newHeight","tooltipHeightBkp","targetBB","initTooltipBB","isFixedPos","maxIterations","iterations","lastTooltipBB","featureSpaceAround","lastIsOverHeight","prevFeatureSpaceAround","isBestPosFound","featureSpaceAroundDerivation","isEqual","wasPosAdjusted","normal","require","builder","highlight","tooltipReference","tooltip","tooltipWithNumber","tooltipText","arrow","progress","progressBar","tooltipButtons","bullets","bulletsAnimModifier","number","numberOnTooltip","button","buttonText","buttonSpacer","buttonIco","buttonTextIco","buttonNext","buttonPrev","buttonSkip","buttonFull","buttonDone","overlay","overlayBlurredModifier","disableInteraction","hidden","hiddenByOpacityAndWidth","disabled","noTrans","targetClick","targetBlockEvents","targetParent","targetParentFixed","targetParentFixedChild","targetParentFixedCloser","targetDummy","colorAdjusted","bulletPulse","gelatinePulse","started","onInit","onBeforeEnd","beforeStepChange","afterStepChange","onButtonHover","onBeforeRedirect","onMobileMenuClose","onMobileMenuOpen","onOverlayClick","CALLBACKS","RESIZE_ACTION","colorToRgbaObject","alpha","rgbaObjectToColor","rgba","mainElement","firstInsensitivity","insensitivity","ms","followTargetInterval","followTargetEn","currentTargetItem","isDummyElement","targetDummyBkpEl","isDummyBkpActive","currentTargetEl","tooltipReferenceLayer","lastTargetBB","lastRefLayerBB","lastRefDiffBB","isFollowTargetEnabled","isFirstRun","hasClass","_insensitivity","newTargetBB","newRefLayerBB","newRefDiffBB","refDiffAbsDiffBB","diffAbs","_currentStep","_actualizeTargetPositionBasic","querySelector","setAttribute","className","highlightLayer","ending","introItems","initSteps","nextStep","overlayLayer","_onOverlayClick","_onKeyDownEventHandler","_onKeyDown","_onResize","docResizeObserver","observe","isPortraitOrientation","isScreenPortraitOrientation","winBB","option","updateIterateAfter","_currentStepNumber","isJustStartedStep","_forEach","item","previousStep","continueStep","nextStepObj","stepObject4Hooks","currentStepObj","beforeStepChangeCallback","Function","nextStepOnLastStep","activeControl","showStepItem","hideLayers","cb","overlayLayerBelow","overlayContainerBelow","clone","children","appendTo","overlayOpacity","overlayContainerTransitionDelayMs","leaveActiveOverlay","force","isRedirect","continueExit","leave_overlay_always","onBeforeExitCallback","parentNode","removeChild","reInitTarget","hideIntroLayers","showOverlay","_enableInteraction","off","unobserve","stopAutoScrollWhenUserAction","buttonPrevLayer","buttonNextLayer","buttonSkipLayer","onSkipButtonClick","exitIntroFinal","newTarget","resetTargetElement","_clearContrastAdjustment","callbackId","providedCallback","Error","onBeforeShowStepCallback","roleLinkList","isActive","onClickCallback","tabIndex","title","onclick","innerNumber","innerHTML","activeIdx","createBullet","_this$currentTargetIt","_this$mainCfg$mobile_2","boardSizesOnly","docBB","getIsMobileSize","arrowLayer","arrowSizes","maxDocBoardBB","getMaxBoardBB","actualizeScreenArea","resizeRefreshEn","_resizeTimeout","restartResizeTimeout","disableOnResize","pauseFollowTarget","oldWinBB","oldDocBB","object","nodeType","temp","_cloneObject","mobileSizeCoef","windowMarginCoef","isDocumentSize","includeWinMargin","windowMargins","setWinMargins","empty","maxROI","stickyTooltipOffset","_getStickyTooltipOffset","targetItem","_targetItem$hidden_me","_targetItem$hidden_me2","placeTooltipIterations","isCrowdedPos","useLastPosition","tooltipCssClass","prevIterationTooltipPos","marginLeft","marginTop","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","tooltipTextLayer","maxHeight","hidden_meta","ext","build_with_wp_editor","tooltipClass","arrowHalfSizes","_determineAutoPosition","tooltipRadius","arrowLayerPos","tooltipDistanceFromTarget","tooltipLayerPos","desiredNumberPos","onTooltip","isNeededNextIteration","_this$currentTargetIt2","stickyTooltipHeight","shouldActualizeScreenArea","isTargetElementInsideMaxScreenArea","isElementInsideMaxScreenArea","arrowPos","arrowVsTargetAddCoef","reversedBasePos","tooltipRight","arrowRight","centerTopBottomPosOffset","tooltipBottom","arrowBottom","isOverLeft","isOverRight","newLeft","goldenRatioPosAlgEn","basePositions","goldenRatioPosAlgRes","goldenRatioPosAlg","maxScreenArea","adjustIsCrowdedPos","adjustFixedPositionsOutOfWindow","placeTooltip","scrollToPos","_getScrollOffset","scrollToPosNotNull","_placeNumberLayer","desiredPosition","numberLayer","actualizeNumberBB","numberLayerHalfSize","numberLayerBB","layerNumberDest","bbNumberDest","bbOther","numberSizeCoef","numberPosCoef","threshold","numberSizeCoefCssVar","disableIndentation","numberPosFeatures","layerNumberDestRadius","indention","possiblePositionsLT","leftIndented","rightIndented","topIndented","bottomIndented","isInWindow","allowedPositionKeys","position","allowedPositionsTL","posY","posX","score","numberPositionType","isNumberCloseToTooltip","type","finalPositions","posTL","posBB","intersect","_this$currentTargetIt3","_placeNumberLayerOnTooltipInFixedBottomTheme","calculatedPosition","desiredTooltipPosition","possiblePositionsScoreInc","positionPrecedence","tooltipSizesArrowInc","minimalTooltipWidth","getMinimalTooltipWidth","newTooltipWidthArrowInc","newTooltipWidth","rightWidthArrowInc","rightWidth","leftWidthArrowInc","leftWidth","minTargetCenterHeigh","targetWithTooltipHeightTopBottom","heightScoreTopBottom","possiblePositionsScoreIncArr","hyphenIndex","possiblePositions","desiredAlignment","substr","_determineAutoAlignmentX","_determineAutoAlignmentY","tooltipWidth","possibleAlignments","_removeEntry","targetCenterX","tooltipHeight","targetCenterY","stringArray","stringToRemove","remClass","fixRadiuses","anchor","label","isRegularStepChange","actualizeTargetItemCore","visibleFirstStepShouldBeEvaluated","visibleLastStepShouldBeEvaluated","visibleLastStep","visibleFirstStep","stepItem","isInit","skipStep","isStepItemInMobileMenu","mobMenuEl","alt_mobile_selector","resetStepAsDummy","_shouldBeStepSkipped","setNotVisibleRefBullet","is","targetElementIsNotVisibleAndNotSkipped","setStepAsDummy","hasTargetItemHiddenOverlay","hideOverlay","closest","stopImmediatePropagation","disableIterateAfterActions","_this$currentTargetIt4","_this$currentTargetIt5","_this$currentTargetIt6","_this$currentTargetIt7","delay","iterate_after_click_delay_ms","inHighlightLayerAnimation","_this$currentTargetIt8","tooltipBBRel","stop","iframeStr","_isIframeInTooltip","isRefresh","controlsAutoFocusEnable","control","focus","preventScroll","focusVisible","progressLayer","progressVal","getProgressInPercent","progressBarLayer","cssText","actualizeBulletScrollBar","isSecondTry","targetElement","backgroundColor","adjusted","lightBoxBgColorStr","lightBoxBgColor","textChilds","add","parentOfTargetEl","_self","beforeOpacity","beforeElStyle","hasBeforeContent","beforeOpacityStr","afterOpacity","afterElStyle","hasAfterContent","afterOpacityStr","isSvg","firstChild","hasActivePseudoEl","Node","TEXT_NODE","textContent","targetColorStr","targetColor","finalBg","elToScannBg","elBgColorStr","elBgColor","bgLum","luminosity","targetColorLum","bgNew","fixTargetLowContrast","data","lighten","darken","_removeInlineProp","warn","stack","getAttribute","tooltipEl","jBulletsEl","bulletsTop","bulletsHeight","numberBB","omitNumberLayer","scrollOffset","currentFlyingObjectBB","_getFlyingObjectsBB","fixedTooltipOffset","winHeight","getBottomScrollOffset","_removePossiblyChangingPositionClassSafe","_resetInlineStyle","elms","querySelectorAll","elm","isDummy","startsWith","parentElm","SVGElement","tagName","_addPossiblyChangingPositionClassSafe","isCurrentStepItemInMobileMenu","currentElementPosition","hasFixedOrAbsParent","lastFixedParent","wasAnyFixedParent","zIndex","transform","hasTransform","hasDecreasedOpacity","fixClasses","cssPosition","beforeOffset","afterOffset","setOffset","restoreFollowTarget","typePrefix","stylePropName","attrName","hasAttribute","removeAttribute","extraClassToRemove","fixedElements","_restoreInlineStyleAfterAddingPossiblyChangingPositionClass","forEachFnc","completeFnc","nodeName","blurred","overlayTransitionDelayMs","excludeStaticParent","overflowRegex","parentElement","overflow","overflowY","overflowX","animate","scrollInX","scrollInY","onlyWhenEjected","preferPositionOnTheEnd","scrollContainer","_getScrollParent","visibleContainerBB","getBoundingClientRect","elementBB","scrollToOffset","hasScrollBar","duration","easing","scrollEasing","complete","getNotVisibleStepCnt","isFromFollowTarget","isScrolling","willBeRefreshed","finalizeAfterScroll","finalizeScrollAndPosition","actualizeStickyBullets","isOnTop","isStickyThemeOnTop","isFlyingObjectInside","currentFlyingObjectBBRel","currentFlyingObjectBBRelArea","intersection","isUserScrolling","afterScrollOnNewTarget","overlayOpacityAdjusted","bulletScrollBarActualized","triedToFinalizeStickyNumberPosition","scrollDurationMsOverride","_calculateScrollTimeToTargetEl","overlayOpacityCoefWhenScroll","scrollToCfg","_","__","remainingMs","tryToFinalizeStickyNumberPosition","_scrollTo","waitMs","stopFollowTarget","mainThread","tryUnlockActualizeTarget","isCurrentBackward","actualizeBoardSizes","actualizeTargetItem","reInitLayers","scrollParentToTarget","setTargetBBs","actualizeUserInteraction","refreshStepNumber","setTooltipContent","setLayerPosition","setTargetElementClasses","actualizeButtons","actualizeBulletsNavig","actualizeProgressBar","startFollowTarget","scrollToTargetItem","showIntroLayers","VERSION","jWrapperEl","paddingExtensionSize","lr","tb","hookBaseArgs","hasInX","scrollWidth","clientWidth","hasInY","scrollHeight","clientHeight","button_arrows","hidePrev","hideNext","highlightClass","exitOnEsc","keyboardNavigation","showButtons","targetExtendPaddingPercent","targetExtendPaddingMaxPx","buttonClass","ResizeObserver","stepCore","_stepCore$enable_inte","tooltipContent","intro","tooltipPosition","isEnabledInteraction","altMobileSelector","isInMobileMenu","is_in_mobile_menu","skipOnBigScreen","skip_on_big_screen","skipOnMobile","skip_on_mobile","wasFollowTargetEnabled","tempIntroItems","hideWrapper","disableInteractionLayer","showWrapper","showLayers","exitIntro","_this$currentTargetIt9","_this$currentTargetIt10","targetPureBB","paddingExtensionSizeBase","ceil","minExtensionSize","maxExtensionSize","extendBB","intersectionBB","visualizeBB","eventId","unsubscribe","values","notVisible","_this$currentTargetIt11","_this$currentTargetIt12","currentWinBB","relativeThreshold","currentArea","oldArea","hasOrientationChanged","isBigScreenSizeChange","isBigResizeChange","sizes","introLayersHasBeenHidden","resizeAction","getResizeAction","currentWinSize","oldWinSize","refresh","_this$mainCfg$mobile_3","_this3$mainCfg$mobile","_this3$mainCfg$mobile2","resizeRefresh","oldSize","currentSize","_e$key","_code","code","isHideNextByCurrentStepMeta","charCode","isLastStep","srcElement","click","returnValue","_this$currentTargetIt13","_$$position","_$$position2","tooltipPosBase","isOnTooltip","_tooltipPosBase","maxHeightBkp","tooltipTextHeight","textLayerMaxHeight","topOffsetBkp","minWidth","clearIterateAfterClickOnly","is_mobile_menu_active_element","_item$enable_interact","hide_overlay","clearOnly","updateIterateAfterClick","updateIterateAfterHover","iterateStepAfterUserAction","stopClickPropagation","isIterateAfterClick","isStopClickPropagation","stepData","_stepData$enable_inte","iterate_after_click","_stepData$enable_inte2","iterate_after_click_stop_propagation","isIterateAfterHover","_stepData$enable_inte3","iterate_after_hover","_this$currentTargetIt14","hide_next_btn","mobileBreakpoints","isElementInsideDocBoard","offsetParent","_classNames3","highlightLayerClass","getHighlightLayerClass","initLayers","_disableInteraction","intro_proc","checkTooltipIFrames","bulletsBB","autoScroll","jBulletsListElement","jActiveItem","_classNames4","_classNames5","_classNames6","getEndStepIdx","isFirstStep","getStartStepIdx","buttonPrevClass","buttonNextClass","buttonSkipClass","buttonSkipLabel","isSticky","slideDown","slideUp","elem","propName","buttonContentLayer","then","svgLoader","svgString","prependTo","spacer","_bulletClickCallback","tooltipButtonsLayer","_setAsButton","createButtonContent","loadIcons","maxWidth","userInteractTimeout","flyingObjectsBB","scrollOffsetY","targetOffset","startOffset","dist","processFce","processImmediatelyWhenReady","actualizeTargetLock","processFceToRun","lockActualizeTarget","unlockActualizeTarget","fceBkp","basicPositionOnly","forceShowLayersAfter","isFollowTarget","isTargetFollowingFired","startStepIdx","followTargetFinishedTimer","flyingObjIntersectionWithScreen","_actualizeTargetPosition","flyingObjectBBRel","_this$currentTargetIt15","isTargetInsideMaxScreenArea","styleText","urlVars","varId","replaceString","separator","valueNameSeparator","items","delimiter","dataParts","substring","qMarkIdx","mainSiteUrl","forceSlashBeforeQMark","urlJoin","filterQMarkWithNoSlash","parameter","urlparts","encodeURIComponent","pars","lastIndexOf","parameters","paramKeys","removeURLParameter","getDpUrlParamName","removeQuery","removeHash","removeTrailingSlashes","prependSlash","strLastPart","strFirstPart","regExp","rightTrimByString","queryParamsDefinitions","postfixAmpersand","params","unmappedParams","idsUm","ids","setDpUrlParam","stepDefs","mainValOnlyForSimpleVal","onlyValForExtProps","stepDef","extCfg","defMain","dataObj","_dataObj$val","_dataObj","dataObjStr","atob","_dataObj$ext$id","_dataObj2","_dataObj2$ext","_extCfg$id","_dataObj$ext$id2","_dataObj3","_dataObj3$ext","_extCfg$id2","_stepDefs$paramName","btoa","mainVal","extVals","extName","supEnabled","supStart","supEnd","$key","rootDivEl","textStylesCfg","mobileBreakPoint","mobSizeCoef","mobile_size_coef","all_in_1_size_coef","_text_styles$font_siz","font_size_unit","cssVariables","textStylesIsFontFamilyVal","p_font_size","p_mb","h2_font_size","h5_font_size","unit","unitCnt","h2_mb","h5_mb","percentVal","instanceCreatorFce","createNew","builderMode","mainCfgProcessed","builderOrigin","originHashId","triggerId","initState","inNewWindow","mobileAltStepMode"],"mappings":"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","file":"main/dpit-public-9109e43b.js","sourcesContent":["import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","var _typeof=require(\"@babel/runtime/helpers/typeof\");(function(name,context,definition){if(typeof module!=='undefined'&&module.exports)module.exports=definition();else if(typeof define==='function'&&define.amd)define(definition);else context[name]=definition();})('urljoin',this,function(){function normalize(strArray){var resultArray=[];if(strArray.length===0){return'';}if(typeof strArray[0]!=='string'){throw new TypeError('Url must be a string. Received '+strArray[0]);}// If the first part is a plain protocol, we combine it with the next part.\nif(strArray[0].match(/^[^/:]+:\\/*$/)&&strArray.length>1){var first=strArray.shift();strArray[0]=first+strArray[0];}// There must be two or three slashes in the file protocol, two slashes in anything else.\nif(strArray[0].match(/^file:\\/\\/\\//)){strArray[0]=strArray[0].replace(/^([^/:]+):\\/*/,'$1:///');}else{strArray[0]=strArray[0].replace(/^([^/:]+):\\/*/,'$1://');}for(var i=0;i<strArray.length;i++){var component=strArray[i];if(typeof component!=='string'){throw new TypeError('Url must be a string. Received '+component);}if(component===''){continue;}if(i>0){// Removing the starting slashes for each component but the first.\ncomponent=component.replace(/^[\\/]+/,'');}if(i<strArray.length-1){// Removing the ending slashes for each component but the last.\ncomponent=component.replace(/[\\/]+$/,'');}else{// For the last component we will combine multiple slashes to a single one.\ncomponent=component.replace(/[\\/]+$/,'/');}resultArray.push(component);}var str=resultArray.join('/');// Each input component is now separated by a single slash except the possible first plain protocol part.\n// remove trailing slash before parameters or hash\nstr=str.replace(/\\/(\\?|&|#[^!])/g,'$1');// replace ? in parameters with &\nvar parts=str.split('?');str=parts.shift()+(parts.length>0?'?':'')+parts.join('&');return str;}return function(){var input;if(_typeof(arguments[0])==='object'){input=arguments[0];}else{input=[].slice.call(arguments);}return normalize(input);};});","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import DPIntroTour from './modules/DPIntroTour';\r\nimport DPUserVisitCounter from './modules/DPUserVisitCounter';\r\nimport DpitHooks from '../../../includes/assets/js/modules/DpitHooks';\r\n\r\nDpitHooks.init(window.dpIntroTourPublicConfig.dpDebugEn);\r\n\r\njQuery(window).on('load', () => {\r\n\t// jQuery(document).ready(function () {\r\n\twindow.$ = jQuery;\r\n\tif (window.dpIntroTourPublicConfig.dpDebugEn) console.log('FREE config:', window.dpIntroTourPublicConfig);\r\n\tDPUserVisitCounter.processVisit(window.dpIntroTourPublicConfig);\r\n\tif (window.dpIntroTourPublicConfig.tours && window.dpIntroTourPublicConfig.tours.length) {\r\n\t\twindow.dpIntroTourPublicConfig.tours.forEach((tourCfg) => {\r\n\t\t\tnew DPIntroTour(window.dpIntroTourPublicConfig, tourCfg);\r\n\t\t});\r\n\t}\r\n});\r\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","/* eslint-disable camelcase */ /* eslint-disable babel/camelcase */ /* eslint-disable no-underscore-dangle */ // eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\n/* global __webpack_public_path__ */ // eslint-disable-next-line spaced-comment\n///<reference types=\"webpack-env\" />\n// We expect __webpack_public_path__ to be present, thanks to webpack\n// We are not using DOM in the typescript library, so let's just hack our way\n// through window\n// tslint:disable-next-line:no-any\n// We would override __webpack_public_path__ only if __WPACKIO__ webpack plugin is set\nif(__WPACKIO__){var path=(__WPACKIO__.appName+__WPACKIO__.outputPath).replace(/[^a-zA-Z0-9_-]/g,'');// eslint-disable-next-line no-global-assign\n__webpack_public_path__=window[\"__wpackIo\".concat(path)];}","\r\n\r\nimport Color from 'color';\r\nexport default class DPColors {\r\n\tconstructor(config) {\r\n\t\tif (config.dpDebugEn) console.log('DPColors');\r\n\t}\r\n\t// contrast range: 1 - 21\r\n\tstatic getContrastColor(srcColor, preferWhiteText = true, resColorsPossibilities = ['#fff', '#484848'], fallBackContrastThreshold = 3, resColorsFallback = ['#292929']) {\r\n\t\tconst contrasts = [];\r\n\t\tresColorsPossibilities.forEach((color) => {\r\n\t\t\tconst colorObj = Color(color);\r\n\t\t\tcontrasts.push({ color: colorObj, contrast: Color(srcColor).contrast(colorObj) });\r\n\t\t});\r\n\t\tif (contrasts.length) {\r\n\t\t\tif (preferWhiteText) contrasts[0].contrast *= 2.2;\r\n\t\t\telse contrasts[0].contrast *= 1.5;\r\n\t\t\tcontrasts.sort((a, b) => b.contrast - a.contrast);\r\n\t\t\t//console.log(contrasts.map((element) => element.contrast));\r\n\t\t\tif (contrasts[0].contrast < fallBackContrastThreshold) {\r\n\t\t\t\tresColorsFallback.forEach((color) => {\r\n\t\t\t\t\tconst colorObj = Color(color);\r\n\t\t\t\t\tcontrasts.push({ color: colorObj, contrast: Color(srcColor).contrast(colorObj) });\r\n\t\t\t\t});\r\n\t\t\t\tcontrasts.sort((a, b) => b.contrast - a.contrast);\r\n\t\t\t}\r\n\t\t\treturn contrasts[0].color;\r\n\t\t}\r\n\t\treturn resColorsPossibilities[0] ? Color(resColorsPossibilities[0]) : (resColorsFallback[0] ? Color(resColorsFallback[0]) : Color('#fff'));\r\n\t}\r\n\r\n\tstatic getMostColor(srcColorsObj, rgbIdx /*r = red*, g = green, b = blue*/) {\r\n\t\tlet res = null;\r\n\t\tif (srcColorsObj) {\r\n\t\t\tconst colorsObj = [...srcColorsObj];\r\n\t\t\tcolorsObj.sort((a, b) => DPColors.compareColorsByRgbHue(rgbIdx, a, b));\r\n\t\t\tres = colorsObj[0];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tstatic getRgbHueFeature = (rgbIdx, color) => {\r\n\t\tswitch (rgbIdx) {\r\n\t\t\tcase 'r': return color.red() + (color.red() - color.green()) + (color.red() - color.blue());\r\n\t\t\tcase 'g': return color.green() + (color.green() - color.red()) + (color.green() - color.blue());\r\n\t\t\tcase 'b': return color.blue() + (color.blue() - color.red()) + (color.blue() - color.green());\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getRgbHueAdjustedColor = (rgbIdx, color) => {\r\n\t\tconst addVal = 100;\r\n\t\tswitch (rgbIdx) {\r\n\t\t\tcase 'r': return Color.rgb(Math.min(color.red() + addVal, 255), Math.max(color.green() - addVal, 0), Math.max(color.blue() - addVal, 0));\r\n\t\t\tcase 'g': return Color.rgb(Math.max(color.red() - addVal, 0), Math.min(color.green() + addVal, 255), Math.max(color.blue() - addVal, 0));\r\n\t\t\tcase 'b': return Color.rgb(Math.max(color.red() - addVal, 0), Math.max(color.green() - addVal, 0), Math.min(color.blue() + addVal, 255));\r\n\t\t}\r\n\t}\r\n\r\n\tstatic compareColorsByRgbHue = (rgbIdx, a, b) => {\r\n\t\treturn DPColors.getRgbHueFeature(rgbIdx, b) - DPColors.getRgbHueFeature(rgbIdx, a);\r\n\t}\r\n}","\r\n/**\r\n * DpitHooks object\r\n *\r\n * This object needs to be declared early so that it can be used in code.\r\n * Preferably at a global scope.\r\n */\r\nif (!window.DpitHooks) window.DpitHooks = {};\r\n//DpitHooks = window.DpitHooks || {}; // Extend Hooks if exists or create new Hooks object.\r\nDpitHooks.actions = DpitHooks.actions || {}; // Registered actions\r\nDpitHooks.filters = DpitHooks.filters || {}; // Registered filters\r\n\r\n\r\nDpitHooks.init = function (dpDebugEn) {\r\n\tDpitHooks.dpDebugEn = dpDebugEn;\r\n\tif (dpDebugEn) console.log('DpitHooks.init');\r\n};\r\n/**\r\n  * Add a new Action callback to DpitHooks.actions\r\n  *\r\n  * @param tag The tag specified by doAction()\r\n  * @param callback The callback function to call when do_action() is called\r\n  * @param priority The order in which to call the callbacks. Default: 10 (like WordPress)\r\n  */\r\nDpitHooks.addAction = function (tag, callback, priority) {\r\n\tif (typeof priority === 'undefined') {\r\n\t\tpriority = 10;\r\n\t}\r\n\r\n\t// If the tag doesn't exist, create it.\r\n\tDpitHooks.actions[tag] = DpitHooks.actions[tag] || [];\r\n\tDpitHooks.actions[tag].push({ priority, callback });\r\n};\r\n\r\n/**\r\n  * Add a new Filter callback to DpitHooks.filters\r\n  *\r\n  * @param tag The tag specified by applyFilters()\r\n  * @param callback The callback function to call when apply_filters() is called\r\n  * @param priority Priority of filter to apply. Default: 10 (like WordPress)\r\n  */\r\nDpitHooks.addFilter = function (tag, callback, priority) {\r\n\tif (typeof priority === 'undefined') {\r\n\t\tpriority = 10;\r\n\t}\r\n\r\n\t// If the tag doesn't exist, create it.\r\n\tDpitHooks.filters[tag] = DpitHooks.filters[tag] || [];\r\n\tDpitHooks.filters[tag].push({ priority, callback });\r\n};\r\n\r\n/**\r\n  * Remove an Action callback from DpitHooks.actions\r\n  *\r\n  * Must be the exact same callback signature.\r\n  * Warning: Anonymous functions can not be removed.\r\n  * @param tag The tag specified by doAction()\r\n  * @param callback The callback function to remove\r\n  */\r\nDpitHooks.removeAction = function (tag, callback) {\r\n\tDpitHooks.actions[tag] = DpitHooks.actions[tag] || [];\r\n\r\n\tDpitHooks.actions[tag].forEach((filter, i) => {\r\n\t\tif (filter.callback === callback) {\r\n\t\t\tDpitHooks.actions[tag].splice(i, 1);\r\n\t\t}\r\n\t});\r\n};\r\n\r\n/**\r\n  * Remove a Filter callback from DpitHooks.filters\r\n  *\r\n  * Must be the exact same callback signature.\r\n  * Warning: Anonymous functions can not be removed.\r\n  * @param tag The tag specified by applyFilters()\r\n  * @param callback The callback function to remove\r\n  */\r\nDpitHooks.removeFilter = function (tag, callback) {\r\n\tDpitHooks.filters[tag] = DpitHooks.filters[tag] || [];\r\n\r\n\tDpitHooks.filters[tag].forEach((filter, i) => {\r\n\t\tif (filter.callback === callback) {\r\n\t\t\tDpitHooks.filters[tag].splice(i, 1);\r\n\t\t}\r\n\t});\r\n};\r\n\r\n/**\r\n  * Calls actions that are stored in DpitHooks.actions for a specific tag or nothing\r\n  * if there are no actions to call.\r\n  *\r\n  * @param tag A registered tag in DpitHooks.actions\r\n  * @param args Optional JavaScript object to pass to the callbacks\r\n  */\r\nDpitHooks.doAction = function (tag, args) {\r\n\tconst actions = [];\r\n\tif (DpitHooks.dpDebugEn) console.log('API action - Tag:', tag, ', Subscribed count:', DpitHooks.actions[tag] ? DpitHooks.actions[tag].length : 0, ', Args:', args);\r\n\tif (typeof DpitHooks.actions[tag] !== 'undefined' && DpitHooks.actions[tag].length > 0) {\r\n\t\tDpitHooks.actions[tag].forEach((hook) => {\r\n\t\t\tactions[hook.priority] = actions[hook.priority] || [];\r\n\t\t\tactions[hook.priority].push(hook.callback);\r\n\t\t});\r\n\r\n\t\tactions.forEach((hooks) => {\r\n\t\t\thooks.forEach((callback) => {\r\n\r\n\t\t\t\tcallback(args);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n};\r\n\r\n/**\r\n  * Calls filters that are stored in DpitHooks.filters for a specific tag or return\r\n  * original value if no filters exist.\r\n  *\r\n  * @param tag A registered tag in DpitHooks.filters\r\n  * @param args Optional JavaScript object to pass to the callbacks\r\n  */\r\nDpitHooks.applyFilters = function (tag, value, args) {\r\n\tconst filters = [];\r\n\tlet res = value;\r\n\tif (DpitHooks.dpDebugEn) console.log('API filter - Tag:', tag, ', Subscribed count:', DpitHooks.filters[tag] ? DpitHooks.filters[tag].length : 0, ', Args:', args);\r\n\tif (typeof DpitHooks.filters[tag] !== 'undefined' && DpitHooks.filters[tag].length > 0) {\r\n\t\tDpitHooks.filters[tag].forEach((hook) => {\r\n\t\t\tfilters[hook.priority] = filters[hook.priority] || [];\r\n\t\t\tfilters[hook.priority].push(hook.callback);\r\n\t\t});\r\n\r\n\t\tfilters.forEach((hooks) => {\r\n\t\t\thooks.forEach((callback) => {\r\n\t\t\t\tres = callback(res, args);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport default DpitHooks;\r\n","'use strict';var _typeof=require(\"@babel/runtime/helpers/typeof\");module.exports=function(string,needle,replacement){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};if(typeof string!=='string'){throw new TypeError(\"Expected input to be a string, got \".concat(_typeof(string)));}if(!(typeof needle==='string'&&needle.length>0)||!(typeof replacement==='string'||typeof replacement==='function')){return string;}var result='';var matchCount=0;var prevIndex=options.fromIndex>0?options.fromIndex:0;if(prevIndex>string.length){return string;}while(true){// eslint-disable-line no-constant-condition\nvar index=options.caseInsensitive?string.toLowerCase().indexOf(needle.toLowerCase(),prevIndex):string.indexOf(needle,prevIndex);if(index===-1){break;}matchCount++;var replaceStr=typeof replacement==='string'?replacement:replacement(// If `caseInsensitive`` is enabled, the matched substring may be different from the needle.\nstring.slice(index,index+needle.length),matchCount,string,index);// Get the initial part of the string on the first iteration.\nvar beginSlice=matchCount===1?0:prevIndex;result+=string.slice(beginSlice,index)+replaceStr;prevIndex=index+needle.length;}if(matchCount===0){return string;}return result+string.slice(prevIndex);};","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default class BulletsAnimation {\r\n\tconstructor(containerSelector, id, bulletsClasses, count = 10, clockPeriodMs = 100) {\r\n\t\tthis.containerSelector = containerSelector;\r\n\t\tthis.bulletsClasses = bulletsClasses;\r\n\t\tthis.id = id;\r\n\t\tthis.count = count;\r\n\t\tthis.clockPeriodMs = clockPeriodMs;\r\n\t}\r\n\r\n\tcreateAndRun(backward = false, containerLayerOverride = null) {\r\n\t\tthis.backward = backward;\r\n\t\tconst jOverlayLayer = $(containerLayerOverride || this.containerSelector);\r\n\t\tif (jOverlayLayer && jOverlayLayer.length) {\r\n\t\t\tconst jBullets = jOverlayLayer.find(`#${this.id}`);\r\n\t\t\tif (!jBullets || !jBullets.length) {\r\n\t\t\t\tconst bullet4Animation = this.createBullets(this.count);\r\n\t\t\t\tjOverlayLayer[0].appendChild(bullet4Animation);\r\n\t\t\t} else {\r\n\t\t\t\tjBullets.removeClass('inactive');\r\n\t\t\t}\r\n\t\t\tif (backward) this.startReloadingSpinnerBack();\r\n\t\t\telse this.startReloadingSpinner();\r\n\t\t}\r\n\t}\r\n\r\n\tcreateBullets(count) {\r\n\t\t// this.bulletCount = count;\r\n\t\tconst bulletsLayer = document.createElement('div');\r\n\t\t$(bulletsLayer).addClass(this.bulletsClasses.join(' '));\r\n\t\t$(bulletsLayer).attr('aria-hidden', 'true');\r\n\t\tbulletsLayer.id = this.id;\r\n\t\tbulletsLayer.style.opacity = 0;\r\n\t\tbulletsLayer.style.display = 'block';\r\n\r\n\t\tconst ulContainer = document.createElement('ul');\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\tconst innerLi = document.createElement('li');\r\n\t\t\tulContainer.appendChild(innerLi);\r\n\t\t}\r\n\t\tbulletsLayer.appendChild(ulContainer);\r\n\t\tbulletsLayer.style.opacity = 1;\r\n\t\treturn bulletsLayer;\r\n\t}\r\n\r\n\tactivateBullet(idx) {\r\n\t\t$(`#${this.id} li`).removeClass('active');\r\n\t\t$(`#${this.id} li`).removeClass('semi-active');\r\n\t\t$(`#${this.id} li`).removeClass('semi-active--2');\r\n\t\tif (this.backward) {\r\n\t\t\tif (idx >= 0 && idx < this.count) $(`#${this.id} li:nth-child(${idx + 1})`).addClass('semi-active semi-active--2');\r\n\t\t\tif ((idx - 1) >= 0 && (idx - 1) < this.count) $(`#${this.id} li:nth-child(${idx})`).addClass('semi-active');\r\n\t\t\tif ((idx - 2) >= 0 && (idx - 2) < this.count) $(`#${this.id} li:nth-child(${idx - 1})`).addClass('active');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (idx >= 0 && idx < this.count) $(`#${this.id} li:nth-child(${idx + 1})`).addClass('active');\r\n\t\t\tif ((idx - 1) >= 0 && (idx - 1) < this.count) $(`#${this.id} li:nth-child(${idx})`).addClass('semi-active');\r\n\t\t\tif ((idx - 2) >= 0 && (idx - 2) < this.count) $(`#${this.id} li:nth-child(${idx - 1})`).addClass('semi-active semi-active--2');\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\t$(`#${this.id}`).addClass('inactive');\r\n\t\t$(`#${this.id} li`).removeClass('active');\r\n\t\t$(`#${this.id} li`).removeClass('semi-active');\r\n\t\tthis.stopReloadSpinner();\r\n\t}\r\n\r\n\tstopReloadSpinner() {\r\n\t\tif (this.spinnerInterval) clearInterval(this.spinnerInterval);\r\n\t\tthis.spinnerInterval = null;\r\n\t}\r\n\r\n\tstartReloadingSpinner() {\r\n\t\tlet idx = 0;\r\n\t\tif (this.spinnerInterval) clearInterval(this.spinnerInterval);\r\n\t\tif (this.bulletHideTimeout) clearTimeout(this.bulletHideTimeout);\r\n\t\tthis.spinnerInterval = setInterval(() => {\r\n\t\t\tthis.activateBullet(idx);\r\n\t\t\tidx++;\r\n\t\t\tif (idx > Math.round(2.2 * this.count)) idx = 0;\r\n\t\t}, this.clockPeriodMs);\r\n\t}\r\n\r\n\tstartReloadingSpinnerBack() {\r\n\t\tif (this.spinnerInterval) clearInterval(this.spinnerInterval);\r\n\t\tif (this.bulletHideTimeout) clearTimeout(this.bulletHideTimeout);\r\n\t\tlet idx = this.count + 2;\r\n\t\tthis.spinnerInterval = setInterval(() => {\r\n\t\t\tthis.activateBullet(idx);\r\n\t\t\tidx--;\r\n\t\t\tif (idx < 0) idx = Math.round(2.2 * this.count);\r\n\t\t}, this.clockPeriodMs);\r\n\t}\r\n}\r\n","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import DPIncUtils from '../../../../includes/assets/js/modules/DPIncUtils';\r\n\r\nconst KEY_4_VISITED_DATA = 'dp_intro_tours.visited_urls';\r\n\r\nexport default class DPUserVisitCounter {\r\n\tstatic processVisit(mainCfg) {\r\n\t\tDPUserVisitCounter._processVisit(mainCfg, KEY_4_VISITED_DATA);\r\n\t\t//if (mainCfg.currentUserId != 0) DPUserVisitCounter._processVisit(mainCfg, 'dp_intro_tours.visited_urls_logged_in');\r\n\t}\r\n\r\n\tstatic _processVisit(mainCfg, vclsid) {\r\n\t\tconst visitedData = DPUserVisitCounter._getVisitCount(vclsid);\r\n\t\tvisitedData.obj[visitedData.url] = visitedData.count + 1;\r\n\t\tif (mainCfg.dpDebugEn) console.log('DPUserVisitCounter', visitedData.url, visitedData.count + 1);\r\n\t\tlocalStorage.setItem(vclsid, JSON.stringify(visitedData.obj));\r\n\t}\r\n\r\n\tstatic _getVisitCount(vclsid) {\r\n\t\tconst currentUrl = new URL(window.location);\r\n\t\tconst currentUrlUnified = DPIncUtils.unifyUrl(currentUrl.pathname);\r\n\t\tconst visitedJSON = localStorage.getItem(vclsid);\r\n\t\tlet visitedObj = {};\r\n\t\tif (visitedJSON && isNaN(visitedJSON)) {\r\n\t\t\ttry {\r\n\t\t\t\tvisitedObj = JSON.parse(visitedJSON) || {};\r\n\t\t\t} catch (exc) {\r\n\t\t\t\tconsole.error(exc);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet visitedThisPage = parseInt(visitedObj[currentUrlUnified]);\r\n\r\n\t\tif (isNaN(visitedThisPage)) {\r\n\t\t\tvisitedThisPage = 0;\r\n\t\t}\r\n\t\treturn { count: visitedThisPage, obj: visitedObj, url: currentUrlUnified };\r\n\t}\r\n\r\n\tstatic getVisitCount(mainCfg) {\r\n\t\tif (mainCfg.currentUserId != 0) {\r\n\t\t\t// server based data\r\n\t\t\tconst visitedThisPage = parseInt(mainCfg.loggedInVisitCnt);\r\n\t\t\treturn isNaN(visitedThisPage) ? 0 : visitedThisPage;\r\n\t\t} else {\r\n\t\t\t// local storage based data\r\n\t\t\treturn DPUserVisitCounter._getVisitCount(KEY_4_VISITED_DATA).count;\r\n\t\t}\r\n\t}\r\n}\r\n","import classNames from 'classnames';\r\nimport DPBoundingBox from './../modules/DPBoundingBox';\r\n\r\nexport const $S = (selector, def = null) => {\r\n\ttry {\r\n\t\treturn $(selector);\r\n\t} catch (error) {\r\n\t\treturn def;\r\n\t}\r\n};\r\n\r\nexport const isTouchDevice = () => {\r\n\ttry {\r\n\t\treturn (('ontouchstart' in window)\r\n\t\t\t|| (navigator.maxTouchPoints > 0)\r\n\t\t\t|| (navigator.msMaxTouchPoints > 0));\r\n\t} catch (exception) {\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nexport const i18n = (text, translations) => {\r\n\tif (translations[text]) return translations[text];\r\n\treturn text;\r\n};\r\n\r\nexport const getMobileBottomControlHeight = (width, mobileBreakPointWidth) => {\r\n\t/*if (mobileBreakPointWidth && isTouchDevice() && width < mobileBreakPointWidth) {\r\n\t\treturn - 0.08 * $(window).innerHeight();\r\n\t}*/\r\n\treturn 0;\r\n};\r\n\r\nexport const getDocBB = (mobileBreakPointWidth) => {\r\n\t/*const body = document.body;\r\n\tconst html = document.documentElement;\r\n\tconst height2 = Math.max(body.scrollHeight, body.offsetHeight,\r\n\t\thtml.clientHeight, html.scrollHeight, html.offsetHeight);\r\n\tconst width2 = Math.max(body.scrollWidth, body.offsetWidth,\r\n\t\thtml.clientWidth, html.scrollWidth, html.offsetWidth);*/\r\n\r\n\tconst width = $('body').prop('clientWidth');\r\n\tlet height = $('body').prop('clientHeight');\r\n\theight += getMobileBottomControlHeight(width, mobileBreakPointWidth);\r\n\treturn DPBoundingBox.actualizeBottomAndRight({ top: 0, left: 0, width: width, height: height });\r\n};\r\n\r\n\r\nexport const getWinBB = (mobileBreakPointWidth) => {\r\n\tconst width = $(window).innerWidth();\r\n\tlet height = $(window).innerHeight();\r\n\theight += getMobileBottomControlHeight(width, mobileBreakPointWidth);\r\n\treturn DPBoundingBox.actualizeBottomAndRight({ top: 0, left: 0, width: width, height });\r\n};\r\n\r\n\r\nexport const hideElementImmediately = (htmlEl, byOpacity = true, noSpace = false) => {\r\n\tconst transitionBkp = htmlEl.style.transition;\r\n\thtmlEl.style.transition = 'unset !important';\r\n\thideElement(htmlEl, byOpacity, noSpace);\r\n\thtmlEl.style.transition = transitionBkp;\r\n};\r\n\r\n\r\nexport const hideElement = (htmlEl, byOpacity = true, noSpace = false) => {\r\n\tif (htmlEl) {\r\n\t\t$(htmlEl).addClass(classNames({\r\n\t\t\t'dpit-hidden': true,\r\n\t\t\t'dpit-hidden-by-disp': !byOpacity,\r\n\t\t\t'dpit-hidden--no-space': noSpace,\r\n\t\t}));\r\n\t}\r\n};\r\n\r\nexport const showElement = (htmlEl, resetInlineOpacityTo = '') => {\r\n\tif (htmlEl) {\r\n\t\tif (resetInlineOpacityTo !== null && resetInlineOpacityTo !== true) {\r\n\t\t\t$(htmlEl).css('opacity', resetInlineOpacityTo);\r\n\t\t}\r\n\t\t$(htmlEl).removeClass('dpit-hidden dpit-hidden--no-space dpit-hidden-by-disp dpit-hidden-by-opacity');\r\n\t}\r\n};\r\n\r\nexport const dpZIndex = (increment = 0) => {\r\n\treturn `calc(var(--dp-z-index-base) + ${increment})`;\r\n};\r\n\r\n\r\nexport const getTransitionDurationMs = (htmlEl, def = 0) => {\r\n\tif (htmlEl) {\r\n\t\tlet overlayContainerStyle = window.getComputedStyle(htmlEl);\r\n\t\tif (overlayContainerStyle && overlayContainerStyle.transitionDuration) {\r\n\t\t\tlet num = parseFloat(overlayContainerStyle.transitionDuration);\r\n\t\t\tif (!isNaN(num)) {\r\n\t\t\t\tif (overlayContainerStyle.transitionDuration.endsWith('ms')) return num;\r\n\t\t\t\telse if (overlayContainerStyle.transitionDuration.endsWith('s')) return num * 1000;\r\n\t\t\t\telse return num;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn def;\r\n};\r\n\r\n\r\nexport const getCssVarVal = (layer, variableName, def = null) => {\r\n\tlet res = def;\r\n\tif (layer && variableName) {\r\n\t\tconst tmp = getComputedStyle(layer).getPropertyValue(variableName);\r\n\t\tif (tmp !== null && tmp !== undefined && tmp !== '') {\r\n\t\t\tres = tmp;\r\n\t\t}\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nexport const getCssValFloat = (htmlEl, cssParam, def = 0) => {\r\n\tlet res = def;\r\n\tif (htmlEl && cssParam) {\r\n\t\tres = parseFloat($(htmlEl).css(cssParam));\r\n\t\tif (isNaN(res)) res = def;\r\n\t}\r\n\treturn res;\r\n};\r\n\r\nexport const getIntVal = (value, def = null) => {\r\n\tlet res = def;\r\n\tres = parseFloat(value);\r\n\tif (isNaN(res)) res = def;\r\n\treturn res;\r\n};\r\n\r\n\r\nexport const getReverseBasePos = (pos) => {\r\n\tswitch (pos) {\r\n\t\tcase 'left': return 'right';\r\n\t\tcase 'right': return 'left';\r\n\t\tcase 'top': return 'bottom';\r\n\t\tcase 'bottom': return 'top';\r\n\t}\r\n\treturn pos;\r\n};\r\n\r\n\r\n\r\n\r\n","export default class BrowserSupport {\r\n\r\n\tstatic vHFix(wrapElement) {\r\n\t\tlet vh = window.innerHeight * 0.01;\r\n\t\twrapElement.style.setProperty('--dpit-vh', `${vh}px`);\r\n\t}\r\n\r\n\tstatic isSupported = () => {\r\n\t\tconst isSupported = !BrowserSupport.isIE();\r\n\t\tif (!isSupported) console.log('DP Intro Tours: Browser is not supported');\r\n\t\treturn isSupported;\r\n\t}\r\n\r\n\tstatic isIE() {\r\n\t\tconst ua = window.navigator.userAgent; //Check the userAgent property of the window.navigator object\r\n\t\tconst msie = ua.indexOf('MSIE '); // IE 10 or older\r\n\t\tconst trident = ua.indexOf('Trident/'); //IE 11\r\n\t\treturn (msie > 0 || trident > 0);\r\n\t}\r\n\r\n}","import DPIntroCore, {\r\n\tLAYER_CLASSES, EVENTS, COMMANDS\r\n} from './DPIntroCore';\r\nimport BulletsAnimation from '../../../../includes/assets/js/modules/BulletsAnimation';\r\nimport {\r\n\t$S,\r\n\ti18n,\r\n\tgetWinBB\r\n} from '../utils/dp-utils';\r\nimport BrowserSupport from '../../../../includes/assets/js/modules/BrowserSupport';\r\nimport Color from 'color';\r\nimport DPColors from '../../../../includes/assets/js/modules/DPColors';\r\nimport DPIncUtils from '../../../../includes/assets/js/modules/DPIncUtils';\r\nimport DPUserVisitCounter from './DPUserVisitCounter';\r\nimport classNames from 'classnames';\r\nimport DpitHooks from '../../../../includes/assets/js/modules/DpitHooks';\r\n\r\n\r\n\r\nconst SCROLL_SPEED_0_MS = 1000;\r\nconst SCROLL_MAX_TIME_COEF = 3;\r\n\r\n\r\n\r\nexport default class DPIntroTour {\r\n\r\n\tconstructor(mainCfg, tourCfg) {\r\n\t\tif (mainCfg.dpDebugEn) {\r\n\t\t\tconsole.log('DPIntroTour');\r\n\t\t\tconsole.log('jQuery v: ' + jQuery.fn.jquery);\r\n\t\t}\r\n\t\tthis.tourCfg = tourCfg;\r\n\t\tthis.mainCfg = mainCfg;\r\n\t\tthis.tourId = null;\r\n\t\tif (this.tourCfg) {\r\n\t\t\tthis.tourCfg.text_styles = { ...this.mainCfg.text_styles, ...this.tourCfg.text_styles };\r\n\t\t\tthis.tourId = this.tourCfg.tourId;\r\n\t\t}\r\n\r\n\t\tthis.currentUrl = new URL(window.location);\r\n\t\tthis.hookOptions = {\r\n\t\t\ttourId: this.tourId,\r\n\t\t\tcurrentUrl: this.currentUrl\r\n\t\t};\r\n\t\tthis.startStep = this.getDpUrlParam('dp_qp_step');\r\n\t\tif (this.shouldInitialize()) {\r\n\t\t\tthis.initWrapperLayer();\r\n\t\t\tthis.initBulletsAnimation();\r\n\t\t\tif (this.tourCfg) {\r\n\t\t\t\tthis.updateTheme();\r\n\t\t\t\tthis.initTriggers();\r\n\t\t\t\tthis.initCore();\r\n\t\t\t\tthis.initTour();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tshouldInitialize() {\r\n\t\tconst shouldInit = DpitHooks.applyFilters('shouldInit', true, this.hookOptions);\r\n\t\tconst diviBuilderMode = this.currentUrl.searchParams.get('et_fb') === '1';\r\n\t\tconst oxygenBuilderMode = this.currentUrl.searchParams.get('ct_builder') === 'true';\r\n\t\treturn !(diviBuilderMode || oxygenBuilderMode) && BrowserSupport.isSupported() && shouldInit;\r\n\t}\r\n\r\n\tgetDpUrlParam(id, defVal = null) {\r\n\t\treturn DPIncUtils.getDpUrlParam(id, this.mainCfg.queryParamsDefs, this.currentUrl, defVal);\r\n\t}\r\n\r\n\tinitBulletsAnimation() {\r\n\t\tthis.bulletsAnimation = new BulletsAnimation(\r\n\t\t\t'.' + LAYER_CLASSES.overlayContainer,\r\n\t\t\t`${LAYER_CLASSES.rbAnim}-${this.tourId}`,\r\n\t\t\t[LAYER_CLASSES.rbAnim], 7, 90);\r\n\t}\r\n\r\n\tinitTriggers() {\r\n\t\tthis.triggers = [];\r\n\t\tthis.tourCfg.triggers.forEach((triggerCfg, idx) => {\r\n\t\t\tthis.triggers.push({\r\n\t\t\t\tidx: idx,\r\n\t\t\t\tconfig: triggerCfg,\r\n\t\t\t\tjElement: (triggerCfg.selector === 'window') ? $(window) : $S(triggerCfg.selector),\r\n\t\t\t\tisInRun: false,\r\n\t\t\t\twasRunInThisSession: false\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.activeTriggerIdx = 0;\r\n\t}\r\n\r\n\tinitRootWrapper() {\r\n\t\tif (!this.dpIntroWrapper) this.dpIntroWrapper = document.createElement('div');\r\n\t\t$(this.dpIntroWrapper).addClass(LAYER_CLASSES.wrapper);\r\n\t\tconst tourIdWrapper = this.getTourIdPostfix(LAYER_CLASSES.wrapper);\r\n\t\t$(this.dpIntroWrapper).addClass(tourIdWrapper);\r\n\t\t$(this.dpIntroWrapper).attr('id', tourIdWrapper);\r\n\t}\r\n\r\n\tinitWrapperLayer() {\r\n\t\tthis.dpIntroWrapper = document.createElement('div');\r\n\t\tthis.initRootWrapper();\r\n\r\n\t\tdocument.body.appendChild(this.dpIntroWrapper);\r\n\r\n\t\tthis.dpIntroMain = document.createElement('div');\r\n\t\t$(this.dpIntroMain).addClass(LAYER_CLASSES.main);\r\n\t\tthis.dpIntroWrapper.appendChild(this.dpIntroMain);\r\n\r\n\r\n\t\tthis.onResize();\r\n\t}\r\n\r\n\tonResizeWrap = () => {\r\n\t\tthis.onResize();\r\n\t}\r\n\r\n\tonResize() {\r\n\t\tBrowserSupport.vHFix(this.dpIntroWrapper);\r\n\t\tDPIncUtils.setMobileSizeCoef(this.dpIntroWrapper, this.tourCfg?.text_styles, this.mainCfg?.mobile_break_points?.mobile);\r\n\t\tthis.adjustBulletsAnimationSizeVar();\r\n\t}\r\n\r\n\tisMobileSize(breakPointOverride = null) {\r\n\t\tlet breakPoint = this.mainCfg.mobile_break_points ? this.mainCfg.mobile_break_points.mobile : 500;\r\n\t\tif (breakPointOverride !== null) breakPoint = breakPointOverride;\r\n\r\n\t\tconst winSize = getWinBB(breakPoint);\r\n\t\treturn winSize.width <= breakPoint;\r\n\t}\r\n\r\n\tisOnLoadTrigger(trigger) {\r\n\t\treturn trigger.config.on == 'load' || this.shouldAlwaysRunOnLoad();\r\n\t}\r\n\r\n\tisOnLoadDisabled(trigger) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tshouldAlwaysRunOnLoad() {\r\n\t\treturn this.getDpUrlParam('dp_qp_run_always_on_load') === '1';\r\n\t}\r\n\r\n\tshouldRunAtCurrentDevice() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tinitTourWithSelectedTrigger(trigger) {\r\n\t\tlet run = true;\r\n\t\tvar visitedCnt = DPUserVisitCounter.getVisitCount(this.mainCfg);\r\n\r\n\t\tif (trigger.config.first_user_visit_only) {\r\n\t\t\tlet limit = trigger.config.first_n_user_visit || 1;\r\n\t\t\trun = (visitedCnt <= limit);\r\n\t\t}\r\n\t\tif (trigger.config.allow_just_for_logged_in_users && this.mainCfg.currentUserId == 0) {\r\n\t\t\trun = false;\r\n\t\t}\r\n\t\tif (trigger.config?.disable_for_roles?.length && this.mainCfg.currentUserRoles && this.mainCfg?.currentUserRoles?.length) {\r\n\t\t\tfor (const val of trigger.config.disable_for_roles) {\r\n\t\t\t\tif (this.mainCfg.currentUserRoles.includes(val)) {\r\n\t\t\t\t\trun = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this.shouldRunAtCurrentDevice(trigger)) run = false;\r\n\r\n\t\tif (run || this.shouldAlwaysRunOnLoad()) {\r\n\t\t\tif (this.isOnLoadTrigger(trigger) && !this.isOnLoadDisabled(trigger)) {\r\n\t\t\t\tthis.startTourWithAnimation(trigger, this.startStep);\r\n\t\t\t} else {\r\n\t\t\t\tif (!trigger.config.once_per_session_only || !trigger.wasRunInThisSession) {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.activateTrigger(trigger);\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinitTour() {\r\n\t\tthis.triggers.forEach((trigger) => {\r\n\t\t\tthis.initTourWithSelectedTrigger(trigger);\r\n\t\t});\r\n\t}\r\n\r\n\tactivateTrigger(trigger) {\r\n\t\tif (!this.isOnLoadTrigger(trigger)) {\r\n\t\t\ttrigger.jElement.on(trigger.config.on, (event) => {\r\n\t\t\t\tlet start = true;\r\n\t\t\t\tif (trigger.config.specific_key_pressed && event) {\r\n\t\t\t\t\tif (trigger.config.on === 'keydown' ||\r\n\t\t\t\t\t\ttrigger.config.on === 'keypress' ||\r\n\t\t\t\t\t\ttrigger.config.on === 'keyup') {\r\n\t\t\t\t\t\tstart = trigger.config.specific_key_pressed == event.keyCode;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (start) {\r\n\t\t\t\t\tif (this.startTour(trigger) && event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcreateCoreInstance() {\r\n\t\treturn new DPIntroCore(this.dpIntroMain, this.mainCfg, this.tourId);\r\n\t}\r\n\r\n\tafterIntroCoreInit() {\r\n\r\n\t}\r\n\r\n\tinitCore() {\r\n\t\tthis.core = this.createCoreInstance();\r\n\t\tthis.steps = this.initPreprocessSteps();\r\n\t\tthis.afterIntroCoreInit();\r\n\t\tif (this.mainCfg.dpDebugEn) console.log('ROW STEPS', this.steps);\r\n\t\tif (this.steps && this.isStepsEnough2Start()) {\r\n\r\n\t\t\tthis.core.setOptions(this.getIntroCoreOptions());\r\n\t\t}\r\n\t\tthis.checkStickyTheme();\r\n\r\n\t}\r\n\r\n\tcheckStickyTheme() {\r\n\r\n\t\tif (this.core) {\r\n\t\t\tif (this.core.isStickyTheme()) {\r\n\t\t\t\t$(this.dpIntroWrapper).addClass(LAYER_CLASSES.isStickyTheme);\r\n\t\t\t\tthis.core.setOption('showProgress', true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$(this.dpIntroWrapper).removeClass(LAYER_CLASSES.isStickyTheme);\r\n\t\t\t\tthis.core.setOption('showProgress', this.tourCfg.behaviour.show_progress_bar);\r\n\t\t\t}\r\n\t\t\tthis.core.actualizeTooltipMaxWidth();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tinitPreprocessSteps() {\r\n\t\tlet steps = $.parseJSON(this.tourCfg.steps);\r\n\t\tif (steps) {\r\n\t\t\tsteps = steps.map((step) => {\r\n\t\t\t\tconst preprocessedStep = {};\r\n\t\t\t\tObject.keys(step).forEach(paramName => {\r\n\t\t\t\t\tpreprocessedStep[paramName] = DPIncUtils.decodeStepParamAdvancedVal(step[paramName], paramName, this.mainCfg.stepDefinitions, true, true);\r\n\t\t\t\t});\r\n\t\t\t\treturn preprocessedStep;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn steps;\r\n\t}\r\n\r\n\tgetIntroCoreOptions() {\r\n\t\treturn {\r\n\t\t\tsteps: this.steps,\r\n\t\t\tscrollToElement: true,\r\n\t\t\tscrollTo: 'all',\r\n\t\t\tenable_interaction: '0',\r\n\t\t\tshowStepNumbers: this.tourCfg.behaviour.show_step_numbers, // this.tourCfg.showStepNumbers,\r\n\t\t\tshowProgress: this.tourCfg.behaviour.show_progress_bar,//  this.tourCfg.showProgress,\r\n\t\t\tshowBullets: this.tourCfg.behaviour.show_bullet_navigation,// this.tourCfg.showBullets,\r\n\t\t\tlabeling: this.tourCfg.labeling,\r\n\t\t\tnextLabel: this.tourCfg.labeling.nextLabel || i18n('next', this.mainCfg.i18n),\r\n\t\t\tprevLabel: this.tourCfg.labeling.prevLabel || i18n('back', this.mainCfg.i18n),\r\n\t\t\tskipLabel: this.tourCfg.labeling.skipLabel || i18n('skip', this.mainCfg.i18n),\r\n\t\t\tdoneLabel: this.tourCfg.labeling.doneLabel || i18n('done', this.mainCfg.i18n),\r\n\t\t\texitOnOverlayClick: this.tourCfg.behaviour.exitOnOverlayClick,\r\n\t\t\thide_previous_step_button: this.tourCfg.behaviour.hide_previous_step_button,\r\n\t\t\thideNextAlways: this.tourCfg.behaviour.hideNextAlways,\r\n\t\t\thide_skip_button: this.tourCfg.behaviour.hide_skip_button,\r\n\t\t\toverlayBlurred: this.tourCfg.behaviour.overlayBlurred,\r\n\t\t\tdisable_navigation_by_bullets: this.tourCfg.behaviour.disable_navigation_by_bullets,\r\n\t\t\tmax_tooltip_width: this.tourCfg.behaviour.max_tooltip_width,\r\n\t\t\tskip_absent_ref_el: this.tourCfg.behaviour.skip_absent_ref_el,\r\n\t\t\tcustomTextStylesEn: !$.isEmptyObject(this.mainCfg.text_styles),\r\n\t\t\t...this._getScrollSpeed(this.tourCfg.behaviour.scrollSpeed),\r\n\t\t};\r\n\t}\r\n\r\n\t_getScrollSpeed(cfgScrollSpeed) {\r\n\t\tconst cfgScrollSpeedSanitized = Math.max(Math.min(cfgScrollSpeed, 100), 0);\r\n\t\tconst scrollSpeedPerPageMs = cfgScrollSpeedSanitized === 100 ?\r\n\t\t\t0 :\r\n\t\t\t0.0802 * Math.pow(cfgScrollSpeedSanitized, 2) - 18.01 * cfgScrollSpeedSanitized + SCROLL_SPEED_0_MS;\r\n\t\treturn {\r\n\t\t\tscrollSpeedPerPageMs: scrollSpeedPerPageMs,\r\n\t\t\tmaxScrollSpeedPerPageMs: scrollSpeedPerPageMs * SCROLL_MAX_TIME_COEF\r\n\t\t};\r\n\t}\r\n\r\n\tsetInRunClasses() {\r\n\t\t$(this.dpIntroWrapper).parent().addClass(LAYER_CLASSES.relativePosition);\r\n\t\t$(this.dpIntroWrapper).addClass(LAYER_CLASSES.tourInRun);\r\n\t\t$(document.documentElement).addClass(classNames({\r\n\t\t\t[LAYER_CLASSES.tourInRun]: true,\r\n\t\t\t[this.getTourIdPostfix()]: true,\r\n\t\t\t[LAYER_CLASSES.builderInRun]: this.core?.isBuilder,\r\n\t\t\t['dpit-theme-' + this.tourCfg.theme]: this.tourCfg.theme\r\n\t\t}));\r\n\t}\r\n\r\n\tclearInRunClasses() {\r\n\t\t$(this.dpIntroWrapper).parent().removeClass(LAYER_CLASSES.relativePosition);\r\n\t\t$(this.dpIntroWrapper).removeClass(LAYER_CLASSES.tourInRun);\r\n\t\t$(document.documentElement).removeClass(classNames({\r\n\t\t\t[LAYER_CLASSES.tourInRun]: true,\r\n\t\t\t[this.getTourIdPostfix()]: true,\r\n\t\t\t[LAYER_CLASSES.builderInRun]: true,\r\n\t\t\t['dpit-theme-' + this.tourCfg.theme]: this.tourCfg.theme\r\n\t\t}));\r\n\t}\r\n\r\n\tgetTourIdPostfix(prefix = LAYER_CLASSES.tourInRun) {\r\n\t\treturn `${prefix}-${this.tourId}`;\r\n\t}\r\n\r\n\tisStepsEnough2Start() {\r\n\t\treturn this.steps.length > 0;\r\n\t}\r\n\r\n\tupdateTheme() {\r\n\t\tthis.initRootWrapper();\r\n\t\tif (this.tourCfg && this.tourCfg.theme) {\r\n\t\t\t$(this.dpIntroWrapper).addClass(this.tourCfg.theme);\r\n\r\n\t\t}\r\n\r\n\t\tthis.setAccentColor(this.tourCfg.accentColor);\r\n\t\tthis.setRadiuses(this.tourCfg);\r\n\t\tDPIncUtils.setTextStyles(this.dpIntroWrapper, this.tourCfg?.text_styles, this.mainCfg?.mobile_break_points?.mobile);\r\n\t\tthis.checkStickyTheme();\r\n\t}\r\n\r\n\tsetRadiuses() {\r\n\t\tif (this.tourCfg.tooltip_radius >= 0) {\r\n\t\t\tthis.dpIntroWrapper.style.setProperty('--tooltip-border-radius', this.tourCfg.tooltip_radius + 'px');\r\n\t\t}\r\n\t\tif (this.tourCfg.highlight_radius >= 0) {\r\n\t\t\tthis.dpIntroWrapper.style.setProperty('--highlight-border-radius', this.tourCfg.highlight_radius + 'px');\r\n\t\t}\r\n\t\tif (this.tourCfg.button_radius >= 0) {\r\n\t\t\tthis.dpIntroWrapper.style.setProperty('--button-border-radius', this.tourCfg.button_radius + 'px');\r\n\t\t\tthis.dpIntroWrapper.style.setProperty('--button-border-radius-sm', 0.3 * this.tourCfg.button_radius + 'px');\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tadjustBulletsAnimationSizeVar() {\r\n\t\tif (this.tourCfg?.behaviour?.bulletAnimSize) {\r\n\t\t\tconst isMobileSize = this.isMobileSize(600);\r\n\t\t\tconst size1Bullet = isMobileSize ? this.tourCfg.behaviour.bulletAnimSize / 6 : this.tourCfg.behaviour.bulletAnimSize / 15; // include gap\r\n\t\t\tthis.dpIntroWrapper.style.setProperty('--bullet-anim-size', `${size1Bullet}vw`);\r\n\t\t\tthis.dpIntroWrapper.style.setProperty('--bullet-anim-gap', `${size1Bullet / 4}vw`);\r\n\t\t\tthis.dpIntroWrapper.style.setProperty('--bullet-anim-border-radius', `${this.tourCfg.behaviour.bulletAnimBorderRadius}%`);\r\n\t\t}\r\n\t}\r\n\r\n\tadjustContrastToOverlayVar() {\r\n\t\tif (this.tourCfg.behaviour.overlayBlurred) {\r\n\t\t\tthis.dpIntroWrapper.style.setProperty('--dpit-shadow-color', '30, 30, 30');\r\n\t\t\tthis.dpIntroWrapper.style.setProperty('--dpit-shadow-alpha', 0.05);\r\n\t\t}\r\n\t}\r\n\r\n\tsetAccentColor(accentColor, actualizeAutoFocus = false) {\r\n\t\tif (!accentColor) accentColor = this.tourCfg.accentColor;\r\n\t\tif (accentColor) {\r\n\t\t\tconst accent = Color.rgb(accentColor);\r\n\t\t\tif (accent) {\r\n\t\t\t\t$(document.documentElement).removeClass('dpit-light-accent');\r\n\t\t\t\tthis.currentAccentColor = `${accent.red()}, ${accent.green()}, ${accent.blue()}`;\r\n\t\t\t\tthis.dpIntroWrapper.style.setProperty('--accent-color', this.currentAccentColor);\r\n\t\t\t\tconst accentContrastColor = DPColors.getContrastColor(accentColor, false);\r\n\t\t\t\tif (accentContrastColor) {\r\n\t\t\t\t\tif (accentContrastColor.isDark()) $(document.documentElement).addClass('dpit-light-accent');\r\n\t\t\t\t\tconst gentleAccentColor = accent.mix(accentContrastColor, 0.2);\r\n\t\t\t\t\tthis.dpIntroWrapper.style.setProperty('--accent-color-gentle', `${gentleAccentColor.red()}, ${gentleAccentColor.green()}, ${gentleAccentColor.blue()}`);\r\n\t\t\t\t\tthis.dpIntroWrapper.style.setProperty('--accent-contrast-color', `${accentContrastColor.red()}, ${accentContrastColor.green()}, ${accentContrastColor.blue()}`);\r\n\t\t\t\t\tconst accentContrastInvColor = DPColors.getContrastColor(accentContrastColor, false);\r\n\t\t\t\t\tif (accentContrastInvColor) {\r\n\t\t\t\t\t\tthis.dpIntroWrapper.style.setProperty('--accent-contrast-inv-color', `${accentContrastInvColor.red()}, ${accentContrastInvColor.green()}, ${accentContrastInvColor.blue()}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.currentAccentColor = '';\r\n\t\t\tthis.dpIntroWrapper.style.removeProperty('--accent-color');\r\n\t\t\tthis.dpIntroWrapper.style.removeProperty('--accent-contrast-color');\r\n\t\t}\r\n\t\tthis.adjustContrastToOverlayVar();\r\n\t\tthis.adjustBulletsAnimationSizeVar();\r\n\t\tif (actualizeAutoFocus) this.core?.actualizeAutoFocus();\r\n\t}\r\n\r\n\tsetAsRunningTour() {\r\n\t\tif (!this.core.isThisInRun()) {\r\n\t\t\tif (!window.DpitApi) window.DpitApi = {\r\n\t\t\t\t[COMMANDS.goToNext]: () => this.core.goToNextStep(),\r\n\t\t\t\t[COMMANDS.goToPrev]: () => this.core.goToPreviousStep(),\r\n\t\t\t\t[COMMANDS.goToStep]: (stepIdx) => this.core.goToStep(stepIdx),\r\n\t\t\t\t[COMMANDS.exit]: () => this.core._exitIntro('skip'),\r\n\t\t\t\t[COMMANDS.setAccent]: (color) => this.setAccentColor(color, true),\r\n\t\t\t\t[COMMANDS.getScrollSpeed]: () => this.tourCfg?.behaviour?.scrollSpeed,\r\n\t\t\t\t[COMMANDS.setScrollSpeed]: (speedToSet) => this.core.setOptions(this._getScrollSpeed(speedToSet)),\r\n\t\t\t\t[COMMANDS.setCoreOptions]: (options) => this.core.setOptions(options)\r\n\t\t\t};\r\n\t\t\tthis.setInRunClasses();\r\n\r\n\t\t\tif (this.core) {\r\n\t\t\t\tthis.core.subscribeEvent(EVENTS.ended, this.onExitWrap);\r\n\t\t\t\tthis.core.subscribeEvent(EVENTS.onResize, this.onResizeWrap);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tresetAsRunningTour() {\r\n\t\tthis.clearInRunClasses();\r\n\t\twindow.DpitApi = null;\r\n\t\tthis.core.unsubscribeEvent(EVENTS.ended, this.onExitWrap);\r\n\t\tthis.core.unsubscribeEvent(EVENTS.onResize, this.onResizeWrap);\r\n\t}\r\n\r\n\tstartTourWithAnimation(trigger, step = 0, forceStart = false, backward = false, animationTimeMs = 1100) {\r\n\t\tif (!this.tourCfg.behaviour.disableStartAnimation) {\r\n\t\t\tif (this.isStepsEnough2Start() && !this.core.isInRun()) {\r\n\t\t\t\tthis.hideElementsAtStart();\r\n\t\t\t\tthis.setAsRunningTour();\r\n\r\n\t\t\t\tthis.core.addOverlayLayer(false, this.tourCfg.behaviour.overlayBlurred);\r\n\t\t\t\tthis.bulletsAnimation.createAndRun(backward, this.core.overlayContainer);\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t//this.bulletsAnimation.stopReloadSpinner();\r\n\t\t\t\t\tthis.bulletsAnimation.destroy();\r\n\t\t\t\t\tthis.startTour(trigger, step, forceStart, true);\r\n\t\t\t\t\tthis.adjustContrastToOverlayVar();\r\n\t\t\t\t}, animationTimeMs);\r\n\t\t\t}\r\n\t\t} else this.startTour(trigger, step, forceStart);\r\n\t}\r\n\r\n\tstartTour(trigger, step = 0, forceStart = false, disableIsInRunCheck = false) {\r\n\r\n\t\tif (this.isStepsEnough2Start() && (disableIsInRunCheck || !this.core.isInRun()) && (forceStart || !trigger.config.once_per_session_only || !trigger.wasRunInThisSession)) {\r\n\t\t\tthis.setAsRunningTour();\r\n\t\t\tthis.hideElementsAtStart();\r\n\t\t\ttrigger.isInRun = true;\r\n\r\n\t\t\tthis.core.start(step, this.isInitializedBackward());\r\n\t\t\tif (this.mainCfg.dpDebugEn) console.log('Starting tour: ', this.tourCfg.tourName + ' (' + this.tourId + ')');\r\n\t\t\ttrigger.wasRunInThisSession = true;\r\n\t\t\tthis.activeTriggerIdx = trigger.idx;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tisInitializedBackward() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\thideElementsAtStart() {\r\n\t\tif (this.tourCfg.hideElementsAtStart) {\r\n\t\t\tthis._hideElementAtStart();\r\n\t\t\tsetTimeout(this._hideElementAtStart.bind(this), 1000);\r\n\t\t}\r\n\t}\r\n\r\n\t_hideElementAtStart() {\r\n\t\tconst jHideEl = $S(this.tourCfg.hideElementsAtStart);\r\n\t\tif (jHideEl && jHideEl.length) {\r\n\t\t\tjHideEl.each((idx, element) => {\r\n\t\t\t\t$(element).addClass('dpit-hidden-at-start').fadeOut(150);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tshowHiddenElementsAtStart() {\r\n\t\t$('.dpit-hidden-at-start').fadeIn(150).removeClass('dpit-hidden-at-start');\r\n\t}\r\n\r\n\tonExitWrap = (args) => {\r\n\t\tthis.onExit(args.reason);\r\n\t}\r\n\r\n\tonExit(reason) {\r\n\t\tif (this.mainCfg.dpDebugEn) console.log('Exiting tour: ' + this.tourId + ' - reason: ' + reason);\r\n\t\tthis.showHiddenElementsAtStart();\r\n\t\tthis.triggers[this.activeTriggerIdx].isInRun = false;\r\n\t\tthis.resetAsRunningTour();\r\n\t}\r\n\r\n}","function n(n,r,t){return{r:255*t(n.r/255,r.r/255),g:255*t(n.g/255,r.g/255),b:255*t(n.b/255,r.b/255)};}function r(n,r){return r;}function t(n,r){return n*r;}function u(n,r){return n+r-n*r;}function i(n,r){return a(r,n);}function o(n,r){return Math.min(n,r);}function e(n,r){return Math.min(Math.max(n,r),1);}function c(n,r){return 0===n?0:1===r?1:Math.min(1,n/(1-r));}function f(n,r){return 1===n?1:0===r?0:1-Math.min(1,(1-n)/r);}function a(n,r){return r<=.5?t(n,2*r):u(n,2*r-1);}function b(n,r){return r<=.5?n-(1-2*r)*n*(1-n):n+(2*r-1)*((n<=.25?((16*n-12)*n+4)*n:Math.sqrt(n))-n);}function g(n,r){return Math.abs(n-r);}function h(n,r){return n+r-2*n*r;}function M(n,r,t){return Math.min(Math.max(n||0,r),t);}function m(n){return{r:M(n.r,0,255),g:M(n.g,0,255),b:M(n.b,0,255),a:M(n.a,0,1)};}function d(n){return{r:255*n.r,g:255*n.g,b:255*n.b,a:n.a};}function p(n){return{r:n.r/255,g:n.g/255,b:n.b/255,a:n.a};}function v(n,r){void 0===r&&(r=0);var t=Math.pow(10,r);return{r:Math.round(n.r*t)/t,g:Math.round(n.g*t)/t,b:Math.round(n.b*t)/t,a:n.a};}function x(n,r,t,u,i,o){return(1-r/t)*u+r/t*Math.round((1-n)*i+n*o);}function O(n,r,t,u,i){void 0===i&&(i={unitInput:!1,unitOutput:!1,roundOutput:!0}),i.unitInput&&(n=d(n),r=d(r)),n=m(n);var o=(r=m(r)).a+n.a-r.a*n.a,e=t(n,r,u),c=m({r:x(n.a,r.a,o,n.r,r.r,e.r),g:x(n.a,r.a,o,n.g,r.g,e.g),b:x(n.a,r.a,o,n.b,r.b,e.b),a:o});return c=i.unitOutput?p(c):i.roundOutput?v(c):function(n){return v(n,9);}(c),c;}function s(n,r,t){return d(t(p(n),p(r)));}function I(n){return .3*n.r+.59*n.g+.11*n.b;}function q(n,r){var t=r-I(n);return function(n){var r=I(n),t=n.r,u=n.g,i=n.b,o=Math.min(t,u,i),e=Math.max(t,u,i);function c(n){return r+(n-r)*r/(r-o);}function f(n){return r+(n-r)*(1-r)/(e-r);}return o<0&&(t=c(t),u=c(u),i=c(i)),e>1&&(t=f(t),u=f(u),i=f(i)),{r:t,g:u,b:i};}({r:n.r+t,g:n.g+t,b:n.b+t});}function w(n){return Math.max(n.r,n.g,n.b)-Math.min(n.r,n.g,n.b);}function j(n,r){var t=[\"r\",\"g\",\"b\"].sort(function(r,t){return n[r]-n[t];}),u=t[0],i=t[1],o=t[2],e={r:n.r,g:n.g,b:n.b};return e[o]>e[u]?(e[i]=(e[i]-e[u])*r/(e[o]-e[u]),e[o]=r):e[i]=e[o]=0,e[u]=0,e;}function k(n,r){return q(j(r,w(n)),I(n));}function l(n,r){return q(j(n,w(r)),I(n));}function y(n,r){return q(r,I(n));}function z(n,r){return q(n,I(r));}function A(t,u){return O(t,u,n,r);}function B(r,u){return O(r,u,n,t);}function C(r,t){return O(r,t,n,u);}function D(r,t){return O(r,t,n,i);}function E(r,t){return O(r,t,n,o);}function F(r,t){return O(r,t,n,e);}function G(r,t){return O(r,t,n,c);}function H(r,t){return O(r,t,n,f);}function J(r,t){return O(r,t,n,a);}function K(r,t){return O(r,t,n,b);}function L(r,t){return O(r,t,n,g);}function N(r,t){return O(r,t,n,h);}function P(n,r){return O(n,r,s,k);}function Q(n,r){return O(n,r,s,l);}function R(n,r){return O(n,r,s,y);}function S(n,r){return O(n,r,s,z);}export{R as color,H as colorBurn,G as colorDodge,E as darken,L as difference,N as exclusion,J as hardLight,P as hue,F as lighten,S as luminosity,B as multiply,A as normal,D as overlay,Q as saturation,C as screen,K as softLight};","var _typeof=require(\"@babel/runtime/helpers/typeof\");/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/ /* global define */(function(){'use strict';var hasOwn={}.hasOwnProperty;var nativeCodeString='[native code]';function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=_typeof(arg);if(argType==='string'||argType==='number'){classes.push(arg);}else if(Array.isArray(arg)){if(arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner);}}}else if(argType==='object'){if(arg.toString!==Object.prototype.toString&&!arg.toString.toString().includes('[native code]')){classes.push(arg.toString());continue;}for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key);}}}}return classes.join(' ');}if(typeof module!=='undefined'&&module.exports){classNames.default=classNames;module.exports=classNames;}else if(typeof define==='function'&&_typeof(define.amd)==='object'&&define.amd){// register as 'classnames', consistent with npm package name\ndefine('classnames',[],function(){return classNames;});}else{window.classNames=classNames;}})();","\r\nimport { getCssValFloat } from '../utils/dp-utils';\r\n\r\nexport default class DPBoundingBox {\r\n\r\n\tstatic actualizeBottomAndRight(element) {\r\n\t\telement.bottom = element.top + element.height - 1;\r\n\t\telement.right = element.left + element.width - 1;\r\n\t\treturn element;\r\n\t}\r\n\r\n\tstatic actualizeHeightAndWidth(element) {\r\n\t\telement.height = element.bottom - element.top + 1;\r\n\t\telement.width = element.right - element.left + 1;\r\n\t\treturn element;\r\n\t}\r\n\r\n\tstatic empty = () => {\r\n\t\treturn {\r\n\t\t\ttop: 0,\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0,\r\n\t\t\tleft: 0\r\n\t\t};\r\n\t}\r\n\r\n\tstatic area = (bb) => {\r\n\t\treturn bb && bb.width > 0 && bb.height > 0 ? bb.width * bb.height : 0;\r\n\t}\r\n\r\n\tstatic extendBB = (originalBB, extendTopBottomPx, extendLeftRightPx) => {\r\n\t\tif (originalBB && !isNaN(extendTopBottomPx) && !isNaN(extendLeftRightPx)) {\r\n\t\t\tconst resBB = { ...originalBB };\r\n\t\t\tresBB.top -= extendTopBottomPx;\r\n\t\t\tresBB.left -= extendLeftRightPx;\r\n\t\t\tresBB.bottom += extendTopBottomPx;\r\n\t\t\tresBB.right += extendLeftRightPx;\r\n\t\t\treturn DPBoundingBox.actualizeHeightAndWidth(resBB);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tstatic extendBB = (originalBB, extendSizePx) => {\r\n\t\tif (originalBB && !isNaN(extendSizePx)) {\r\n\t\t\tconst resBB = { ...originalBB };\r\n\t\t\tresBB.top -= extendSizePx;\r\n\t\t\tresBB.left -= extendSizePx;\r\n\t\t\tresBB.bottom += extendSizePx;\r\n\t\t\tresBB.right += extendSizePx;\r\n\t\t\treturn DPBoundingBox.actualizeHeightAndWidth(resBB);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t/**\r\n\t * Get an element position on the page\r\n\t * @api private\r\n\t * @method _getOffset\r\n\t * @param {Object} element\r\n\t * @returns Element's position info\r\n\t */\r\n\tstatic getElBoundingBox = (element, includeMargin = false, relativeToCurrentScrollTop = false, defVal = null, scrollTop = null, scrollLeft = null) => {\r\n\t\tif (element) {\r\n\t\t\tconst jElement = $(element);\r\n\t\t\tconst offset = jElement.offset();\r\n\t\t\tif (!includeMargin) {\r\n\r\n\t\t\t\treturn DPBoundingBox.boundingBox2RelativeScrollPos(DPBoundingBox.actualizeBottomAndRight({\r\n\t\t\t\t\ttop: offset.top,\r\n\t\t\t\t\tleft: offset.left,\r\n\t\t\t\t\twidth: jElement.outerWidth(false),\r\n\t\t\t\t\theight: jElement.outerHeight(false)\r\n\t\t\t\t}), relativeToCurrentScrollTop, scrollTop, scrollLeft);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn DPBoundingBox.boundingBox2RelativeScrollPos(DPBoundingBox.actualizeBottomAndRight({\r\n\t\t\t\t\ttop: offset.top - getCssValFloat(jElement, 'marginTop', 0),\r\n\t\t\t\t\tleft: offset.left - getCssValFloat(jElement, 'marginLeft', 0),\r\n\t\t\t\t\twidth: jElement.outerWidth(true),\r\n\t\t\t\t\theight: jElement.outerHeight(true)\r\n\t\t\t\t}), relativeToCurrentScrollTop, scrollTop, scrollLeft);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn defVal;\r\n\t}\r\n\r\n\tstatic boundingBox2RelativeScrollPos(boundingBox, enabled = true, scrollTop = null, scrollLeft = null) {\r\n\t\tconst st = scrollTop === null ? $(window).scrollTop() : scrollTop;\r\n\t\tconst sl = scrollLeft === null ? $(window).scrollLeft() : scrollLeft;\r\n\t\tconst boundingBoxNew = { ...boundingBox };\r\n\t\tboundingBoxNew.top -= enabled ? st : 0;\r\n\t\tboundingBoxNew.left -= enabled ? sl : 0;\r\n\t\tboundingBoxNew.bottom -= enabled ? st : 0;\r\n\t\tboundingBoxNew.right -= enabled ? sl : 0;\r\n\t\treturn boundingBoxNew;\r\n\t}\r\n\r\n\tstatic mergeBoundingBoxes(...boundingBoxes) {\r\n\t\tif (boundingBoxes.length) {\r\n\t\t\tconst notNulBBs = boundingBoxes.filter(bb => bb);\r\n\t\t\tconst tops = notNulBBs.map(bb => bb.top);\r\n\t\t\tconst lefts = notNulBBs.map(bb => bb.left);\r\n\t\t\tconst bottoms = notNulBBs.map(bb => bb.bottom);\r\n\t\t\tconst rights = notNulBBs.map(bb => bb.right);\r\n\r\n\t\t\tif (tops && tops.length && lefts && lefts.length && bottoms && bottoms.length && rights && rights.length) {\r\n\t\t\t\treturn DPBoundingBox.actualizeHeightAndWidth({\r\n\t\t\t\t\ttop: Math.min(...tops),\r\n\t\t\t\t\tleft: Math.min(...lefts),\r\n\t\t\t\t\tright: Math.max(...rights),\r\n\t\t\t\t\tbottom: Math.max(...bottoms)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic intersect(...boundingBoxes) {\r\n\t\tif (boundingBoxes.length) {\r\n\t\t\tconst notNulBBs = boundingBoxes.filter(bb => bb);\r\n\t\t\tconst tops = notNulBBs.map(bb => bb.top);\r\n\t\t\tconst lefts = notNulBBs.map(bb => bb.left);\r\n\t\t\tconst bottoms = notNulBBs.map(bb => bb.bottom);\r\n\t\t\tconst rights = notNulBBs.map(bb => bb.right);\r\n\r\n\t\t\tif (tops && tops.length && lefts && lefts.length && bottoms && bottoms.length && rights && rights.length) {\r\n\t\t\t\tconst bb = DPBoundingBox.actualizeHeightAndWidth({\r\n\t\t\t\t\ttop: Math.max(...tops),\r\n\t\t\t\t\tleft: Math.max(...lefts),\r\n\t\t\t\t\tright: Math.min(...rights),\r\n\t\t\t\t\tbottom: Math.min(...bottoms)\r\n\t\t\t\t});\r\n\t\t\t\treturn DPBoundingBox.area(bb) > 0 ? bb : null;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t_mergeElementsBoundingBoxes(...elements) {\r\n\t\treturn DPBoundingBox.mergeBoundingBoxes(...elements.map(el => DPBoundingBox.getElBoundingBox(el)));\r\n\t}\r\n\r\n\r\n\r\n\tstatic diff(bb1, bb2) {\r\n\t\treturn {\r\n\t\t\ttop: bb1.top - bb2.top,\r\n\t\t\tleft: bb1.left - bb2.left,\r\n\t\t\tbottom: bb1.bottom - bb2.bottom,\r\n\t\t\tright: bb1.right - bb2.right,\r\n\t\t\twidth: bb1.width - bb2.width,\r\n\t\t\theight: bb1.height - bb2.height,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic isEqual(bb1, bb2) {\r\n\t\treturn bb1.top === bb2.top\r\n\t\t\t&& bb1.left === bb2.left\r\n\t\t\t&& bb1.bottom === bb2.bottom\r\n\t\t\t&& bb1.right === bb2.right;\r\n\t}\r\n\r\n\tstatic diffAbs(bb1, bb2) {\r\n\t\tconst diffBB = DPBoundingBox.diff(bb1, bb2);\r\n\t\treturn {\r\n\t\t\ttop: Math.abs(diffBB.top),\r\n\t\t\tleft: Math.abs(diffBB.left),\r\n\t\t\tbottom: Math.abs(diffBB.bottom),\r\n\t\t\tright: Math.abs(diffBB.right),\r\n\t\t\twidth: Math.abs(diffBB.width),\r\n\t\t\theight: Math.abs(diffBB.height)\r\n\t\t};\r\n\t}\r\n}","import DPBoundingBox from '../modules/DPBoundingBox';\r\n\r\n\r\nconst calculateSpaceAroundFeature = (tooltipBB, maxScreenBB, isLeftOrRight) => {\r\n\t// Calculate features\r\n\tlet spaceAroundRatio = {\r\n\t\twidth: tooltipBB.width / maxScreenBB.width,\r\n\t\theight: tooltipBB.height / maxScreenBB.height\r\n\t};\r\n\treturn isLeftOrRight ? spaceAroundRatio.width - spaceAroundRatio.height : spaceAroundRatio.height - spaceAroundRatio.width;\r\n};\r\n\r\nconst determineGoldenIncrement = (spaceAroundFeature, isOverHeight, isLeftOrRight, maxDocBB, tooltipBB, closerToTargetBB, tooltipPos) => {\r\n\tlet moveCloserToWinBorder = Math.sign(spaceAroundFeature) < 0;\r\n\tif (isOverHeight) moveCloserToWinBorder = isLeftOrRight;\r\n\tlet range = 0;\r\n\tswitch (tooltipPos.base) {\r\n\t\tcase 'left': range = moveCloserToWinBorder ? [maxDocBB.left, tooltipBB.left] : [tooltipBB.left, closerToTargetBB.left]; break;\r\n\t\tcase 'right': range = moveCloserToWinBorder ? [tooltipBB.right, maxDocBB.right] : [closerToTargetBB.right, tooltipBB.right]; break;\r\n\t\tcase 'top': range = moveCloserToWinBorder ? [maxDocBB.top, tooltipBB.top] : [tooltipBB.top, closerToTargetBB.top]; break;\r\n\t\tcase 'bottom': range = moveCloserToWinBorder ? [tooltipBB.bottom, maxDocBB.bottom] : [closerToTargetBB.bottom, tooltipBB.bottom]; break;\r\n\t}\r\n\treturn (moveCloserToWinBorder ? -1 : 1) * (range[1] - range[0]) / 2;\r\n};\r\n\r\nconst modifyTooltipPosition = (increment, tooltipLayer, tooltipBB, tooltipPos, isLeftOrRight) => {\r\n\tif (isLeftOrRight) {\r\n\t\tconst tooltipBBBkp = { ...tooltipBB };\r\n\t\ttooltipLayer.style.width = (tooltipBB.width - increment) + 'px';\r\n\r\n\t\tif (tooltipPos.base === 'left') {\r\n\t\t\tconst newWidth = $(tooltipLayer).outerWidth(false);\r\n\t\t\tif (newWidth !== tooltipBBBkp.width) {\r\n\t\t\t\t$(tooltipLayer).offset({ left: tooltipBB.left - (newWidth - tooltipBBBkp.width) });\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (tooltipPos.align === 'bottom') {\r\n\t\t\tconst newHeight = $(tooltipLayer).outerHeight(false);\r\n\t\t\tif (newHeight !== tooltipBBBkp.height) {\r\n\t\t\t\t$(tooltipLayer).offset({ top: tooltipBB.bottom - newHeight + 1 });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\t// adjusting height doesn't automatically change a width ... so changing width instead\r\n\t\tconst tooltipHeightBkp = tooltipBB.height;\r\n\t\ttooltipLayer.style.width = (tooltipBB.width + increment) + 'px';\r\n\r\n\r\n\t\tif (tooltipPos.base === 'top') {\r\n\t\t\tconst newHeight = $(tooltipLayer).outerHeight(false);\r\n\t\t\tif (newHeight !== tooltipHeightBkp) {\r\n\t\t\t\t$(tooltipLayer).offset({ top: tooltipBB.top - (newHeight - tooltipHeightBkp) });\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (tooltipPos.align === 'right') {\r\n\t\t\t$(tooltipLayer).offset({ left: tooltipBB.left - increment });\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nexport default (targetBB, initTooltipBB, tooltipLayer, tooltipPos, maxScreenBB, maxDocBB, isFixedPos, dpDebugEn, maxIterations = 10) => {\r\n\r\n\tlet iterations = 0;\r\n\tlet tooltipBB = { ...initTooltipBB };\r\n\tlet lastTooltipBB = { ...initTooltipBB };\r\n\tlet featureSpaceAround = 1;\r\n\tlet isOverHeight = false;\r\n\tlet lastIsOverHeight = false;\r\n\r\n\tconst isLeftOrRight = ['left', 'right'].includes(tooltipPos.base);\r\n\r\n\twhile (iterations < maxIterations) {\r\n\r\n\t\tconst prevFeatureSpaceAround = featureSpaceAround;\r\n\r\n\t\t// Calculate the space around feature\r\n\t\tfeatureSpaceAround = calculateSpaceAroundFeature(tooltipBB, maxScreenBB, isLeftOrRight);\r\n\r\n\t\t// Check not a beneficial golden iteration direction\r\n\t\tif (iterations > 0 && !isOverHeight && Math.abs(featureSpaceAround) > Math.abs(prevFeatureSpaceAround)) {\r\n\t\t\t// reverse to last position (algorithm failed)\r\n\t\t\tif (dpDebugEn) console.log('Golden ratio: (bad direction)');\r\n\t\t\ttooltipLayer.style.width = (lastTooltipBB.width) + 'px';\r\n\t\t\t$(tooltipLayer).offset({\r\n\t\t\t\tleft: lastTooltipBB.left + (isFixedPos ? $(window).scrollLeft() : 0),\r\n\t\t\t\ttop: lastTooltipBB.top + (isFixedPos ? $(window).scrollTop() : 0)\r\n\t\t\t});\r\n\r\n\r\n\t\t\titerations--;\r\n\t\t\ttooltipBB = { ...lastTooltipBB };\r\n\t\t\tisOverHeight = lastIsOverHeight;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tlastTooltipBB = { ...tooltipBB };\r\n\r\n\t\t// Check over height\r\n\t\tlastIsOverHeight = isOverHeight;\r\n\t\tisOverHeight = tooltipBB.height > maxScreenBB.height;\r\n\r\n\t\t// Was algorithm successful so finish ?\r\n\t\tlet isBestPosFound = false;\r\n\t\tif (!isOverHeight) {\r\n\t\t\tif (iterations === 0) {\r\n\t\t\t\tisBestPosFound = Math.abs(featureSpaceAround) <= 0.03;\r\n\t\t\t} else {\r\n\t\t\t\tconst featureSpaceAroundDerivation = Math.abs(prevFeatureSpaceAround) - Math.abs(featureSpaceAround);\r\n\t\t\t\tisBestPosFound = Math.abs(featureSpaceAround) <= 0.1 || featureSpaceAroundDerivation <= 0.05;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isBestPosFound) break;\r\n\r\n\t\t// Determine size/position increment by golden ratio\r\n\t\tconst increment = determineGoldenIncrement(\r\n\t\t\tfeatureSpaceAround,\r\n\t\t\tisOverHeight,\r\n\t\t\tisLeftOrRight,\r\n\t\t\tmaxDocBB,\r\n\t\t\ttooltipBB,\r\n\t\t\titerations === 0 ? targetBB : lastTooltipBB,\r\n\t\t\ttooltipPos\r\n\t\t);\r\n\r\n\t\t// Change to new size/position\r\n\t\tmodifyTooltipPosition(increment, tooltipLayer, tooltipBB, tooltipPos, isLeftOrRight);\r\n\r\n\r\n\t\ttooltipBB = DPBoundingBox.getElBoundingBox(tooltipLayer, false, isFixedPos);\r\n\r\n\t\tif (DPBoundingBox.isEqual(lastTooltipBB, tooltipBB)) {\r\n\t\t\tif (dpDebugEn) console.log('Golden ratio: ENDED (size modification had no effect)', iterations);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\titerations++;\r\n\t}\r\n\tif (dpDebugEn) console.log(`Golden ratio: SUCCESS (by ${iterations} iterations)`);\r\n\treturn {\r\n\t\twasPosAdjusted: iterations > 0,\r\n\t\ttooltipBB: tooltipBB,\r\n\t\tisOverHeight: isOverHeight\r\n\t};\r\n};","import Color from 'color';\r\nconst { normal } = require('color-blend');\r\nimport {\r\n\t$S, i18n, hideElement, showElement, getWinBB, getDocBB, getTransitionDurationMs,\r\n\tgetCssVarVal, getCssValFloat, dpZIndex, getReverseBasePos\r\n} from '../utils/dp-utils';\r\nimport DPBoundingBox from './DPBoundingBox';\r\nimport goldenRatioPosAlg from '../utils/goldenRatioPosAlg';\r\nimport classNames from 'classnames';\r\nimport BulletsAnimation from '../../../../includes/assets/js/modules/BulletsAnimation';\r\nimport DpitHooks from '../../../../includes/assets/js/modules/DpitHooks';\r\n\r\n\r\nconst IS_DEBUG = false;\r\n\r\nexport const LAYER_CLASSES = {\r\n\twrapper: 'dpit-wrapper',\r\n\tmain: 'dpit-main',\r\n\tbuilder: 'dpit-builder',\r\n\thighlight: 'dpit-highlight',\r\n\ttooltipReference: 'dpit-tooltip-ref',\r\n\ttooltip: 'dpit-tooltip',\r\n\ttooltipWithNumber: 'dpit-tooltip--with-number',\r\n\ttooltipText: 'dpit-tooltip-text',\r\n\tarrow: 'dpit-arrow',\r\n\tprogress: 'dpit-progress',\r\n\tprogressBar: 'dpit-progress-bar',\r\n\ttooltipButtons: 'dpit-tooltip-buttons',\r\n\tbullets: 'dpit-bullets',\r\n\trbAnim: 'dpit-rb-anim',\r\n\tbulletsAnimModifier: 'anim',\r\n\tnumber: 'dpit-tooltip-number',\r\n\tnumberOnTooltip: 'dpit-tooltip-number--on-tooltip',\r\n\tbutton: 'dpit-button',\r\n\tbuttonText: 'dpit-button__text',\r\n\tbuttonSpacer: 'dpit-button__spacer',\r\n\tbuttonIco: 'dpit-button__ico',\r\n\tbuttonTextIco: 'dpit-button__text-ico',\r\n\tbuttonNext: 'dpit-button--next',\r\n\tbuttonPrev: 'dpit-button--prev',\r\n\tbuttonSkip: 'dpit-button--skip',\r\n\tbuttonFull: 'dpit-button--full',\r\n\tbuttonDone: 'dpit-button--done',\r\n\toverlay: 'dpit-overlay',\r\n\toverlayBlurredModifier: 'blurred',\r\n\toverlayContainer: 'dpit-overlay-container',\r\n\tdisableInteraction: 'dpit-disable-interaction',\r\n\thidden: 'dpit-hidden',\r\n\thiddenByOpacityAndWidth: 'dpit-hidden-by-opacity',\r\n\tdisabled: 'dpit-disabled',\r\n\ttourInRun: 'dpit-on',\r\n\tbuilderInRun: 'dpit-bon',\r\n\tnoTrans: 'dpit-no-trans',\r\n\ttarget: 'dpit-target',\r\n\ttargetClick: 'dpit-target--click',\r\n\ttargetBlockEvents: 'dpit-target--block-events',\r\n\ttargetParent: 'dpit-target-parent',\r\n\ttargetParentFixed: 'dpit-target-parent--fixed',\r\n\ttargetParentFixedChild: 'dpit-target-parent--fixed-child',\r\n\ttargetParentFixedCloser: 'dpit-target-parent--fixed-closer',\r\n\trelativePosition: 'dpit-relative-position',\r\n\ttargetDummy: 'dpit-target-dummy',\r\n\tcolorAdjusted: 'dpit-color-adjusted',\r\n\tbulletPulse: 'dpit-bullet-pulse',\r\n\tgelatinePulse: 'dpit-gelatine-pulse',\r\n\tisStickyTheme: 'dpit-is-sticky-theme'\r\n};\r\n\r\nexport const EVENTS = {\r\n\tstarted: 'started',\r\n\tonInit: 'onInit',\r\n\tonBeforeEnd: 'onBeforeEnd',\r\n\tended: 'ended',\r\n\tbeforeStepChange: 'beforeStepChange',\r\n\tafterStepChange: 'afterStepChange',\r\n\tonButtonHover: 'onButtonHover',\r\n\tonResize: 'onResize',\r\n\tonBeforeRedirect: 'onBeforeRedirect',\r\n\tonMobileMenuClose: 'onMobileMenuClose',\r\n\tonMobileMenuOpen: 'onMobileMenuOpen',\r\n\tonOverlayClick: 'onOverlayClick'\r\n};\r\n\r\nexport const COMMANDS = {\r\n\tgoToNext: 'goToNext',\r\n\tgoToPrev: 'goToPrev',\r\n\tgoToStep: 'goToStep',\r\n\texit: 'exit',\r\n\tsetAccent: 'setAccent',\r\n\tgetScrollSpeed: 'getScrollSpeed',\r\n\tsetScrollSpeed: 'setScrollSpeed',\r\n\tsetCoreOptions: 'setCoreOptions'\r\n};\r\n\r\nexport const CALLBACKS = {\r\n\tbeforeStepChange: 'beforeStepChange',\r\n\tonBeforeShowStep: 'onBeforeShowStep',\r\n\tonBeforeEnd: 'onBeforeEnd'\r\n};\r\n\r\nexport const RESIZE_ACTION = {\r\n\tnone: 'none',\r\n\tsoft: 'soft',\r\n\thard: 'hard'\r\n};\r\n\r\nconst colorToRgbaObject = (color) => {\r\n\treturn {\r\n\t\tr: color.red(),\r\n\t\tg: color.green(),\r\n\t\tb: color.blue(),\r\n\t\ta: color.alpha()\r\n\t};\r\n};\r\n\r\nconst rgbaObjectToColor = (rgba) => {\r\n\tconst res = Color.rgb(rgba.r, rgba.g, rgba.b);\r\n\tres.alpha(rgba.a);\r\n\treturn res;\r\n};\r\n\r\n\r\n\r\n\r\nexport default class DPIntroCore {\r\n\tconstructor(mainElement, mainCfg, tourId) {\r\n\t\tthis.VERSION = '2.0.0';\r\n\t\tif (mainCfg.dpDebugEn) console.log('DPIntroCore ' + this.VERSION);\r\n\t\tthis.mainCfg = mainCfg;\r\n\t\tthis.mainElement = mainElement;\r\n\t\tconst jWrapperEl = $(this.mainElement).closest('.' + LAYER_CLASSES.wrapper);\r\n\t\tthis.dpIntroWrapper = jWrapperEl.length ? jWrapperEl[0] : null;\r\n\t\tthis.introItems = [];\r\n\t\tthis.isPortraitOrientation = null;\r\n\t\tthis.activeControl = 'next';\r\n\t\tthis.paddingExtensionSize = {\r\n\t\t\tlr: 0,\r\n\t\t\ttb: 0\r\n\t\t};\r\n\t\tthis.hookBaseArgs = {\r\n\t\t\ttourId: tourId,\r\n\t\t\tcurrentUrl: new URL(window.location)\r\n\t\t};\r\n\r\n\t\t$.fn.hasScrollBar = function (x = true, y = true) {\r\n\t\t\tconst hasInX = this.get(0).scrollWidth > this.get(0).clientWidth;\r\n\t\t\tconst hasInY = this.get(0).scrollHeight > this.get(0).clientHeight;\r\n\t\t\tif (x && y) return hasInX && hasInX;\r\n\t\t\telse if (x) return hasInX;\r\n\t\t\telse if (y) return hasInY;\r\n\t\t};\r\n\r\n\t\tthis.options = {\r\n\t\t\tdpDebugEn: mainCfg.dpDebugEn,\r\n\t\t\tlabeling: {\r\n\t\t\t\t/* Next button label in tooltip box */\r\n\t\t\t\tnextLabel: 'Next', // &rarr\r\n\t\t\t\t/* Previous button label in tooltip box */\r\n\t\t\t\tprevLabel: 'Back',\r\n\t\t\t\t/* Cancel button label in tooltip box */\r\n\t\t\t\tskipLabel: 'Cancel',\r\n\t\t\t\t/* Done button label in tooltip box */\r\n\t\t\t\tdoneLabel: 'Done',\r\n\t\t\t\tbutton_arrows: 'vector'\r\n\t\t\t},\r\n\t\t\t/* Hide previous button always. */\r\n\t\t\thide_previous_step_button: false,\r\n\t\t\t/* Disable navigation to step by click to bullet. */\r\n\t\t\tdisable_navigation_by_bullets: false,\r\n\t\t\t/* Hide next button always. */\r\n\t\t\thideNextAlways: false,\r\n\t\t\t/* Hide previous button in the first step? Otherwise, it will be disabled button. */\r\n\t\t\thidePrev: true,\r\n\t\t\t/* Hide next button in the last step? Otherwise, it will be disabled button. */\r\n\t\t\thideNext: true,\r\n\t\t\t/* Hide skip button if it is not DONE - in the last step? */\r\n\t\t\thide_skip_button: false,\r\n\t\t\t/* Next CSS class for tooltip boxes */\r\n\t\t\ttooltipClass: '',\r\n\t\t\t/* CSS class that is added to the helperLayer */\r\n\t\t\thighlightClass: '',\r\n\t\t\t/* Close introduction when pressing Escape button? */\r\n\t\t\texitOnEsc: true,\r\n\t\t\t/* Close introduction when clicking on overlay layer? */\r\n\t\t\texitOnOverlayClick: true,\r\n\t\t\t/* Show step numbers in introduction? */\r\n\t\t\tshowStepNumbers: true,\r\n\t\t\t/* Let user use keyboard to navigate the tour? */\r\n\t\t\tkeyboardNavigation: true,\r\n\t\t\t/* Show tour control buttons? */\r\n\t\t\tshowButtons: true,\r\n\t\t\t/* Show tour bullets? */\r\n\t\t\tshowBullets: true,\r\n\t\t\t/* Show tour progress? */\r\n\t\t\tshowProgress: false,\r\n\t\t\t/* Scroll to highlighted element? */\r\n\t\t\tscrollToElement: true,\r\n\t\t\t/* Distance of tooltip ... resp tooltip arrow from highlighted box on targeted element */\r\n\t\t\ttooltipDistanceFromTarget: 7,\r\n\r\n\t\t\twindowMarginCoef: { x: 0.3, y: 0.3 }, // base is arrow size\r\n\r\n\t\t\ttargetExtendPaddingPercent: 10,//20,\r\n\t\t\ttargetExtendPaddingMaxPx: 12,\r\n\r\n\t\t\t//Should we scroll the tooltip target element or both?  Options are: 'element', 'tooltip' or all\r\n\t\t\tscrollTo: 'all',\r\n\r\n\t\t\t/* Set the overlay opacity */\r\n\t\t\toverlayOpacity: 0.8,\r\n\t\t\toverlayOpacityCoefWhenScroll: 0.7,\r\n\r\n\t\t\toverlayBlurred: false,\r\n\t\t\t/* Precedence of positions, when auto is enabled */\r\n\t\t\tpositionPrecedence: ['bottom', 'top', 'right', 'left', 'center'],\r\n\t\t\t/* Disable an interaction with element? */\r\n\t\t\tenable_interaction: '1',\r\n\r\n\t\t\t/* additional classes to put on the buttons */\r\n\t\t\tbuttonClass: LAYER_CLASSES.button,\r\n\r\n\t\t\tcontrolsAutoFocusEnable: true,\r\n\r\n\t\t\tcenterTopBottomPosOffset: 80,\r\n\r\n\t\t\tscrollSpeedPerPageMs: 300,\r\n\t\t\tmaxScrollSpeedPerPageMs: 550,\r\n\r\n\r\n\t\t\tmax_tooltip_width: 0,\r\n\r\n\t\t\tleave_overlay_always: false,\r\n\r\n\t\t\tcustomTextStylesEn: true,\r\n\t\t\tscrollEasing: 'swing',\r\n\t\t\tscrollDurationMsOverride: -1,\r\n\r\n\t\t\tgoldenRatioPosAlgEn: true,\r\n\t\t\tfollowTargetEn: true,\r\n\t\t\tresizeRefreshEn: true,\r\n\r\n\t\t};\r\n\t\tthis.arrowSizes = { width: 30, height: 30 }; // is recalculated\r\n\t\tthis.actualizeBoardSizes();\r\n\t\tthis.docResizeObserver = new ResizeObserver(this.actualizeBoardSizes);\r\n\t}\r\n\r\n\tdoAction(tag, args = {}) {\r\n\t\tif (this.isThisInRun()) {\r\n\t\t\tDpitHooks.doAction(tag, {\r\n\t\t\t\t...this.hookBaseArgs,\r\n\t\t\t\tcurrentStepObj: this.stepObject4Hooks(this.currentTargetItem),\r\n\t\t\t\t...args,\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tstepObject4Hooks(stepCore) {\r\n\t\tif (!stepCore) return null;\r\n\t\tlet res = {\r\n\t\t\tindex: stepCore.step,\r\n\t\t\ttooltipContent: stepCore.intro,\r\n\t\t\ttooltipPosition: stepCore.position || 'auto',\r\n\t\t\telement: stepCore.isDummyElement ? null : stepCore.element,\r\n\t\t\tselector: stepCore.selector,\r\n\t\t\tisEnabledInteraction: stepCore.enable_interaction?.val == 1,\r\n\t\t};\r\n\t\t// PRO features\r\n\t\tif (typeof stepCore.url !== 'undefined') {\r\n\t\t\tres = {\r\n\t\t\t\t...res,\r\n\t\t\t\turl: stepCore.url,\r\n\t\t\t\taltMobileSelector: stepCore.alt_mobile_selector,\r\n\t\t\t\tisInMobileMenu: stepCore.is_in_mobile_menu == 1,\r\n\t\t\t\tskipOnBigScreen: stepCore.skip_on_big_screen == 1,\r\n\t\t\t\tskipOnMobile: stepCore.skip_on_mobile == 1\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tactualizeDpWrapperSize() {\r\n\t\t$(this.dpIntroWrapper).height(this.docBB.height);\r\n\t\t$(this.dpIntroWrapper).width(this.docBB.width);\r\n\t}\r\n\r\n\tstartFollowTarget = (firstInsensitivity = 2, insensitivity = 1, ms = 10) => {\r\n\t\tif (this.followTargetInterval || !this.options.followTargetEn || !this.currentTargetItem || (this.currentTargetItem.isDummyElement && !this.targetDummyBkpEl)) return;\r\n\t\tconst isDummyBkpActive = this.currentTargetItem.isDummyElement && this.targetDummyBkpEl;\r\n\t\tconst currentTargetEl = isDummyBkpActive ? this.targetDummyBkpEl : this.currentTargetItem.element;\r\n\t\tif (!currentTargetEl || !this.tooltipReferenceLayer) return;\r\n\r\n\t\tlet lastTargetBB = DPBoundingBox.getElBoundingBox(currentTargetEl);\r\n\t\tconst lastRefLayerBB = DPBoundingBox.getElBoundingBox(this.tooltipReferenceLayer);\r\n\t\tlet lastRefDiffBB = DPBoundingBox.diff(lastTargetBB, lastRefLayerBB);\r\n\r\n\r\n\t\tif (this.options.dpDebugEn) console.log('follow start - init target BB:', lastTargetBB);\r\n\t\tthis.isFollowTargetEnabled = true;\r\n\t\tlet isFirstRun = false;\r\n\r\n\r\n\t\tthis.followTargetInterval = setInterval(() => {\r\n\t\t\tif (!currentTargetEl || !this.tooltipReferenceLayer || (!$(currentTargetEl).hasClass(LAYER_CLASSES.target) && !isDummyBkpActive)) return;\r\n\t\t\tconst _insensitivity = isFirstRun ? firstInsensitivity : insensitivity;\r\n\t\t\tconst newTargetBB = DPBoundingBox.getElBoundingBox(currentTargetEl);\r\n\t\t\tconst newRefLayerBB = DPBoundingBox.getElBoundingBox(this.tooltipReferenceLayer);\r\n\t\t\tconst newRefDiffBB = DPBoundingBox.diff(newTargetBB, newRefLayerBB);\r\n\t\t\tconst refDiffAbsDiffBB = DPBoundingBox.diffAbs(lastRefDiffBB, newRefDiffBB);\r\n\t\t\tif (refDiffAbsDiffBB.top > _insensitivity\r\n\t\t\t\t|| refDiffAbsDiffBB.left > _insensitivity\r\n\t\t\t\t|| refDiffAbsDiffBB.width > _insensitivity\r\n\t\t\t\t|| refDiffAbsDiffBB.height > _insensitivity\r\n\t\t\t) {\r\n\t\t\t\tif (this.options.dpDebugEn) console.log(`---  STEP ${this._currentStep} FOLLOW TARGET: TARGET CHANGE POSITION: STARTED ---`);\r\n\t\t\t\tthis._actualizeTargetPositionBasic(this.currentTargetItem);\r\n\t\t\t\tlastRefDiffBB = newRefDiffBB;\r\n\t\t\t\tlastTargetBB = newTargetBB;\r\n\t\t\t}\r\n\t\t}, ms);\r\n\t}\r\n\r\n\r\n\r\n\tpauseFollowTarget() {\r\n\t\tthis.wasFollowTargetEnabled = this.isFollowTargetEnabled;\r\n\t\tthis.stopFollowTarget();\r\n\t}\r\n\r\n\trestoreFollowTarget() {\r\n\t\tif (this.wasFollowTargetEnabled) {\r\n\t\t\tthis.startFollowTarget();\r\n\t\t}\r\n\t}\r\n\r\n\tstopFollowTarget() {\r\n\t\tif (this.isFollowTargetEnabled) if (this.options.dpDebugEn) console.log('un-follow');\r\n\t\tthis.isFollowTargetEnabled = false;\r\n\t\tclearInterval(this.followTargetInterval);\r\n\t\tthis.followTargetInterval = null;\r\n\t}\r\n\r\n\tisStickyTheme = () => {\r\n\t\tlet res = false;\r\n\t\tif (this.dpIntroWrapper) {\r\n\t\t\tres = $(this.dpIntroWrapper).hasClass('sticky');\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\r\n\tsetStepAsDummy = (step, targetDummyBkpEl = null) => {\r\n\t\tif (step) {\r\n\t\t\tthis.targetDummy = this.mainElement.querySelector('.' + LAYER_CLASSES.targetDummy);\r\n\t\t\tstep.isDummyElement = true;\r\n\t\t\tif (this.targetDummy === null) {\r\n\t\t\t\tthis.targetDummy = document.createElement('div');\r\n\t\t\t\tthis.targetDummy.setAttribute('aria-hidden', 'true');\r\n\t\t\t\tthis.mainElement.appendChild(this.targetDummy);\r\n\t\t\t}\r\n\t\t\tthis.targetDummy.className = LAYER_CLASSES.targetDummy;\r\n\r\n\t\t\tstep.element = this.targetDummy;\r\n\t\t\tthis.targetDummyBkpEl = targetDummyBkpEl;\r\n\t\t\t$(this.highlightLayer).addClass('highlight-dummy');\r\n\t\t}\r\n\t}\r\n\r\n\tresetStepAsDummy = (step) => {\r\n\t\tif (step && step.isDummyElement) {\r\n\t\t\tstep.isDummyElement = false;\r\n\t\t}\r\n\t\tthis.targetDummyBkpEl = null;\r\n\t\t$(this.highlightLayer).removeClass('highlight-dummy');\r\n\t}\r\n\r\n\tinitSteps() {\r\n\t\tvar introItems = [];\r\n\t\tif (this.options.steps) {\r\n\r\n\t\t\tthis._forEach(this.options.steps, (step) => {\r\n\t\t\t\tvar stepItem = this._cloneObject(step);\r\n\r\n\t\t\t\t//set the step\r\n\t\t\t\tstepItem.step = introItems.length + 1;\r\n\r\n\t\t\t\t//use querySelector function only when developer used CSS selector\r\n\t\t\t\tstepItem.selector = stepItem.element;\r\n\r\n\t\t\t\tthis.actualizeTargetItemCore(stepItem, false, true);\r\n\r\n\t\t\t\tstepItem.scrollTo = stepItem.scrollTo || this.options.scrollTo;\r\n\r\n\t\t\t\tif (typeof (stepItem.enable_interaction) === 'undefined') {\r\n\t\t\t\t\tstepItem.enable_interaction = { val: this.options.enable_interaction };\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (stepItem.element !== null) {\r\n\t\t\t\t\tintroItems.push(stepItem);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//removing undefined/null elements\r\n\t\tvar tempIntroItems = [];\r\n\t\tfor (var z = 0; z < introItems.length; z++) {\r\n\t\t\tif (introItems[z]) {\r\n\t\t\t\t// copy non-falsy values to the end of the array\r\n\t\t\t\ttempIntroItems.push(introItems[z]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tintroItems = tempIntroItems;\r\n\t\t//Ok, sort all items with given steps\r\n\t\tintroItems.sort((a, b) => {\r\n\t\t\treturn a.step - b.step;\r\n\t\t});\r\n\t\treturn introItems;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t* Start a new intro tour\r\n\t*\r\n\t* @api private\r\n\t* @method start\r\n\t* @returns {Boolean} Success or not?\r\n\t*/\r\n\tstart = (startStep = 0, backward = false) => {\r\n\t\tthis.ending = false;\r\n\t\t//set it to the DPIntroCore object\r\n\t\tthis.introItems = this.initSteps();\r\n\t\tthis._currentStep = Math.max(-1, Math.min(startStep - 1, this.introItems.length - 1));\r\n\t\tthis.doAction(EVENTS.started);\r\n\r\n\t\t//add overlay layer to the page\r\n\t\tif (this.addOverlayLayer(false, this.options.overlayBlurred)) {\r\n\t\t\t//then, start the show\r\n\t\t\tthis.nextStep(backward, true);\r\n\t\t\t$(this.overlayLayer).on('click', this._onOverlayClick.bind(this));\r\n\t\t\tthis._onKeyDownEventHandler = this._onKeyDown.bind(this);\r\n\t\t\t$(window).on('keydown', this._onKeyDownEventHandler);\r\n\t\t\t//for window resize\r\n\r\n\t\t\t$(window).on('resize', this._onResize);\r\n\r\n\r\n\t\t\tthis.docResizeObserver.observe(document.documentElement);\r\n\t\t\tthis.docResizeObserver.observe(document.body);\r\n\r\n\t\t}\r\n\t\tthis.isPortraitOrientation = this.isScreenPortraitOrientation(this.winBB);\r\n\t\treturn false;\r\n\t}\r\n\r\n\t_onOverlayClick() {\r\n\t\tif (this.options.exitOnOverlayClick === true) {\r\n\t\t\tthis._exitIntro('skip');\r\n\t\t}\r\n\t\tthis.doAction(EVENTS.onOverlayClick);\r\n\t}\r\n\r\n\tsetOption = (option, value) => {\r\n\t\tthis.options[option] = value;\r\n\t}\r\n\r\n\tsetOptions(options) {\r\n\t\tthis.options = {\r\n\t\t\t...this.options,\r\n\t\t\t...options\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t* Go to specific step of introduction\r\n\t*\r\n\t* @api private\r\n\t* @method goToStep\r\n\t*/\r\n\tgoToStep = (step) => {\r\n\t\tif (!Number.isNaN(step)) {\r\n\t\t\t//because steps starts with zero\r\n\t\t\tconst backward = (step - 2) < this._currentStep;\r\n\t\t\tthis._currentStep = step - 2;\r\n\t\t\tif (typeof (this.introItems) !== 'undefined') {\r\n\t\t\t\tthis.nextStep(backward);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Go to the specific step of introduction with the explicit [data-step] number\r\n\t *\r\n\t * @api private\r\n\t * @method goToStepNumber\r\n\t */\r\n\tgoToStepNumber = (step) => {\r\n\t\tif (!Number.isNaN(step)) {\r\n\t\t\tif (this.currentTargetItem) this.updateIterateAfter(this.currentTargetItem, true);\r\n\t\t\tthis._currentStepNumber = step;\r\n\t\t\tif (typeof (this.introItems) !== 'undefined') {\r\n\t\t\t\tthis.nextStep();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Go to next step on intro\r\n\t *\r\n\t * @api private\r\n\t * @method nextStep\r\n\t */\r\n\tnextStep = (backward = false, isJustStartedStep = false) => {\r\n\r\n\t\tif (typeof (this._currentStepNumber) !== 'undefined') {\r\n\t\t\tthis._forEach(this.introItems, (item, i) => {\r\n\t\t\t\tif (item.step === this._currentStepNumber) {\r\n\t\t\t\t\tthis._currentStep = i - 1;\r\n\t\t\t\t\tthis._currentStepNumber = undefined;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tlet previousStep = isJustStartedStep ? null : this.currentTargetItem;\r\n\t\tif (previousStep) this.updateIterateAfter(previousStep, true);\r\n\r\n\t\tif (typeof (this._currentStep) === 'undefined') {\r\n\t\t\tthis._currentStep = 0;\r\n\t\t} else {\r\n\t\t\t++this._currentStep;\r\n\t\t}\r\n\r\n\t\tvar nextStep = this.introItems[this._currentStep];\r\n\t\tvar continueStep = true;\r\n\r\n\r\n\t\tthis.doAction(EVENTS.beforeStepChange, {\r\n\t\t\tnextStepObj: this.stepObject4Hooks(nextStep),\r\n\t\t\tbackward: backward,\r\n\t\t\tcurrentStepObj: this.stepObject4Hooks(previousStep)\r\n\t\t});\r\n\t\tif (this.beforeStepChangeCallback instanceof Function) {\r\n\t\t\tcontinueStep = this.beforeStepChangeCallback(this, nextStep, backward, previousStep);\r\n\t\t}\r\n\r\n\t\tif (continueStep === -1) {\r\n\t\t\t--this._currentStep;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse if (continueStep === 0) {\r\n\t\t\tthis.nextStep();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ((this.introItems.length) <= this._currentStep) {\r\n\t\t\t//end of the intro\r\n\t\t\t//check if any callback is defined\r\n\t\t\tthis.nextStepOnLastStep();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.activeControl = backward ? 'back' : 'next';\r\n\t\tthis.showStepItem(nextStep, false, backward);\r\n\t}\r\n\r\n\tnextStepOnLastStep() {\r\n\t\tthis._exitIntro('complete');\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * Go to previous step on intro\r\n\t *\r\n\t * @api private\r\n\t * @method previousStep\r\n\t */\r\n\tpreviousStep = () => {\r\n\r\n\r\n\t\tif (this._currentStep === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.activeControl = 'back';\r\n\r\n\t\tlet previousStep = this.currentTargetItem;\r\n\t\tif (previousStep) this.updateIterateAfter(previousStep, true);\r\n\r\n\t\t--this._currentStep;\r\n\r\n\t\tvar nextStep = this.introItems[this._currentStep];\r\n\t\tvar continueStep = true;\r\n\r\n\t\tthis.doAction(EVENTS.beforeStepChange, {\r\n\t\t\tnextStepObj: this.stepObject4Hooks(nextStep),\r\n\t\t\tbackward: true,\r\n\t\t\tcurrentStepObj: this.stepObject4Hooks(previousStep)\r\n\t\t});\r\n\t\tif (typeof (this.beforeStepChangeCallback) !== 'undefined') {\r\n\t\t\tcontinueStep = this.beforeStepChangeCallback(this, nextStep, true, previousStep);\r\n\t\t}\r\n\r\n\t\tif (continueStep === -1) {\r\n\t\t\t++this._currentStep;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse if (continueStep === 0) {\r\n\t\t\tthis.previousStep();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.showStepItem(nextStep, false, true);\r\n\t}\r\n\r\n\r\n\r\n\r\n\thideOverlay = () => {\r\n\t\tthis.hideLayers(true, false, this.overlayLayer, this.overlayContainer);\r\n\t}\r\n\r\n\tshowOverlay = () => {\r\n\t\tshowElement(this.overlayLayer, false);\r\n\t\tshowElement(this.overlayContainer, 1);\r\n\t}\r\n\r\n\tbringOverlayAboveIntroLayers = (cb) => {\r\n\r\n\t\tlet overlayLayerBelow = null;\r\n\t\tconst overlayContainerBelow = $(this.overlayContainer).clone().addClass(LAYER_CLASSES.hidden).get(0);\r\n\t\tif (overlayContainerBelow) {\r\n\t\t\toverlayLayerBelow = $(overlayContainerBelow).children('.' + LAYER_CLASSES.overlay).addClass(LAYER_CLASSES.hidden).get(0);\r\n\t\t}\r\n\t\t$(overlayContainerBelow).appendTo(this.mainElement);\r\n\r\n\t\tshowElement(this.overlayLayer, this.options.overlayOpacity * 0.9);\r\n\t\tshowElement(this.overlayContainer, 1);\r\n\t\tshowElement(overlayLayerBelow, this.options.overlayOpacity * 0.7);\r\n\t\tshowElement(overlayContainerBelow, 1);\r\n\t\t$(this.overlayContainer).css('z-index', dpZIndex(7));\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tif (cb) cb();\r\n\t\t}, this.overlayContainerTransitionDelayMs);\r\n\t}\r\n\r\n\thideLayers = (byOpacity, noSpace, ...args) => {\r\n\t\tif (args.length) {\r\n\t\t\targs.forEach(layer => {\r\n\t\t\t\thideElement(layer, byOpacity, noSpace);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tshowLayers = (...args) => {\r\n\t\tif (args.length) {\r\n\t\t\targs.forEach(layer => {\r\n\t\t\t\tshowElement(layer);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thideIntroLayers(hideOverlay = false, hideWrapper = false, noSpace = false, byOpacity = true) {\r\n\t\tthis.pauseFollowTarget();\r\n\t\tthis.hideLayers(byOpacity, noSpace, this.highlightLayer, this.disableInteractionLayer, this.tooltipReferenceLayer);\r\n\t\tif (hideOverlay) this.hideOverlay();\r\n\t\t$(this.dpIntroWrapper).css('pointer-events', 'none');\r\n\t\tif (hideWrapper) hideElement(this.dpIntroWrapper, byOpacity, noSpace);\r\n\t}\r\n\r\n\tshowIntroLayers(showOverlay = false, showWrapper = true) {\r\n\t\tif (showWrapper) $(this.dpIntroWrapper).css('pointer-events', 'unset');\r\n\t\tthis.showLayers(this.highlightLayer, this.tooltipReferenceLayer, this.disableInteractionLayer, this.dpIntroWrapper);\r\n\t\tif (showOverlay && !this.hasTargetItemHiddenOverlay(this.currentTargetItem)) {\r\n\t\t\tthis.showOverlay();\r\n\t\t}\r\n\t\tthis.restoreFollowTarget();\r\n\t}\r\n\r\n\t_exitIntro(reason) {\r\n\t\tthis.exitIntro(false, false, reason);\r\n\t}\r\n\r\n\t/**\r\n\t * Exit from intro\r\n\t *\r\n\t * @api private\r\n\t * @method exitIntro\r\n\t * @param {Object} targetElement\r\n\t * @param {Boolean} force - Setting to `true` will skip the result of beforeExit callback\r\n\t */\r\n\texitIntro = (leaveActiveOverlay = false, force = false, reason = '', isRedirect = false) => {\r\n\t\tthis.ending = true;\r\n\t\tvar continueExit = true;\r\n\r\n\t\tif (this.options.leave_overlay_always) leaveActiveOverlay = true;\r\n\r\n\t\tthis.doAction(EVENTS.onBeforeEnd, { reason });\r\n\t\t// calling onbeforeexit callback\r\n\t\t// If this callback return `false`, it would halt the process\r\n\t\tif (this.onBeforeExitCallback instanceof Function) {\r\n\t\t\tcontinueExit = this.onBeforeExitCallback(this);\r\n\t\t}\r\n\r\n\r\n\t\t// skip this check if `force` parameter is `true`\r\n\t\t// otherwise, if `onbeforeexit` returned `false`, don't exit the intro\r\n\t\tif (!force && continueExit === false) return;\r\n\r\n\t\tif (this.targetDummy) {\r\n\t\t\tthis.targetDummy.parentNode.removeChild(this.targetDummy);\r\n\t\t\tthis.targetDummy = null;\r\n\t\t}\r\n\t\tthis.reInitTarget();\r\n\t\tthis.hideIntroLayers(!leaveActiveOverlay);\r\n\t\tif (leaveActiveOverlay) this.showOverlay();\r\n\r\n\t\tif (isRedirect) return;\r\n\t\tsetTimeout(() => {\r\n\r\n\t\t\t//remove disableInteractionLayer\r\n\t\t\tthis._enableInteraction(true);\r\n\t\t\t//clean listeners\r\n\t\t\tif (this._onKeyDownEventHandler)\r\n\t\t\t\t$(window).off('keydown', this._onKeyDownEventHandler);\r\n\t\t\t$(window).off('resize', this._onResize);\r\n\t\t\tthis.docResizeObserver.unobserve(document.documentElement);\r\n\t\t\tthis.docResizeObserver.unobserve(document.body);\r\n\t\t\t$(this.overlayLayer).off('click', this._onOverlayClick);\r\n\r\n\t\t\t$('html').off('scroll wheel DOMMouseScroll mousewheel touchmove', this.stopAutoScrollWhenUserAction);\r\n\t\t\t$(this.buttonPrevLayer).off('click', this.goToPreviousStep);\r\n\t\t\t$(this.buttonNextLayer).off('click', this.goToNextStep);\r\n\t\t\t$(this.buttonSkipLayer).off('click', this.onSkipButtonClick);\r\n\t\t\t//check if any callback is defined\r\n\t\t\tthis.doAction(EVENTS.ended, { reason });\r\n\r\n\t\t\t//set the step to zero\r\n\t\t\tthis._currentStep = undefined;\r\n\t\t\tthis.exitIntroFinal(leaveActiveOverlay);\r\n\r\n\r\n\t\t}, 500);\r\n\t}\r\n\r\n\texitIntroFinal() {\r\n\t\t//this.hideIntroLayers(!leaveActiveOverlay, true); //, true, false\r\n\t\t//$(this._mainElement).find('*').unbind();\r\n\t\t$(this.mainElement).empty();\r\n\t\tthis.highlightLayer = null;\r\n\t\tthis.overlayContainer = null;\r\n\t\tthis._currentStep = undefined;\r\n\t}\r\n\r\n\r\n\tisInRun() {\r\n\t\treturn $(document.documentElement).hasClass(LAYER_CLASSES.tourInRun);\r\n\t}\r\n\r\n\tisThisInRun() {\r\n\t\treturn this.isInRun() && $(this.dpIntroWrapper).hasClass(LAYER_CLASSES.tourInRun);\r\n\t}\r\n\r\n\r\n\treInitTarget = (newTarget = null) => {\r\n\t\tthis.resetTargetElement();\r\n\t\tthis._clearContrastAdjustment();\r\n\t\tif (newTarget) {\r\n\t\t\tthis.currentTargetItem = newTarget;\r\n\t\t}\r\n\t}\r\n\r\n\tsetTargetBBs(targetItem) {\r\n\r\n\t\tif (targetItem) {\r\n\t\t\tif (targetItem.element) {\r\n\t\t\t\tthis.targetPureBB = DPBoundingBox.getElBoundingBox(targetItem.element, false, targetItem.isFixedPos);\r\n\r\n\t\t\t\tlet paddingExtensionSizeBase = {\r\n\t\t\t\t\ttb: Math.ceil(this.targetPureBB.height * this.options.targetExtendPaddingPercent / 100),\r\n\t\t\t\t\tlr: Math.ceil(this.targetPureBB.width * this.options.targetExtendPaddingPercent / 100)\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.actualizeNumberBB();\r\n\r\n\t\t\t\tlet minExtensionSize = {\r\n\t\t\t\t\ttb: this.numberLayerBB ? this.numberLayerBB.height / 4 : 0,\r\n\t\t\t\t\tlr: this.numberLayerBB ? this.numberLayerBB.width / 4 : 0\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlet maxExtensionSize = {\r\n\t\t\t\t\ttb: this.numberLayerBB ? this.numberLayerBB.height / 3 : this.options.targetExtendPaddingMaxPx,\r\n\t\t\t\t\tlr: this.numberLayerBB ? this.numberLayerBB.width / 3 : this.options.targetExtendPaddingMaxPx\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.paddingExtensionSize = {\r\n\t\t\t\t\ttb: Math.max(Math.min(paddingExtensionSizeBase.tb, maxExtensionSize.tb), minExtensionSize.tb),\r\n\t\t\t\t\tlr: Math.max(Math.min(paddingExtensionSizeBase.lr, maxExtensionSize.lr), minExtensionSize.lr)\r\n\t\t\t\t};\r\n\t\t\t\t/*paddingExtensionSize = {\r\n\t\t\t\t\ttb: 0,\r\n\t\t\t\t\tlr: 0\r\n\t\t\t\t};*/\r\n\r\n\t\t\t\tthis.targetBB = DPBoundingBox.extendBB(this.targetPureBB, this.paddingExtensionSize.tb, this.paddingExtensionSize.lr);\r\n\r\n\r\n\t\t\t\tthis.actualizeBoardSizes();\r\n\t\t\t\tif (this.docBB) {\r\n\t\t\t\t\t//const highlightBorderWidth = getCssValFloat(this.highlightLayer, 'border-width', 3);\r\n\r\n\t\t\t\t\tconst intersectionBB = DPBoundingBox.intersect(this.targetBB, this.docBB);\r\n\t\t\t\t\tif (intersectionBB) this.targetBB = intersectionBB;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tthis.visualizeBB('dpit-vis-target-bb', this.targetBB, 'rgba(0, 0, 255, 0.3)', this.currentTargetItem?.isFixedPos, !this.currentTargetItem?.isFixedPos);\r\n\t\t\t\treturn this.targetBB;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\t_pauseTour = () => {\r\n\t\tthis._enableInteraction();\r\n\t\tthis.reInitTarget();\r\n\t\tthis.hideIntroLayers(true);\r\n\t}\r\n\r\n\tunsubscribeEvent(eventId, providedCallback) {\r\n\t\tthis.subscribeEvent(eventId, providedCallback, true);\r\n\t}\r\n\r\n\tsubscribeEvent(eventId, providedCallback, unsubscribe = false) {\r\n\t\tif (typeof (providedCallback) === 'function') {\r\n\t\t\tif (eventId in EVENTS) {\r\n\t\t\t\tif (unsubscribe) DpitHooks.removeAction(eventId, providedCallback);\r\n\t\t\t\telse DpitHooks.addAction(eventId, providedCallback);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthrow new Error(`Provided event name ${eventId} was not recognized. Choose from: ${EVENTS.values().join(',')}`);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error(`Provided callback for ${eventId} was not a function.`);\r\n\t\t}\r\n\t}\r\n\r\n\tsetCallback = (callbackId, providedCallback) => {\r\n\t\tif (typeof (providedCallback) === 'function' || providedCallback === null) {\r\n\t\t\tswitch (callbackId) {\r\n\t\t\t\tcase CALLBACKS.beforeStepChange: this.beforeStepChangeCallback = providedCallback; break;\r\n\t\t\t\tcase CALLBACKS.onBeforeShowStep: this.onBeforeShowStepCallback = providedCallback; break;\r\n\t\t\t\tcase CALLBACKS.onBeforeEnd: this.onBeforeExitCallback = providedCallback; break;\r\n\t\t\t\tdefault: throw new Error(`Provided callback name ${callbackId} was not recognized.`);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error(`Provided callback for ${callbackId} was not a function.`);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tactivateBullet(idx) {\r\n\t\t$(this.bulletsLayer).find('li.active').removeClass('active');\r\n\t\t$(this.bulletsLayer).find(`li[data-step-number=\"${idx}\"]`).addClass('active').attr('aria-selected', 'true');\r\n\t}\r\n\r\n\tsetNotVisibleRefBullet(idx, notVisible = true) {\r\n\t\tif (notVisible) $(this.bulletsLayer).find(`li[data-step-number=\"${idx}\"]`).addClass('not-visible-ref');\r\n\t\telse {\r\n\t\t\t$(this.bulletsLayer).find(`li[data-step-number=\"${idx}\"]`).removeClass('not-visible-ref');\r\n\t\t\tif (this.visibleLastStep && idx > this.visibleLastStep) {\r\n\t\t\t\tthis.visibleLastStep = idx;\r\n\t\t\t}\r\n\t\t\tif (this.visibleFirstStep && idx < this.visibleFirstStep) {\r\n\t\t\t\tthis.visibleFirstStep = idx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetNotVisibleStepCnt() {\r\n\t\treturn $(this.bulletsLayer).find('li.not-visible-ref').length;\r\n\t}\r\n\r\n\tcreateBullet = (step, roleLinkList = true, isActive = false, onClickCallback = null) => {\r\n\t\tvar innerLi = document.createElement('li');\r\n\t\tif (roleLinkList) {\r\n\t\t\tinnerLi.setAttribute('role', 'tab');\r\n\t\t\tinnerLi.tabIndex = 0;\r\n\t\t\tinnerLi.title = i18n('step', this.mainCfg.i18n) + ' ' + step;\r\n\t\t}\r\n\r\n\t\tif (onClickCallback) innerLi.onclick = onClickCallback;\r\n\r\n\t\tif (isActive) {\r\n\t\t\tinnerLi.className = 'active';\r\n\t\t\tinnerLi.setAttribute('aria-selected', 'true');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tinnerLi.setAttribute('aria-selected', 'false');\r\n\t\t}\r\n\r\n\t\tif (roleLinkList) {\r\n\t\t\tinnerLi.setAttribute('data-step-number', step);\r\n\t\t}\r\n\r\n\t\tvar innerNumber = document.createElement('div');\r\n\t\tinnerNumber.innerHTML = step;\r\n\t\tinnerLi.appendChild(innerNumber);\r\n\r\n\t\treturn innerLi;\r\n\t}\r\n\r\n\tcreateBullets = (className = LAYER_CLASSES.bullets, showBullets = false, roleLinkList = true, activeIdx = 0, onClickCallback = null) => {\r\n\t\tconst bulletsLayer = document.createElement('div');\r\n\t\t$(bulletsLayer).addClass(className);\r\n\r\n\t\tvar ulContainer = document.createElement('ul');\r\n\t\tif (roleLinkList) ulContainer.setAttribute('role', 'tablist');\r\n\r\n\t\tthis._forEach(this.introItems, (item, i) => {\r\n\t\t\tulContainer.appendChild(this.createBullet(item.step, roleLinkList, i === activeIdx, onClickCallback));\r\n\t\t});\r\n\t\tif (!showBullets) bulletsLayer.style.display = 'none';\r\n\t\tbulletsLayer.appendChild(ulContainer);\r\n\t\treturn bulletsLayer;\r\n\t}\r\n\r\n\tactualizeBoardSizes = (boardSizesOnly = false) => {\r\n\t\tif (!boardSizesOnly) {\r\n\t\t\tthis.docBB = getDocBB(this.mainCfg.mobile_break_points?.mobile);\r\n\t\t\tthis.winBB = getWinBB(this.mainCfg.mobile_break_points?.mobile);\r\n\t\t\tthis.isMobileSize = this.getIsMobileSize();\r\n\t\t\t//this.visualizeBB('dpit-vis-doc-bb', this.docBB, 'rgba(0,255,0,0.3)', false, true);\r\n\t\t}\r\n\t\tif (this.arrowLayer) {\r\n\t\t\tthis.arrowSizes = { width: $(this.arrowLayer).outerWidth(), height: $(this.arrowLayer).outerHeight() };\r\n\t\t}\r\n\r\n\t\tthis.maxDocBoardBB = this.getMaxBoardBB(true, this.currentTargetItem?.isFixedPos, this.targetBB, true);\r\n\t\t//this.visualizeBB('dpit-vis-max-doc-board-bb', DPBoundingBox.intersect(this.maxDocBoardBB, this.docBB), 'rgba(255,0,0,0.3)', this.currentTargetItem?.isFixedPos, true);\r\n\t\tthis.actualizeScreenArea();\r\n\t}\r\n\r\n\r\n\tactualizeScreenArea() {\r\n\t\tthis.maxScreenArea = this.getMaxBoardBB(false, this.currentTargetItem?.isFixedPos, this.targetBB, true);\r\n\t\t//if (this.options.dpDebugEn) console.log('MAX WIN BOARD:', this.maxScreenArea);\r\n\t\tthis.visualizeBB('dpit-vis-max-screen-board-bb', this.maxScreenArea, 'rgba(255,0,255,0.2)', true, this.currentTargetItem?.isFixedPos, false);\r\n\t}\r\n\r\n\thasOrientationChanged(currentWinBB, oldWinBB) {\r\n\t\treturn this.isScreenPortraitOrientation(currentWinBB) !== this.isScreenPortraitOrientation(oldWinBB);\r\n\t}\r\n\r\n\tisBigResizeChange(currentWinBB, oldWinBB, relativeThreshold = 0.4) {\r\n\t\tconst currentArea = DPBoundingBox.area(currentWinBB);\r\n\t\tconst oldArea = DPBoundingBox.area(oldWinBB);\r\n\t\treturn Math.abs(currentArea - oldArea) > relativeThreshold * currentArea;\r\n\t}\r\n\r\n\tgetResizeAction(currentWinBB, oldWinBB) {\r\n\t\tlet res = RESIZE_ACTION.soft;\r\n\t\tconst hasOrientationChanged = this.hasOrientationChanged(currentWinBB, oldWinBB);\r\n\t\tconst isBigScreenSizeChange = this.isBigResizeChange(currentWinBB, oldWinBB);\r\n\t\tif (!hasOrientationChanged && (currentWinBB.height != this.winBB.height) && !isBigScreenSizeChange) {\r\n\t\t\tif (currentWinBB.width === this.winBB.width) {\r\n\t\t\t\t// Android Chrome address bar \r\n\t\t\t\tres = RESIZE_ACTION.none;\r\n\t\t\t\tif (currentWinBB.height < this.winBB.height) {\r\n\t\t\t\t\t// Android Chrome address bar has appeared\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Android Chrome address bar has disappeared\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tres = RESIZE_ACTION.soft;\r\n\t\t\t}\r\n\r\n\t\t} else if (hasOrientationChanged || isBigScreenSizeChange) {\r\n\t\t\tres = RESIZE_ACTION.hard;\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\r\n\tresizeRefresh(sizes, introLayersHasBeenHidden) {\r\n\r\n\t\tconst resizeAction = this.getResizeAction(sizes.currentWinSize, sizes.oldWinSize);\r\n\t\tthis.winBB = { ...sizes.currentWinSize };\r\n\r\n\t\tthis.pauseFollowTarget();\r\n\t\tthis.actualizeBoardSizes();\r\n\t\t// iframe inside tooltip - fullscreen\r\n\t\tif (!(this._isIframeInTooltip && this.tooltipBB.width !== this.tooltipBBRel.width)) {\r\n\t\t\tif (this.options.dpDebugEn) console.log('Resize:', sizes, 'Action:', resizeAction);\r\n\t\t\tthis.doAction(EVENTS.onResize, sizes);\r\n\t\t\tswitch (resizeAction) {\r\n\t\t\t\tcase RESIZE_ACTION.hard: this.refresh(); break;\r\n\t\t\t\tcase RESIZE_ACTION.soft: this._actualizeTargetPositionBasic(this.currentTargetItem, false, false, true, false); break;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (introLayersHasBeenHidden) this.showIntroLayers();\r\n\t\tthis.tooltipBBRel = this.tooltipBB;\r\n\t\tthis.restoreFollowTarget();\r\n\t}\r\n\r\n\tisScreenPortraitOrientation(winBB) {\r\n\t\treturn winBB ? winBB.height > winBB.width : false;\r\n\t}\r\n\r\n\t_onResize = () => {\r\n\t\tif (this.options.resizeRefreshEn) {\r\n\t\t\tif (this._resizeTimeout) {\r\n\t\t\t\tthis.restartResizeTimeout();\r\n\t\t\t}\r\n\t\t\telse if (!this.disableOnResize) {\r\n\t\t\t\t// First resize event after non resize - active period\r\n\t\t\t\tthis.pauseFollowTarget();\r\n\t\t\t\tthis.disableOnResize = true;\r\n\t\t\t\tthis.oldWinBB = { ...this.winBB };\r\n\t\t\t\tthis.oldDocBB = { ...this.docBB };\r\n\t\t\t\tthis.restartResizeTimeout();\r\n\t\t\t\tthis.disableOnResize = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trestartResizeTimeout() {\r\n\t\tconst currentWinSize = getWinBB(this.mainCfg.mobile_break_points?.mobile);\r\n\t\tconst hasOrientationChanged = this.hasOrientationChanged(currentWinSize, this.oldWinBB);\r\n\t\tconst hideIntroLayers = hasOrientationChanged || currentWinSize.width !== this.oldWinBB.width;\r\n\t\tif (hideIntroLayers) {\r\n\t\t\tthis.hideIntroLayers();\r\n\t\t}\r\n\t\tif (this._resizeTimeout) clearTimeout(this._resizeTimeout);\r\n\t\tthis._resizeTimeout = setTimeout(() => {\r\n\r\n\t\t\tthis.resizeRefresh({\r\n\t\t\t\toldWinSize: this.oldWinBB,\r\n\t\t\t\tcurrentWinSize: getWinBB(this.mainCfg.mobile_break_points?.mobile),\r\n\t\t\t\toldSize: this.oldDocBB,\r\n\t\t\t\tcurrentSize: getDocBB(this.mainCfg.mobile_break_points?.mobile)\r\n\t\t\t}, hideIntroLayers);\r\n\t\t\tthis._resizeTimeout = null;\r\n\t\t}, 300);\r\n\t}\r\n\r\n\t_onKeyDown(e) {\r\n\t\tif (this.options.keyboardNavigation) {\r\n\t\t\tvar code = e.key ?? e.keyCode;\r\n\t\t\tlet isHideNextByCurrentStepMeta = this.isHideNextByCurrentStepMeta();\r\n\r\n\t\t\t// if code/e.which is null\r\n\t\t\tcode ??= e.charCode;\r\n\t\t\tconst isLastStep = this.introItems.length - 1 === this._currentStep;\r\n\t\t\tif ((code === 'Escape' || code === 27) && this.options.exitOnEsc === true) {\r\n\t\t\t\t//escape key pressed, exit the intro\r\n\t\t\t\t//check if exit callback is defined\r\n\t\t\t\tthis._exitIntro('skip');\r\n\t\t\t} else if (code === 'ArrowLeft' || code === 37) {\r\n\t\t\t\t//left arrow\r\n\t\t\t\tif (!this.options.hide_previous_step_button) this.previousStep();\r\n\t\t\t} else if (code === 'ArrowRight' || code === 39) {\r\n\t\t\t\t//right arrow\r\n\t\t\t\tif (!this.options.hideNextAlways && !isLastStep && !isHideNextByCurrentStepMeta) this.nextStep();\r\n\t\t\t} else if (code === 'Enter' || code === 13) {\r\n\t\t\t\t//srcElement === ie\r\n\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\tif (!this.options.hide_previous_step_button && target === this.buttonPrevLayer) {\r\n\t\t\t\t\t//user hit enter while focusing on previous button\r\n\t\t\t\t\tthis.previousStep();\r\n\t\t\t\t} else if (target === this.buttonSkipLayer) {\r\n\t\t\t\t\t//user hit enter while focusing on skip button\r\n\t\t\t\t\tthis._exitIntro('complete');\r\n\t\t\t\t} else if (target && target.getAttribute('data-step-number')) {\r\n\t\t\t\t\t// user hit enter while focusing on step bullet\r\n\t\t\t\t\ttarget.click();\r\n\t\t\t\t} else if (!this.options.hideNextAlways && !isLastStep && !isHideNextByCurrentStepMeta) {\r\n\t\t\t\t\t//default behavior for responding to enter\r\n\t\t\t\t\tthis.nextStep();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//prevent default behaviour on hitting Enter, to prevent steps being skipped in some browsers\r\n\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t} else {\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t  * makes a copy of the object\r\n\t  * @api private\r\n\t  * @method _cloneObject\r\n\t */\r\n\t_cloneObject = (object) => {\r\n\t\tif (object === null || typeof (object) !== 'object' || typeof (object.nodeType) !== 'undefined') {\r\n\t\t\treturn object;\r\n\t\t}\r\n\t\tvar temp = {};\r\n\t\tfor (var key in object) {\r\n\t\t\tif (typeof (window.jQuery) !== 'undefined' && object[key] instanceof window.jQuery) {\r\n\t\t\t\ttemp[key] = object[key];\r\n\t\t\t} else {\r\n\t\t\t\ttemp[key] = this._cloneObject(object[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn temp;\r\n\t}\r\n\r\n\tsetWinMargins = (targetBB) => {\r\n\t\tlet mobileSizeCoef = 1;\r\n\t\tif (this.isMobileSize) {\r\n\t\t\tmobileSizeCoef = 0.5;\r\n\t\t}\r\n\t\tlet res = {\r\n\t\t\tleft: this.arrowSizes.width * this.options.windowMarginCoef.x * mobileSizeCoef,\r\n\t\t\tright: this.arrowSizes.height * this.options.windowMarginCoef.x * mobileSizeCoef,\r\n\t\t\ttop: this.arrowSizes.height * this.options.windowMarginCoef.y * mobileSizeCoef,\r\n\t\t\tbottom: this.arrowSizes.height * this.options.windowMarginCoef.y * mobileSizeCoef\r\n\t\t};\r\n\t\tif (targetBB) {\r\n\t\t\tres.left = Math.min(res.left, targetBB.left);\r\n\t\t\tres.right = Math.min(res.right, this.docBB.right - targetBB.right);\r\n\t\t\tres.top = Math.min(res.top, targetBB.top);\r\n\t\t\tres.bottom = Math.min(res.bottom, this.docBB.bottom - targetBB.bottom);\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tvisualizeBB(id, bb, color = 'rgba(255,0,0,0.5)', fixed, adjustHeightByAdminBar = false) {\r\n\t\t/*\r\n\t\tconst selector = '#' + id;\r\n\t\tif (!$(selector).length) {\r\n\t\t\tconst boardEl = document.createElement('div');\r\n\t\t\tboardEl.id = id;\r\n\t\t\t//document.documentElement.append(boardEl);\r\n\t\t\tthis.dpIntroWrapper.append(boardEl);\r\n\t\t}\r\n\t\tlet adminBarHeight = $('#wpadminbar').outerHeight();\r\n\t\tif (isNaN(adminBarHeight)) adminBarHeight = 0;\r\n\t\tconst boardToVisualize = DPBoundingBox.actualizeHeightAndWidth(bb);\r\n\r\n\t\t$(selector).css({\r\n\t\t\tposition: fixed ? 'fixed' : 'absolute',\r\n\t\t\tbackgroundColor: color,\r\n\t\t\ttop: (boardToVisualize.top) - (adjustHeightByAdminBar ? adminBarHeight : 0) + 'px',\r\n\t\t\tleft: boardToVisualize.left + 'px',\r\n\t\t\twidth: boardToVisualize.width + 'px',\r\n\t\t\theight: (boardToVisualize.height ) + 'px', //(adjustHeightByAdminBar ? adminBarHeight : 0)\r\n\t\t\tpointerEvents: 'none',\r\n\t\t\t\tzIndex: 'calc(var(--dp-z-index-base) + 3)',\r\n\t\t}); */\r\n\r\n\t}\r\n\r\n\tgetMaxBoardBB = (isDocumentSize = true, isFixedPos = false, targetBB = null, includeWinMargin = true) => {\r\n\t\tthis.windowMargins = includeWinMargin ? this.setWinMargins(targetBB) : DPBoundingBox.empty();\r\n\t\t/*this.windowMargins = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0\r\n\t\t};*/\r\n\t\tlet maxROI = {\r\n\t\t\ttop: this.windowMargins.top,\r\n\t\t\tright: (isDocumentSize ? this.docBB.right : this.winBB.right) - this.windowMargins.right,\r\n\t\t\tbottom: (isDocumentSize ? this.docBB.bottom : this.winBB.bottom) - this.windowMargins.bottom,\r\n\t\t\tleft: this.windowMargins.left\r\n\t\t};\r\n\r\n\t\tif (isDocumentSize && isFixedPos) {\r\n\t\t\tmaxROI = {\r\n\t\t\t\ttop: this.windowMargins.top,\r\n\t\t\t\tright: this.winBB.width - 1 - this.windowMargins.right,\r\n\t\t\t\tbottom: this.winBB.height - 1 - this.windowMargins.bottom,\r\n\t\t\t\tleft: this.windowMargins.left\r\n\t\t\t};\r\n\t\t}\r\n\t\telse if (!isDocumentSize && this.isStickyTheme()) {\r\n\t\t\tconst stickyTooltipOffset = this._getStickyTooltipOffset();\r\n\t\t\tmaxROI.top += stickyTooltipOffset.top;\r\n\t\t\tmaxROI.bottom -= stickyTooltipOffset.bottom;\r\n\t\t}\r\n\t\treturn DPBoundingBox.actualizeHeightAndWidth(maxROI);\r\n\t}\r\n\r\n\t/**\r\n\t * Render tooltip box in the page\r\n\t *\r\n\t * @api private\r\n\t * @method placeTooltip\r\n\t * @param {HTMLElement} targetElement\r\n\t */\r\n\tplaceTooltip = (targetItem, placeTooltipIterations = 0, isCrowdedPos = {}, useLastPosition = false) => {\r\n\r\n\r\n\t\tlet tooltipCssClass = '';\r\n\t\tlet prevIterationTooltipPos = null;\r\n\t\tthis.tooltipLayer.style.marginLeft = null;\r\n\t\tthis.tooltipLayer.style.marginTop = null;\r\n\t\tthis.tooltipLayer.style.borderTopLeftRadius = null;\r\n\t\tthis.tooltipLayer.style.borderTopRightRadius = null;\r\n\t\tthis.tooltipLayer.style.borderBottomLeftRadius = null;\r\n\t\tthis.tooltipLayer.style.borderBottomRightRadius = null;\r\n\r\n\t\tif (placeTooltipIterations === 0) {\r\n\t\t\tthis.tooltipLayer.style.top = null;\r\n\t\t\tthis.tooltipLayer.style.right = null;\r\n\t\t\tthis.tooltipLayer.style.bottom = null;\r\n\t\t\tthis.tooltipLayer.style.left = null;\r\n\t\t\tthis.tooltipLayer.style.width = null;\r\n\t\t\tthis.tooltipLayer.style.height = null;\r\n\t\t\tthis.tooltipTextLayer.style.maxHeight = null;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tprevIterationTooltipPos = { ...this.tooltipPos };\r\n\t\t}\r\n\r\n\t\tif (targetItem?.hidden_meta?.ext?.build_with_wp_editor === '1') {\r\n\t\t\t$(this.tooltipTextLayer).addClass('dpit-tooltip-text--rt');\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$(this.tooltipTextLayer).removeClass('dpit-tooltip-text--rt');\r\n\t\t}\r\n\r\n\t\tif (this.options.customTextStylesEn) {\r\n\t\t\t$(this.tooltipTextLayer).addClass('dpit-tooltip-text--cs');\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$(this.tooltipTextLayer).removeClass('dpit-tooltip-text--cs');\r\n\t\t}\r\n\r\n\t\tthis.actualizeScreenArea();\r\n\t\tthis.actualizeTooltipMaxWidth();\r\n\r\n\t\t//prevent error when `this._currentStep` is undefined\r\n\t\tif (!targetItem) return;\r\n\r\n\r\n\t\t//if we have a custom css class per step\r\n\t\tif (typeof (targetItem.tooltipClass) === 'string') {\r\n\t\t\ttooltipCssClass = targetItem.tooltipClass;\r\n\t\t} else {\r\n\t\t\ttooltipCssClass = this.options.tooltipClass;\r\n\t\t}\r\n\r\n\t\tthis.tooltipLayer.className = LAYER_CLASSES.tooltip;\r\n\t\t$(this.tooltipLayer).addClass(tooltipCssClass.replace(/^\\s+|\\s+$/g, ''));\r\n\t\tif (this.options.showProgress) {\r\n\t\t\t$(this.tooltipLayer).addClass(LAYER_CLASSES.tooltip + '--with-progress-bar');\r\n\t\t}\r\n\r\n\t\t//const highlightOutlineSize = getCssValFloat(this.highlightLayer, 'outline-width', 3);\r\n\t\tconst arrowSizes = {\r\n\t\t\twidth: $(this.arrowLayer).outerWidth(),\r\n\t\t\theight: $(this.arrowLayer).outerHeight()\r\n\t\t};\r\n\t\tconst arrowHalfSizes = { width: arrowSizes.width / 2, height: arrowSizes.height / 2 };\r\n\r\n\t\tthis.tooltipBB = DPBoundingBox.getElBoundingBox(this.tooltipLayer, false, targetItem?.isFixedPos);\r\n\r\n\r\n\r\n\t\tthis.tooltipPos = useLastPosition && this.tooltipPos ? this.tooltipPos : this._determineAutoPosition(\r\n\t\t\ttargetItem,\r\n\t\t\tarrowSizes,\r\n\t\t\tisCrowdedPos\r\n\t\t);\r\n\r\n\t\tconst isLeftOrRight = ['left', 'right'].includes(this.tooltipPos.base);\r\n\r\n\r\n\r\n\t\tconst tooltipRadius = getCssValFloat(this.tooltipLayer, 'border-top-right-radius', 0);\r\n\r\n\t\tconst arrowLayerPos = {\r\n\t\t\ttop: arrowHalfSizes.height - this.options.tooltipDistanceFromTarget,\r\n\t\t\tleft: this.targetBB.width / 2 - arrowHalfSizes.width\r\n\t\t}; // top, center aligned\r\n\r\n\t\tconst tooltipLayerPos = { top: 0, left: 0 };\r\n\t\tconst desiredNumberPos = { x: 'right', y: 'top', onTooltip: false };\r\n\r\n\t\tlet isNeededNextIteration = false;\r\n\t\tthis.arrowLayer.style.display = '';\r\n\t\tif (!this.isStickyTheme()) {\r\n\t\t\tthis.arrowLayer.className = LAYER_CLASSES.arrow;\r\n\t\t\tlet arrowPos = 'top';\r\n\r\n\t\t\t//tooltipPos.base = 'right';\r\n\t\t\t//tooltipPos.align = 'top';\r\n\t\t\t// basic position\r\n\t\t\tswitch (this.tooltipPos.base) {\r\n\t\t\t\tcase 'top':\r\n\t\t\t\t\tarrowPos = 'bottom';\r\n\t\t\t\t\tdesiredNumberPos.y = 'bottom';\r\n\t\t\t\t\ttooltipLayerPos.top = - this.tooltipBB.height - arrowHalfSizes.height - this.options.tooltipDistanceFromTarget;\r\n\t\t\t\t\tarrowLayerPos.top = - arrowHalfSizes.height - 1 - this.options.tooltipDistanceFromTarget;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'right':\r\n\t\t\t\t\tdesiredNumberPos.x = 'left';\r\n\t\t\t\t\tarrowPos = 'left';\r\n\t\t\t\t\ttooltipLayerPos.left = (this.targetBB.width - 1 + arrowHalfSizes.width + this.options.tooltipDistanceFromTarget);\r\n\t\t\t\t\tif (placeTooltipIterations === 0) this.tooltipLayer.style.width = this.tooltipPos.width + 'px';\r\n\t\t\t\t\tarrowLayerPos.left = this.targetBB.width - arrowHalfSizes.width + this.options.tooltipDistanceFromTarget;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'bottom':\r\n\t\t\t\t\tarrowPos = 'top';\r\n\t\t\t\t\tdesiredNumberPos.y = 'top';\r\n\t\t\t\t\ttooltipLayerPos.top = (this.targetBB.height - 1 + arrowHalfSizes.height + this.options.tooltipDistanceFromTarget);\r\n\t\t\t\t\tarrowLayerPos.top = this.targetBB.height + this.options.tooltipDistanceFromTarget - arrowHalfSizes.height;\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'left':\r\n\t\t\t\t\tarrowPos = 'right';\r\n\t\t\t\t\tdesiredNumberPos.x = 'right';\r\n\t\t\t\t\ttooltipLayerPos.left = (- arrowHalfSizes.width - this.tooltipPos.width - this.options.tooltipDistanceFromTarget);\r\n\t\t\t\t\tif (placeTooltipIterations === 0) this.tooltipLayer.style.width = this.tooltipPos.width + 'px';\r\n\t\t\t\t\tarrowLayerPos.left = tooltipLayerPos.left + this.tooltipPos.width - 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'center':\r\n\t\t\t\t\tthis.arrowLayer.style.display = 'none';\r\n\t\t\t\t\tdesiredNumberPos.onTooltip = true;\r\n\t\t\t\t\tdesiredNumberPos.x = 'right';\r\n\t\t\t\t\tdesiredNumberPos.y = 'top';\r\n\t\t\t\t\ttooltipLayerPos.left = (this.targetBB.width - this.tooltipBB.width) / 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tlet arrowVsTargetAddCoef = 0;\r\n\t\t\tif (this.tooltipPos.base !== 'center') {\r\n\t\t\t\tif (isLeftOrRight) {\r\n\t\t\t\t\tarrowLayerPos.top = this.targetBB.height / 2 - arrowHalfSizes.height;\r\n\t\t\t\t\tif (arrowSizes.height > this.targetBB.height) {\r\n\t\t\t\t\t\tarrowVsTargetAddCoef = arrowSizes.height - this.targetBB.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tarrowLayerPos.left = this.targetBB.width / 2 - arrowHalfSizes.width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst reversedBasePos = getReverseBasePos(this.tooltipPos.base);\r\n\t\t\t// align\r\n\t\t\tswitch (this.tooltipPos.align) {\r\n\t\t\t\tcase 'left':\r\n\t\t\t\t\tdesiredNumberPos.x = 'right';\r\n\t\t\t\t\tif (this.tooltipPos.base != 'center' && tooltipRadius > 0) {\r\n\t\t\t\t\t\tif (arrowLayerPos.left < tooltipLayerPos.left + tooltipRadius) {\r\n\t\t\t\t\t\t\tthis.tooltipLayer.style[`border-${reversedBasePos}-left-radius`] = (Math.max(Math.min(arrowLayerPos.left - tooltipLayerPos.left, tooltipRadius), 0)) + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'center':\r\n\t\t\t\t\tdesiredNumberPos.x = 'right';\r\n\t\t\t\t\ttooltipLayerPos.left = (this.targetBB.width - this.tooltipBB.width) / 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'right': {\r\n\t\t\t\t\tdesiredNumberPos.x = 'left';\r\n\t\t\t\t\ttooltipLayerPos.left = this.targetBB.width - this.tooltipBB.width;\r\n\t\t\t\t\tif (this.tooltipPos.base != 'center' && tooltipRadius > 0) {\r\n\t\t\t\t\t\tconst tooltipRight = tooltipLayerPos.left + this.tooltipBB.width - 1;\r\n\t\t\t\t\t\tconst arrowRight = arrowLayerPos.left + arrowSizes.width - 1;\r\n\t\t\t\t\t\tif (arrowRight > tooltipRight - tooltipRadius) {\r\n\t\t\t\t\t\t\tthis.tooltipLayer.style[`border-${reversedBasePos}-right-radius`] = (Math.max(Math.min(tooltipRight - arrowRight, tooltipRadius), 0)) + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase 'top':\r\n\t\t\t\t\tdesiredNumberPos.y = 'bottom';\r\n\t\t\t\t\ttooltipLayerPos.top = 0;\r\n\t\t\t\t\tif (this.targetBB.height > (this.tooltipBB.height / 1.8)) {\r\n\t\t\t\t\t\tarrowLayerPos.top = this.tooltipBB.height / 2 - arrowHalfSizes.height - arrowVsTargetAddCoef;\r\n\t\t\t\t\t\tthis.tooltipPos.align = 'middle';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.tooltipPos.base === 'center') {\r\n\t\t\t\t\t\ttooltipLayerPos.top = this.options.centerTopBottomPosOffset;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (tooltipRadius > 0) {\r\n\t\t\t\t\t\tif (arrowLayerPos.top < tooltipLayerPos.top + tooltipRadius) {\r\n\t\t\t\t\t\t\tthis.tooltipLayer.style[`border-top-${reversedBasePos}-radius`] = (Math.max(Math.min(arrowLayerPos.top - tooltipLayerPos.top, tooltipRadius), 0)) + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'middle':\r\n\t\t\t\t\tdesiredNumberPos.y = 'top';\r\n\t\t\t\t\ttooltipLayerPos.top = (this.targetBB.height - this.tooltipBB.height) / 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'bottom': {\r\n\t\t\t\t\tdesiredNumberPos.y = 'top';\r\n\t\t\t\t\ttooltipLayerPos.top = this.targetBB.height - this.tooltipBB.height + arrowVsTargetAddCoef;\r\n\t\t\t\t\tif (this.targetBB.height > this.tooltipBB.height / 1.8) {\r\n\t\t\t\t\t\tarrowLayerPos.top = this.targetBB.height - this.tooltipBB.height / 2 - arrowHalfSizes.height;\r\n\t\t\t\t\t\tthis.tooltipPos.align = 'middle';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.tooltipPos.base != 'center' && tooltipRadius > 0) {\r\n\t\t\t\t\t\tconst tooltipBottom = tooltipLayerPos.top + this.tooltipBB.height - 1;\r\n\t\t\t\t\t\tconst arrowBottom = arrowLayerPos.top + arrowSizes.height - 1;\r\n\t\t\t\t\t\tif (arrowBottom > tooltipBottom - tooltipRadius) {\r\n\t\t\t\t\t\t\tthis.tooltipLayer.style[`border-bottom-${reversedBasePos}-radius`] = (Math.max(Math.min(tooltipBottom - arrowBottom, tooltipRadius), 0)) + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t/*tooltipLayerPos.left -= (2 * highlightOutlineSize);\r\n\t\t\ttooltipLayerPos.top -= (2 * highlightOutlineSize);\r\n\t\t\tarrowLayerPos.left -= (2 * highlightOutlineSize);\r\n\t\t\tarrowLayerPos.top -= (2 * highlightOutlineSize);*/\r\n\r\n\t\t\tthis.tooltipLayer.style.left = tooltipLayerPos.left + 'px';\r\n\t\t\tthis.tooltipLayer.style.top = tooltipLayerPos.top + 'px';\r\n\t\t\tif (this.tooltipPos.base) $(this.tooltipLayer).addClass(`${LAYER_CLASSES.tooltip}--${this.tooltipPos.base}`);\r\n\t\t\tif (this.tooltipPos.align) $(this.tooltipLayer).addClass(`${LAYER_CLASSES.tooltip}--${this.tooltipPos.align}-aligned`);\r\n\t\t\tthis.tooltipBB = DPBoundingBox.getElBoundingBox(this.tooltipLayer, false, targetItem?.isFixedPos);\r\n\r\n\r\n\t\t\tthis.arrowLayer.style.left = arrowLayerPos.left + 'px';\r\n\t\t\tthis.arrowLayer.style.top = arrowLayerPos.top + 'px';\r\n\t\t\t$(this.arrowLayer).addClass(`${LAYER_CLASSES.arrow}--${arrowPos}`);\r\n\t\t\t$(this.arrowLayer).addClass(`${LAYER_CLASSES.arrow}--${this.tooltipPos.align}-aligned`);\r\n\r\n\t\t\tif (['top', 'bottom'].includes(this.tooltipPos.base)) {\r\n\r\n\t\t\t\tlet diff = 0;\r\n\t\t\t\tlet isOverLeft = this.tooltipBB.left < this.maxDocBoardBB.left;\r\n\t\t\t\tlet isOverRight = this.tooltipBB.right > this.maxDocBoardBB.right;\r\n\r\n\t\t\t\tif (isOverLeft /*&& this.targetBB.left > this.maxDocBoardBB.left*/) {\r\n\t\t\t\t\tdiff = Math.abs(this.maxDocBoardBB.left - this.tooltipBB.left);\r\n\t\t\t\t\tif (this.options.dpDebugEn) console.log('adjusting top bottom position: isOverLeft');\r\n\t\t\t\t\t$(this.tooltipLayer).offset({ left: this.maxDocBoardBB.left });\r\n\t\t\t\t\tthis.tooltipBB = DPBoundingBox.getElBoundingBox(this.tooltipLayer, false, targetItem?.isFixedPos);\r\n\t\t\t\t\tisOverRight = this.tooltipBB.right > this.maxDocBoardBB.right;\r\n\t\t\t\t\tif (isOverRight) {\r\n\t\t\t\t\t\tthis.tooltipLayer.style.width = (this.tooltipBB.width - (2 * diff)) + 'px';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (isOverRight/* && this.targetBB.right < this.maxDocBoardBB.right*/) {\r\n\t\t\t\t\tif (this.options.dpDebugEn) console.log('adjusting top bottom position: isOverRight');\r\n\t\t\t\t\tconst newLeft = this.maxDocBoardBB.right - this.tooltipBB.width;\r\n\t\t\t\t\tdiff = Math.abs(newLeft - this.tooltipBB.left);\r\n\t\t\t\t\t$(this.tooltipLayer).offset({ left: newLeft });\r\n\t\t\t\t\tthis.tooltipBB = DPBoundingBox.getElBoundingBox(this.tooltipLayer, false, targetItem?.isFixedPos);\r\n\t\t\t\t\tisOverLeft = this.tooltipBB.left < this.maxDocBoardBB.left;\r\n\t\t\t\t\tif (isOverLeft) {\r\n\t\t\t\t\t\tthis.tooltipLayer.style.width = (this.tooltipBB.width - (2 * diff)) + 'px';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (\r\n\t\t\t\tthis.options.goldenRatioPosAlgEn\r\n\t\t\t\t&& placeTooltipIterations < 3\r\n\t\t\t\t&& !(placeTooltipIterations > 0 && prevIterationTooltipPos.base === this.tooltipPos.base && prevIterationTooltipPos.align === this.tooltipPos.align)\r\n\t\t\t) {\r\n\t\t\t\tlet basePositions = ['left', 'right', 'bottom', 'top'].filter(val => !isCrowdedPos[val]);\r\n\t\t\t\tif (basePositions.includes(this.tooltipPos.base)) {\r\n\t\t\t\t\tconst goldenRatioPosAlgRes = goldenRatioPosAlg(\r\n\t\t\t\t\t\tthis.targetBB,\r\n\t\t\t\t\t\tthis.tooltipBB,\r\n\t\t\t\t\t\tthis.tooltipLayer,\r\n\t\t\t\t\t\tthis.tooltipPos,\r\n\t\t\t\t\t\tthis.maxScreenArea,\r\n\t\t\t\t\t\tthis.maxDocBoardBB,\r\n\t\t\t\t\t\ttargetItem?.isFixedPos,\r\n\t\t\t\t\t\tthis.options.dpDebugEn\r\n\t\t\t\t\t);\r\n\t\t\t\t\tisNeededNextIteration = goldenRatioPosAlgRes.wasPosAdjusted;\r\n\t\t\t\t\tthis.tooltipBB = { ...goldenRatioPosAlgRes.tooltipBB };\r\n\t\t\t\t\tif (goldenRatioPosAlgRes.isOverHeight) isCrowdedPos[this.tooltipPos.base] = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif (!isCrowdedPos[this.tooltipPos.base]) {\r\n\t\t\t\tconst adjustIsCrowdedPos = this.adjustFixedPositionsOutOfWindow(targetItem);\r\n\t\t\t\tif (adjustIsCrowdedPos) {\r\n\t\t\t\t\tisNeededNextIteration = true;\r\n\t\t\t\t\tisCrowdedPos[this.tooltipPos.base] = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// fixed bottom/top banner tooltip\r\n\t\t\tconst stickyTooltipHeight = this._getStickyTooltipOffset();\r\n\t\t\tlet shouldActualizeScreenArea = false;\r\n\t\t\tif (this.targetBB.top + this.targetBB.height > this.maxDocBoardBB.bottom - stickyTooltipHeight.bottom && !targetItem.isDummyElement) {\r\n\t\t\t\tif (!$(this.tooltipLayer).hasClass(`${LAYER_CLASSES.tooltip}--on-top`)) shouldActualizeScreenArea = true;\r\n\t\t\t\t$(this.tooltipLayer).addClass(`${LAYER_CLASSES.tooltip}--on-top`);\r\n\t\t\t\t$(this.mainElement).addClass(`${LAYER_CLASSES.main}--on-top`);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif ($(this.tooltipLayer).hasClass(`${LAYER_CLASSES.tooltip}--on-top`)) shouldActualizeScreenArea = true;\r\n\t\t\t\t$(this.tooltipLayer).removeClass(`${LAYER_CLASSES.tooltip}--on-top`);\r\n\t\t\t\t$(this.mainElement).removeClass(`${LAYER_CLASSES.main}--on-top`);\r\n\t\t\t}\r\n\t\t\tif (shouldActualizeScreenArea) this.actualizeScreenArea();\r\n\r\n\t\t\tthis.isTargetElementInsideMaxScreenArea = this.isElementInsideMaxScreenArea(this.currentTargetItem?.element);\r\n\t\t\tif (!this.isTargetElementInsideMaxScreenArea) {\r\n\t\t\t\tdesiredNumberPos.onTooltip = true;\r\n\t\t\t\tdesiredNumberPos.x = 'left';\r\n\t\t\t\tdesiredNumberPos.y = 'top';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (isNeededNextIteration && placeTooltipIterations < 2) {\r\n\t\t\tif (this.options.dpDebugEn && placeTooltipIterations > 0) console.log('fullIterations', placeTooltipIterations);\r\n\t\t\tthis.placeTooltip(targetItem, ++placeTooltipIterations, isCrowdedPos);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.options.showStepNumbers) {\r\n\t\t\t\tlet scrollToPos = this._getScrollOffset(targetItem, true);\r\n\t\t\t\tconst scrollToPosNotNull = {\r\n\t\t\t\t\tx: scrollToPos.x !== null ? scrollToPos.x : $(window).scrollLeft(),\r\n\t\t\t\t\ty: scrollToPos.y !== null ? scrollToPos.y : $(window).scrollTop(),\r\n\t\t\t\t};\r\n\t\t\t\t//const scrollToPosNotNull = scrollToPos ? scrollToPos : { x: $(window).scrollLeft(), y: $(window).scrollTop() };\r\n\t\t\t\tthis._placeNumberLayer(this.targetBB, scrollToPosNotNull, this.tooltipPos, desiredNumberPos);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tactualizeNumberBB() {\r\n\t\tif (this.numberLayer) {\r\n\t\t\t//const numberOutlineSize = getCssValFloat(this.numberLayer, 'outline-width', 2);\r\n\t\t\tthis.numberLayerBB = DPBoundingBox.getElBoundingBox(this.numberLayer, false, this.currentTargetItem?.isFixedPos);\r\n\t\t}\r\n\t}\r\n\r\n\t_placeNumberLayer = (targetBB, scrollToPos, tooltipPos, desiredPosition = { x: 'right', y: 'top', onTooltip: false }) => {\r\n\t\tthis.dpIntroWrapper.style.setProperty('--num-size-coef', '');\r\n\t\t$(this.numberLayer).removeClass(LAYER_CLASSES.gelatinePulse);\r\n\t\t$(this.numberLayer).removeClass(LAYER_CLASSES.hidden + ' dpit-fixed');\r\n\t\t$(this.numberLayer).css('width', '');\r\n\t\t$(this.numberLayer).css('height', '');\r\n\t\tif (desiredPosition.onTooltip) {\r\n\t\t\t$(this.numberLayer).addClass(LAYER_CLASSES.numberOnTooltip);\r\n\t\t\t$(this.tooltipLayer).addClass(LAYER_CLASSES.tooltipWithNumber);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$(this.numberLayer).removeClass(LAYER_CLASSES.numberOnTooltip);\r\n\t\t\t$(this.tooltipLayer).removeClass(LAYER_CLASSES.tooltipWithNumber);\r\n\t\t}\r\n\r\n\r\n\t\tthis.actualizeNumberBB();\r\n\r\n\t\tconst numberLayerHalfSize = { width: this.numberLayerBB.width / 2, height: this.numberLayerBB.height / 2 };\r\n\r\n\t\tlet layerNumberDest = this.highlightLayer;\r\n\t\tlet bbNumberDest = targetBB;\r\n\t\tlet bbOther = this.tooltipBB;\r\n\t\tif (desiredPosition.onTooltip) {\r\n\t\t\tbbNumberDest = this.tooltipBB;\r\n\t\t\tbbOther = targetBB;\r\n\t\t\tlayerNumberDest = this.tooltipLayer;\r\n\t\t}\r\n\r\n\t\t//adjust distance of number and target ... higher dist for small targets\r\n\t\tconst numberSizeCoef = { x: numberLayerHalfSize.width / bbNumberDest.width, y: numberLayerHalfSize.height / bbNumberDest.height };\r\n\t\tlet numberPosCoef = 1;\r\n\t\tconst threshold = 0.25;\r\n\t\tlet numberSizeCoefCssVar = 1;\r\n\t\tlet disableIndentation = false;\r\n\t\tif (numberSizeCoef.x > threshold || numberSizeCoef.y > threshold) {\r\n\t\t\tdisableIndentation = true;\r\n\t\t\tconst numberPosFeatures = { x: 1 - (numberSizeCoef.x - threshold), y: 1 - (numberSizeCoef.y - threshold) };\r\n\t\t\tnumberPosCoef = Math.min(numberPosFeatures.x, numberPosFeatures.y);\r\n\t\t\tif (this.options.dpDebugEn) console.log('Adjusting number pos because small ref/tooltip. Coef: ', numberPosCoef, 'Features: ', numberPosFeatures);\r\n\t\t\tnumberSizeCoefCssVar = Math.min(Math.max(1.7 * numberPosCoef, 0.8), 1);\r\n\t\t\tthis.dpIntroWrapper.style.setProperty('--num-size-coef', numberSizeCoefCssVar);\r\n\t\t\tthis.actualizeNumberBB();\r\n\t\t}\r\n\r\n\t\tconst layerNumberDestRadius = getCssValFloat(layerNumberDest, 'border-top-left-radius', 2);\r\n\t\tconst indention = layerNumberDestRadius + numberLayerHalfSize.width / 3;\r\n\r\n\t\tconst possiblePositionsLT = {\r\n\t\t\tleft: bbNumberDest.left - this.numberLayerBB.width + numberPosCoef * numberLayerHalfSize.width,\r\n\t\t\tright: bbNumberDest.right - 1 - numberPosCoef * numberLayerHalfSize.width,\r\n\t\t\ttop: bbNumberDest.top - this.numberLayerBB.height + numberPosCoef * numberLayerHalfSize.height,\r\n\t\t\tbottom: bbNumberDest.bottom - 1 - numberPosCoef * numberLayerHalfSize.height,\r\n\r\n\t\t\tleftIndented: bbNumberDest.left + indention,\r\n\t\t\trightIndented: bbNumberDest.right - 1 - this.numberLayerBB.width - indention,\r\n\t\t\ttopIndented: bbNumberDest.top + indention,\r\n\t\t\tbottomIndented: bbNumberDest.bottom - 1 - this.numberLayerBB.height - indention,\r\n\t\t};\r\n\r\n\t\tlet isInWindow = {\r\n\t\t\tleft: possiblePositionsLT.left >= scrollToPos.x && possiblePositionsLT.left >= this.winBB.left,\r\n\t\t\tright: possiblePositionsLT.right + this.numberLayerBB.width <= scrollToPos.x + this.winBB.width - 1 && (possiblePositionsLT.right + this.numberLayerBB.width) <= this.docBB.right,\r\n\t\t\ttop: possiblePositionsLT.top >= scrollToPos.y && possiblePositionsLT.top >= this.winBB.top,\r\n\t\t\tbottom: possiblePositionsLT.bottom + this.numberLayerBB.height <= scrollToPos.y + this.winBB.height - 1 && (possiblePositionsLT.bottom + this.numberLayerBB.height) <= this.docBB.bottom,\r\n\t\t};\r\n\r\n\t\tisInWindow = {\r\n\t\t\t...isInWindow,\r\n\t\t\tleftIndented: !disableIndentation && possiblePositionsLT.leftIndented <= bbNumberDest.right - indention\r\n\t\t\t\t&& possiblePositionsLT.leftIndented >= scrollToPos.x && possiblePositionsLT.leftIndented >= this.winBB.left,\r\n\t\t\trightIndented: !disableIndentation && possiblePositionsLT.rightIndented + this.numberLayerBB.width >= bbNumberDest.left + indention\r\n\t\t\t\t&& possiblePositionsLT.rightIndented + this.numberLayerBB.width <= scrollToPos.x + this.winBB.width - 1 && possiblePositionsLT.rightIndented <= this.docBB.right,\r\n\t\t\ttopIndented: !disableIndentation && possiblePositionsLT.topIndented <= bbNumberDest.bottom - indention\r\n\t\t\t\t&& possiblePositionsLT.topIndented >= scrollToPos.y && possiblePositionsLT.topIndented >= this.winBB.top,\r\n\t\t\tbottomIndented: !disableIndentation && possiblePositionsLT.bottomIndented + this.numberLayerBB.height >= bbNumberDest.top + indention\r\n\t\t\t\t&& possiblePositionsLT.bottomIndented + this.numberLayerBB.height <= scrollToPos.y + this.winBB.height - 1 && possiblePositionsLT.bottomIndented <= this.docBB.bottom,\r\n\t\t};\r\n\r\n\t\tconst allowedPositionKeys = Object.keys(possiblePositionsLT).filter((position) => {\r\n\t\t\treturn isInWindow[position];\r\n\t\t});\r\n\r\n\r\n\r\n\t\tlet allowedPositionsTL = [];\r\n\t\t['top', 'topIndented', 'bottom', 'bottomIndented'].forEach((posY) => {\r\n\t\t\tif (allowedPositionKeys.includes(posY)) {\r\n\t\t\t\t['left', 'leftIndented', 'right', 'rightIndented'].forEach((posX) => {\r\n\t\t\t\t\tif (allowedPositionKeys.includes(posX)) {\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet score = 0;\r\n\t\t\t\t\t\t\tconst numberPositionType = { x: posX, y: posY };\r\n\t\t\t\t\t\t\tconst isNumberCloseToTooltip = this.isNumberCloseToTooltip(numberPositionType, tooltipPos.base, desiredPosition.onTooltip);\r\n\r\n\t\t\t\t\t\t\tif (!desiredPosition.onTooltip) {\r\n\t\t\t\t\t\t\t\tif (desiredPosition.x === posX) score++;\r\n\t\t\t\t\t\t\t\tif (desiredPosition.y === posY) score++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (posX.endsWith('Indented')) score--;\r\n\t\t\t\t\t\t\tif (posY.endsWith('Indented')) score--;\r\n\t\t\t\t\t\t\tif (isNumberCloseToTooltip) score--;\r\n\r\n\t\t\t\t\t\t\tallowedPositionsTL.push({\r\n\t\t\t\t\t\t\t\ttype: numberPositionType,\r\n\t\t\t\t\t\t\t\tleft: possiblePositionsLT[posX],\r\n\t\t\t\t\t\t\t\ttop: possiblePositionsLT[posY],\r\n\t\t\t\t\t\t\t\tscore: score,\r\n\t\t\t\t\t\t\t\tisNumberCloseToTooltip: isNumberCloseToTooltip\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tallowedPositionsTL.sort((a, b) => {\r\n\t\t\treturn b.score - a.score;\r\n\t\t});\r\n\r\n\r\n\t\tlet finalPositions = [];\r\n\t\tif (tooltipPos.base !== 'center') {\r\n\t\t\tallowedPositionsTL.forEach(posTL => {\r\n\t\t\t\tconst posBB = DPBoundingBox.actualizeBottomAndRight({ ...posTL, width: this.numberLayerBB.width, height: this.numberLayerBB.height });\r\n\t\t\t\tconst intersection = DPBoundingBox.intersect(bbOther, posBB);\r\n\t\t\t\tif (!intersection) {\r\n\t\t\t\t\tfinalPositions.push({ ...posTL });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfinalPositions = allowedPositionsTL;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tif (finalPositions.length) {\r\n\r\n\t\t\tif (this.currentTargetItem?.isFixedPos && desiredPosition.onTooltip) {\r\n\t\t\t\tfinalPositions[0].top += $(window).scrollTop();\r\n\t\t\t\tfinalPositions[0].left += $(window).scrollLeft();\r\n\t\t\t}\r\n\r\n\t\t\tif (numberSizeCoefCssVar >= 1 && finalPositions[0].isNumberCloseToTooltip) {\r\n\t\t\t\tnumberSizeCoefCssVar = 0.95;\r\n\t\t\t\tif (this.options.dpDebugEn) console.log('Number is close to tooltip');\r\n\t\t\t\tthis.dpIntroWrapper.style.setProperty('--num-size-coef', numberSizeCoefCssVar);\r\n\t\t\t}\r\n\r\n\t\t\tif (desiredPosition.onTooltip) {\r\n\t\t\t\t$(this.numberLayer).addClass(LAYER_CLASSES.numberOnTooltip);\r\n\t\t\t\t$(this.tooltipLayer).addClass(LAYER_CLASSES.tooltipWithNumber);\r\n\t\t\t\tif (this.isStickyTheme()) {\r\n\t\t\t\t\tthis._placeNumberLayerOnTooltipInFixedBottomTheme(numberLayerHalfSize);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$(this.numberLayer).offset({ top: finalPositions[0].top, left: finalPositions[0].left });\r\n\t\t}\r\n\t\telse if (!desiredPosition.onTooltip) {\r\n\t\t\tif (!this.isStickyTheme()) this._placeNumberLayer(targetBB, scrollToPos, tooltipPos, { ...desiredPosition, onTooltip: true });\r\n\t\t\telse this._placeNumberLayerOnTooltipInFixedBottomTheme(numberLayerHalfSize);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$(this.numberLayer).addClass(LAYER_CLASSES.hidden);\r\n\t\t}\r\n\t}\r\n\r\n\t_placeNumberLayerOnTooltipInFixedBottomTheme(numberLayerHalfSize) {\r\n\t\t$(this.numberLayer).addClass(LAYER_CLASSES.numberOnTooltip);\r\n\t\t$(this.tooltipLayer).addClass(LAYER_CLASSES.tooltipWithNumber);\r\n\t\t$(this.numberLayer).css({\r\n\t\t\ttop: ($(this.tooltipLayer).position()?.top\r\n\t\t\t\t+ $(this.tooltipTextLayer).position()?.top\r\n\t\t\t\t+ getCssValFloat(this.tooltipTextLayer, 'padding-top', '5')) + 'px',\r\n\t\t\tleft: (0.5 * numberLayerHalfSize.width) + 'px'\r\n\t\t});\r\n\t}\r\n\r\n\tisNumberCloseToTooltip(numberPositionType, tooltipPosBase, isOnTooltip) {\r\n\t\tif (!this.isStickyTheme()) {\r\n\t\t\tconst _tooltipPosBase = isOnTooltip ? getReverseBasePos(tooltipPosBase) : tooltipPosBase;\r\n\t\t\tif (_tooltipPosBase === numberPositionType.x) {\r\n\t\t\t\tif (isOnTooltip) {\r\n\t\t\t\t\tif (this.tooltipBB.top + this.numberLayerBB.height > this.targetBB.top) return true;\r\n\t\t\t\t\telse if (this.tooltipBB.bottom - this.numberLayerBB.height < this.targetBB.bottom) return true;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (this.tooltipBB.top - this.numberLayerBB.height < this.targetBB.top) return true;\r\n\t\t\t\t\telse if (this.tooltipBB.bottom + this.numberLayerBB.height > this.targetBB.bottom) return true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (_tooltipPosBase === numberPositionType.y) {\r\n\t\t\t\tif (isOnTooltip) {\r\n\t\t\t\t\tif (this.tooltipBB.left + this.numberLayerBB.width > this.targetBB.left) return true;\r\n\t\t\t\t\telse if (this.tooltipBB.right - this.numberLayerBB.width < this.targetBB.right) return true;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (this.tooltipBB.left - this.numberLayerBB.width < this.targetBB.left) return true;\r\n\t\t\t\t\telse if (this.tooltipBB.right + this.numberLayerBB.width > this.targetBB.right) return true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tadjustFixedPositionsOutOfWindow(targetItem) {\r\n\t\t// check fixed positions out of window\r\n\t\tif (targetItem?.isFixedPos) {\r\n\t\t\tif (this.tooltipBB.bottom > this.maxScreenArea.bottom) {\r\n\t\t\t\tconst maxHeightBkp = this.tooltipTextLayer.style.maxHeight;\r\n\t\t\t\tconst tooltipTextHeight = $(this.tooltipTextLayer).height();\r\n\t\t\t\tconst textLayerMaxHeight = Math.max(tooltipTextHeight - (this.tooltipBB.bottom - this.maxScreenArea.bottom), 50);\r\n\t\t\t\tthis.tooltipTextLayer.style.maxHeight = textLayerMaxHeight + 'px';\r\n\t\t\t\tthis.tooltipBB = DPBoundingBox.getElBoundingBox(this.tooltipLayer, false, targetItem?.isFixedPos);\r\n\t\t\t\tconst isCrowdedPos = this.tooltipBB.bottom > this.maxScreenArea.bottom;\r\n\t\t\t\tif (isCrowdedPos) this.tooltipTextLayer.style.maxHeight = maxHeightBkp;\r\n\t\t\t\treturn isCrowdedPos;\r\n\t\t\t} else if (this.tooltipBB.top < this.maxScreenArea.top) {\r\n\t\t\t\tconst maxHeightBkp = this.tooltipTextLayer.style.maxHeight;\r\n\t\t\t\tconst topOffsetBkp = $(this.tooltipLayer).offset().top;\r\n\t\t\t\tconst tooltipTextHeight = $(this.tooltipTextLayer).height();\r\n\t\t\t\tconst textLayerMaxHeight = Math.max(tooltipTextHeight - (this.maxScreenArea.top - this.tooltipBB.top), 50);\r\n\t\t\t\tthis.tooltipTextLayer.style.maxHeight = textLayerMaxHeight + 'px';\r\n\t\t\t\t$(this.tooltipLayer).offset({ top: $(this.tooltipLayer).offset().top + tooltipTextHeight - textLayerMaxHeight });\r\n\t\t\t\tthis.tooltipBB = DPBoundingBox.getElBoundingBox(this.tooltipLayer, false, targetItem?.isFixedPos);\r\n\t\t\t\tconst isCrowdedPos = this.tooltipBB.top < this.maxScreenArea.top;\r\n\t\t\t\tif (isCrowdedPos) {\r\n\t\t\t\t\tthis.tooltipTextLayer.style.maxHeight = maxHeightBkp;\r\n\t\t\t\t\t$(this.tooltipLayer).offset({ top: topOffsetBkp });\r\n\t\t\t\t}\r\n\t\t\t\treturn isCrowdedPos;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetMinimalTooltipWidth() {\r\n\t\tconst minWidth = $(this.buttonSkipLayer).outerWidth()\r\n\t\t\t+ $(this.buttonPrevLayer).outerWidth()\r\n\t\t\t+ $(this.buttonNextLayer).outerWidth()\r\n\t\t\t+ getCssValFloat(this.tooltipLayer, 'padding-left', 20) * 2 + 20;\r\n\t\treturn isNaN(minWidth) ? 300 /* Default 300px*/ : minWidth;\r\n\t}\r\n\r\n\t/**\r\n\t * Determines the position of the tooltip based on the position precedence and availability\r\n\t * of screen space.\r\n\t *\r\n\t */\r\n\t_determineAutoPosition = (targetItem, arrowSizes, isCrowdedPos) => {\r\n\t\tlet calculatedPosition = { base: 'bottom', align: 'middle', width: this.tooltipBB.width };\r\n\t\tlet desiredTooltipPosition = targetItem.position;\r\n\t\tif (targetItem.isDummyElement) {\r\n\t\t\tcalculatedPosition.base = 'center';\r\n\t\t\tif (this.winBB.width < 600) calculatedPosition.align = 'top';\r\n\t\t\telse calculatedPosition.align = 'middle';\r\n\t\t\treturn calculatedPosition;\r\n\t\t}\r\n\r\n\t\tif (isCrowdedPos[desiredTooltipPosition]) {\r\n\t\t\tdesiredTooltipPosition = getReverseBasePos(desiredTooltipPosition);\r\n\t\t}\r\n\r\n\t\tconst possiblePositionsScoreInc = {};\r\n\t\tthis.options.positionPrecedence.forEach((position) => {\r\n\t\t\tpossiblePositionsScoreInc[position] = {\r\n\t\t\t\tscore: 0,\r\n\t\t\t\tdisabled: false\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tlet tooltipSizesArrowInc = {\r\n\t\t\twidth: this.tooltipBB.width + arrowSizes.width / 2 + this.options.tooltipDistanceFromTarget,\r\n\t\t\theight: this.tooltipBB.height + arrowSizes.height / 2 + this.options.tooltipDistanceFromTarget\r\n\t\t};\r\n\r\n\t\tconst minimalTooltipWidth = this.getMinimalTooltipWidth();\r\n\t\tlet newTooltipWidthArrowInc = {\r\n\t\t\tleft: tooltipSizesArrowInc.width,\r\n\t\t\tright: tooltipSizesArrowInc.width\r\n\t\t};\r\n\t\tlet newTooltipWidth = {\r\n\t\t\tleft: null,\r\n\t\t\tright: null\r\n\t\t};\r\n\r\n\t\tconst rightWidthArrowInc = this.maxDocBoardBB.right - this.targetBB.right;\r\n\t\tconst rightWidth = rightWidthArrowInc - arrowSizes.width / 2 - this.options.tooltipDistanceFromTarget;\r\n\t\tif (rightWidth > minimalTooltipWidth && rightWidth < this.tooltipBB.width) {\r\n\t\t\tnewTooltipWidthArrowInc.right = rightWidthArrowInc;\r\n\t\t\tnewTooltipWidth.right = rightWidth;\r\n\t\t}\r\n\r\n\t\tconst leftWidthArrowInc = this.targetBB.left - this.maxDocBoardBB.left;\r\n\t\tconst leftWidth = leftWidthArrowInc - arrowSizes.width / 2 - this.options.tooltipDistanceFromTarget;\r\n\t\tif (leftWidth > minimalTooltipWidth && leftWidth < this.tooltipBB.width) {\r\n\t\t\tnewTooltipWidthArrowInc.left = leftWidthArrowInc;\r\n\t\t\tnewTooltipWidth.left = leftWidth;\r\n\t\t}\r\n\r\n\t\tconst minTargetCenterHeigh = (desiredTooltipPosition === 'center') ? this.targetBB.height : this.targetBB.height / 2;\r\n\t\tconst targetWithTooltipHeightTopBottom = tooltipSizesArrowInc.height + this.targetBB.height;\r\n\t\tconst heightScoreTopBottom = (this.winBB.height - targetWithTooltipHeightTopBottom) / this.winBB.height;\r\n\r\n\r\n\t\t// Check for space below\r\n\t\tpossiblePositionsScoreInc['bottom'].disabled = (this.targetBB.bottom + tooltipSizesArrowInc.height > this.maxDocBoardBB.bottom && !targetItem?.isFixedPos);\r\n\t\tpossiblePositionsScoreInc['bottom'].score += (isCrowdedPos.bottom ? -1 : heightScoreTopBottom);\r\n\r\n\r\n\t\t// Check for space above\r\n\t\tpossiblePositionsScoreInc['top'].disabled = (this.targetBB.top - tooltipSizesArrowInc.height < this.maxDocBoardBB.top && !targetItem?.isFixedPos);\r\n\t\tpossiblePositionsScoreInc['top'].score += (isCrowdedPos.top ? -1 : heightScoreTopBottom);\r\n\r\n\t\t// Check for space to the right\r\n\t\tpossiblePositionsScoreInc['right'].disabled = (this.targetBB.right + newTooltipWidthArrowInc.right > this.maxDocBoardBB.right + 1); // +1 i don't know why yet\r\n\t\tpossiblePositionsScoreInc['right'].score += (isCrowdedPos.right ? -1 : 1 - (newTooltipWidthArrowInc.right / (this.winBB.width - this.targetBB.right)));\r\n\r\n\t\t// Check for space to the left\r\n\t\tpossiblePositionsScoreInc['left'].disabled = (this.targetBB.left - newTooltipWidthArrowInc.left < this.maxDocBoardBB.left);\r\n\t\tpossiblePositionsScoreInc['left'].score += (isCrowdedPos.left ? -1 : 1 - (newTooltipWidthArrowInc.left / this.targetBB.left));\r\n\r\n\t\t// Check for space inside\r\n\t\tpossiblePositionsScoreInc['center'].disabled = this.targetBB.width <= this.tooltipBB.width || minTargetCenterHeigh <= this.tooltipBB.height;\r\n\t\tif (this.targetBB.width - this.tooltipBB.width < this.targetBB.height - this.tooltipBB.height) {\r\n\t\t\tpossiblePositionsScoreInc['center'].score += (this.targetBB.width - this.tooltipBB.width) / this.targetBB.width - 0.5;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpossiblePositionsScoreInc['center'].score += (this.targetBB.height - this.tooltipBB.height) / this.targetBB.height - 0.5;\r\n\t\t}\r\n\r\n\t\tconst possiblePositionsScoreIncArr = [];\r\n\t\tObject.keys(possiblePositionsScoreInc).forEach((pos) => {\r\n\t\t\tif (!possiblePositionsScoreInc[pos].disabled) {\r\n\t\t\t\tpossiblePositionsScoreIncArr.push({\r\n\t\t\t\t\tposition: pos,\r\n\t\t\t\t\tscore: possiblePositionsScoreInc[pos].score\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\tpossiblePositionsScoreIncArr.sort((a, b) => {\r\n\t\t\treturn b.score - a.score;\r\n\t\t});\r\n\t\t//if (this.options.dpDebugEn) console.log(possiblePositionsScoreIncArr);\r\n\r\n\t\tconst possiblePositions = possiblePositionsScoreIncArr.map((val) => {\r\n\t\t\treturn val.position;\r\n\t\t});\r\n\t\t//if (this.options.dpDebugEn) console.log(possiblePositions);\r\n\r\n\t\t// @var {String}  ex: 'right-aligned'\r\n\t\tvar desiredAlignment = (function (pos) {\r\n\t\t\tvar hyphenIndex = pos.indexOf('-');\r\n\t\t\tif (hyphenIndex !== -1) {\r\n\t\t\t\t// has alignment\r\n\t\t\t\treturn pos.substr(hyphenIndex);\r\n\t\t\t}\r\n\t\t\treturn '';\r\n\t\t})(desiredTooltipPosition || '');\r\n\r\n\t\t// strip alignment from position\r\n\t\tif (desiredTooltipPosition) {\r\n\t\t\t// ex: \"bottom-right-aligned\"\r\n\t\t\t// should return 'bottom'\r\n\t\t\tdesiredTooltipPosition = desiredTooltipPosition.split('-')[0];\r\n\t\t}\r\n\r\n\r\n\r\n\t\tif (possiblePositions.length) {\r\n\t\t\tif (desiredTooltipPosition !== 'auto' &&\r\n\t\t\t\tpossiblePositions.indexOf(desiredTooltipPosition) > -1) {\r\n\t\t\t\t// If the requested position is in the list, choose that\r\n\t\t\t\tcalculatedPosition.base = desiredTooltipPosition;\r\n\t\t\t} else {\r\n\t\t\t\t// Pick the first valid position, in order\r\n\t\t\t\tcalculatedPosition.base = possiblePositions[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//$(this.tooltipTextLayer).addClass(LAYER_CLASSES.tooltipText + '--compact');\r\n\t\t\t// smaller font\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// top and bottom alignments\r\n\t\tif (['top', 'bottom'].indexOf(calculatedPosition.base) !== -1) {\r\n\t\t\tcalculatedPosition.align = this._determineAutoAlignmentX(this.targetBB, tooltipSizesArrowInc.width, desiredAlignment);\r\n\t\t}\r\n\t\t//  left and right positions alignments\r\n\t\telse if (['left', 'right'].indexOf(calculatedPosition.base) !== -1) {\r\n\t\t\tif (newTooltipWidth[calculatedPosition.base]) calculatedPosition.width = newTooltipWidth[calculatedPosition.base];\r\n\r\n\r\n\t\t\tcalculatedPosition.align = this._determineAutoAlignmentY(this.targetBB, tooltipSizesArrowInc.height, desiredAlignment, arrowSizes);\r\n\r\n\t\t}\r\n\t\telse if (calculatedPosition.base === 'center') {\r\n\t\t\tcalculatedPosition.align = 'middle';\r\n\t\t}\r\n\r\n\t\t//if (this.options.dpDebugEn) console.log(calculatedPosition);\r\n\r\n\t\treturn calculatedPosition;\r\n\t}\r\n\r\n\t/**\r\n\t* auto-determine alignment\r\n\t* @param {Integer}  offsetLeft\r\n\t* @param {Integer}  tooltipWidth\r\n\t* @param {String}   desiredAlignment\r\n\t* @return {String}  calculatedAlignment\r\n\t*/\r\n\t_determineAutoAlignmentX = (targetBB, tooltipWidth, desiredAlignment) => {\r\n\r\n\t\tconst possibleAlignments = ['center', 'left', 'right'];\r\n\t\tlet calculatedAlignment = '';\r\n\r\n\t\tif (targetBB.left + tooltipWidth > this.maxDocBoardBB.right) {\r\n\t\t\tthis._removeEntry(possibleAlignments, 'left');\r\n\t\t}\r\n\r\n\t\tconst targetCenterX = targetBB.left + targetBB.width / 2;\r\n\t\tif (targetCenterX - 0.5 * tooltipWidth < this.maxDocBoardBB.left ||\r\n\t\t\ttargetCenterX + 0.5 * tooltipWidth > this.maxDocBoardBB.right) {\r\n\t\t\tthis._removeEntry(possibleAlignments, 'center');\r\n\t\t}\r\n\r\n\t\tif (targetBB.right - tooltipWidth < this.maxDocBoardBB.left) {\r\n\t\t\tthis._removeEntry(possibleAlignments, 'right');\r\n\t\t}\r\n\r\n\t\tif (possibleAlignments.length) {\r\n\t\t\tif (possibleAlignments.indexOf(desiredAlignment) !== -1) {\r\n\t\t\t\t// the desired alignment is valid\r\n\t\t\t\tcalculatedAlignment = desiredAlignment;\r\n\t\t\t} else {\r\n\t\t\t\t// pick the first valid position, in order\r\n\t\t\t\tcalculatedAlignment = possibleAlignments[0];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// if screen width is too small \r\n\t\t\t// for ANY alignment, middle is \r\n\t\t\t// probably the best for visibility\r\n\t\t\tcalculatedAlignment = 'center';\r\n\t\t}\r\n\r\n\t\treturn calculatedAlignment;\r\n\t}\r\n\r\n\t/**\r\n\t* auto-determine alignment\r\n\t* @param {Integer}  offsetLeft\r\n\t* @param {Integer}  tooltipHeight\r\n\t* @param {Object}   windowSize\r\n\t* @param {String}   desiredAlignment\r\n\t* @return {String}  calculatedAlignment\r\n\t*/\r\n\t_determineAutoAlignmentY = (targetBB, tooltipHeight, desiredAlignment) => {\r\n\r\n\r\n\t\tconst possibleAlignments = ['middle', 'top', 'bottom'];\r\n\t\tlet calculatedAlignment = '';\r\n\r\n\t\tif (targetBB.top + tooltipHeight > this.maxDocBoardBB.bottom) {\r\n\t\t\tthis._removeEntry(possibleAlignments, 'top');\r\n\t\t}\r\n\r\n\t\tconst targetCenterY = targetBB.top + targetBB.height / 2;\r\n\t\tif (targetCenterY - tooltipHeight / 2 < this.maxDocBoardBB.top ||\r\n\t\t\ttargetCenterY + tooltipHeight / 2 > this.maxDocBoardBB.bottom) {\r\n\t\t\tthis._removeEntry(possibleAlignments, 'middle');\r\n\t\t}\r\n\r\n\t\tif (targetBB.bottom - tooltipHeight < this.maxDocBoardBB.top) {\r\n\t\t\tthis._removeEntry(possibleAlignments, 'bottom');\r\n\t\t}\r\n\r\n\t\tif (possibleAlignments.length) {\r\n\t\t\tif (possibleAlignments.indexOf(desiredAlignment) !== -1) {\r\n\t\t\t\t// the desired alignment is valid\r\n\t\t\t\tcalculatedAlignment = desiredAlignment;\r\n\t\t\t} else {\r\n\t\t\t\t// pick the first valid position, in order\r\n\t\t\t\tcalculatedAlignment = possibleAlignments[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// if screen width is too small \r\n\t\t\t// for ANY alignment, middle is \r\n\t\t\t// probably the best for visibility\r\n\t\t\tcalculatedAlignment = 'middle';\r\n\t\t}\r\n\r\n\t\treturn calculatedAlignment;\r\n\t}\r\n\r\n\t/**\r\n\t * Remove an entry from a string array if it's there, does nothing if it isn't there.\r\n\t *\r\n\t * @param {Array} stringArray\r\n\t * @param {String} stringToRemove\r\n\t */\r\n\t_removeEntry = (stringArray, stringToRemove) => {\r\n\t\tif (stringArray.indexOf(stringToRemove) > -1) {\r\n\t\t\tstringArray.splice(stringArray.indexOf(stringToRemove), 1);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Update the position of the helper layer on the screen\r\n\t *\r\n\t * @api private\r\n\t * @method _setHelperLayerPosition\r\n\t * @param {Object} layer\r\n\t */\r\n\tsetLayerPosition = (layer, addClass = null, remClass = null, fixRadiuses = false) => {\r\n\t\tif (layer) {\r\n\t\t\t//prevent error when `this._currentStep` in undefined\r\n\t\t\tif (!this.currentTargetItem) return;\r\n\r\n\t\t\tif (fixRadiuses) {\r\n\t\t\t\t$(layer).removeClass('dpit-no-lradius dpit-no-rradius');\r\n\t\t\t\tif (this.targetBB.left <= 0) {\r\n\t\t\t\t\t$(layer).addClass('dpit-no-lradius');\r\n\t\t\t\t}\r\n\t\t\t\tif (this.targetBB.right >= this.docBB.width) {\r\n\t\t\t\t\t$(layer).addClass('dpit-no-rradius');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (addClass) $(layer).addClass(addClass);\r\n\t\t\tif (remClass) $(layer).removeClass(remClass);\r\n\r\n\t\t\tif (this.currentTargetItem.isFixedPos) {\r\n\t\t\t\t$(layer).addClass('dpit-fixed');\r\n\t\t\t} else {\r\n\t\t\t\t$(layer).removeClass('dpit-fixed');\r\n\t\t\t}\r\n\r\n\t\t\tif (this.currentTargetItem.isFixedPos) {\r\n\t\t\t\t$(layer).css({\r\n\t\t\t\t\ttop: this.targetBB.top + 'px',\r\n\t\t\t\t\tleft: this.targetBB.left + 'px',\r\n\t\t\t\t\twidth: this.targetBB.width + 'px',\r\n\t\t\t\t\theight: this.targetBB.height + 'px'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$(layer).offset({\r\n\t\t\t\t\ttop: this.targetBB.top,\r\n\t\t\t\t\tleft: this.targetBB.left\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$(layer).css({\r\n\t\t\t\t\twidth: this.targetBB.width + 'px',\r\n\t\t\t\t\theight: this.targetBB.height + 'px'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Add disableinteraction layer and adjust the size and position of the layer\r\n\t *\r\n\t * @api private\r\n\t * @method _disableInteraction\r\n\t */\r\n\t_disableInteraction() {\r\n\t\tif (!this.disableInteractionLayer) {\r\n\t\t\tthis.disableInteractionLayer = document.createElement('div');\r\n\t\t\tthis.disableInteractionLayer.className = LAYER_CLASSES.disableInteraction;\r\n\t\t\tthis.mainElement.appendChild(this.disableInteractionLayer);\r\n\t\t}\r\n\t\tthis.updateIterateAfter(this.currentTargetItem);\r\n\t\tthis.setLayerPosition(this.disableInteractionLayer);\r\n\t}\r\n\r\n\t_enableInteraction(clearIterateAfterClickOnly = false) {\r\n\t\t//remove disableInteractionLayer\r\n\t\tif (this.disableInteractionLayer) {\r\n\t\t\tthis.disableInteractionLayer.parentNode.removeChild(this.disableInteractionLayer);\r\n\t\t\tthis.disableInteractionLayer = null;\r\n\t\t}\r\n\t\tthis.updateIterateAfter(this.currentTargetItem, clearIterateAfterClickOnly);\r\n\r\n\t}\r\n\r\n\t_isInteractionEnabled() {\r\n\t\treturn !this.disableInteractionLayer;\r\n\t}\r\n\r\n\t/**\r\n\t * Setting anchors to behave like buttons\r\n\t *\r\n\t * @api private\r\n\t * @method _setAsButton\r\n\t */\r\n\t_setAsButton = (anchor, label, tabIndex = 0) => {\r\n\t\tanchor.setAttribute('role', 'button');\r\n\t\tif (label && typeof label === 'string') anchor.setAttribute('aria-label', label);\r\n\t\tif (tabIndex >= 0) {\r\n\t\t\tanchor.tabIndex = 0;\r\n\t\t}\r\n\t}\r\n\r\n\tactualizeTargetItem = (targetItem, backward, isRegularStepChange = true) => {\r\n\t\tif (this.actualizeTargetItemCore(targetItem, isRegularStepChange)) {\r\n\t\t\t// skipping step\r\n\t\t\tif (!backward) {\r\n\t\t\t\tif (this._currentStep < this.introItems.length - 1) {\r\n\t\t\t\t\tif (this._currentStep === 0) this.visibleFirstStepShouldBeEvaluated = true;\r\n\t\t\t\t\tthis.goToNextStep();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.visibleLastStepShouldBeEvaluated = true;\r\n\t\t\t\t\tthis.goToPreviousStep();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!this.goToPreviousStep()) {\r\n\t\t\t\t\tthis.visibleFirstStepShouldBeEvaluated = true;\r\n\t\t\t\t\tthis.goToNextStep();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (this.visibleLastStepShouldBeEvaluated) {\r\n\t\t\tthis.visibleLastStep = this._currentStep;\r\n\t\t\tthis.visibleLastStepShouldBeEvaluated = false;\r\n\t\t}\r\n\t\tif (this.visibleFirstStepShouldBeEvaluated) {\r\n\t\t\tthis.visibleFirstStep = this._currentStep;\r\n\t\t\tthis.visibleFirstStepShouldBeEvaluated = false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tisStepItemInMobileMenu(stepItem) {\r\n\t\treturn stepItem.is_mobile_menu_active_element && stepItem.alt_mobile_selector;\r\n\t}\r\n\r\n\tactualizeTargetItemCore = (stepItem, isRegularStepChange = true, isInit = false) => {\r\n\t\tlet skipStep = false;\r\n\t\tif (stepItem) {\r\n\r\n\t\t\tif (this.isStepItemInMobileMenu(stepItem)) {\r\n\t\t\t\tconst mobMenuEl = $S(stepItem.alt_mobile_selector);\r\n\t\t\t\tif (mobMenuEl && mobMenuEl.length) {\r\n\t\t\t\t\tstepItem.element = mobMenuEl[0];\r\n\t\t\t\t\tthis.resetStepAsDummy(stepItem);\r\n\t\t\t\t\t/*stepItem.isFixedPos = this.isFixedPos(stepItem.element);\r\n\t\t\t\t\treturn;*/\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\telse if (stepItem.alt_mobile_selector && this.isMobileSize) {\r\n\t\t\t\tconst el = $S(stepItem.alt_mobile_selector, null);\r\n\t\t\t\tif (el && el.length) stepItem.element = el[0];\r\n\t\t\t\telse stepItem.element = null;\r\n\t\t\t}\r\n\t\t\telse if (stepItem.selector) {\r\n\t\t\t\tconst el = $S(stepItem.selector, null);\r\n\t\t\t\tif (el && el.length) stepItem.element = el[0];\r\n\t\t\t\telse stepItem.element = null;\r\n\t\t\t}\r\n\t\t\telse stepItem.element = null;\r\n\r\n\t\t\tif (isRegularStepChange) {\r\n\t\t\t\tskipStep = this._shouldBeStepSkipped(stepItem, this.isMobileSize);\r\n\t\t\t\tthis.setNotVisibleRefBullet(stepItem.step, skipStep);\r\n\t\t\t\tthis.updateIterateAfter(stepItem);\r\n\t\t\t\tif (this.options.dpDebugEn) console.log('Current step:', stepItem);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.options.dpDebugEn && (!stepItem.element || !$(stepItem.element).is(':visible'))) {\r\n\t\t\t\tif (this.options.dpDebugEn && isRegularStepChange) console.log('Current not visible!');\r\n\t\t\t}\r\n\r\n\t\t\tconst targetElementIsNotVisibleAndNotSkipped = stepItem.element && this.targetDummy !== stepItem.element && (!$(stepItem.element).is(':visible')) && (!isRegularStepChange || !this.options.skip_absent_ref_el);\r\n\r\n\t\t\tif (!skipStep) {\r\n\t\t\t\tif (!stepItem.element || this.targetDummy === stepItem.element || targetElementIsNotVisibleAndNotSkipped) {\r\n\t\t\t\t\tthis.setStepAsDummy(stepItem, targetElementIsNotVisibleAndNotSkipped ? stepItem.element : null);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.resetStepAsDummy(stepItem);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!isInit) {\r\n\t\t\t\tif (this.hasTargetItemHiddenOverlay(stepItem)) {\r\n\t\t\t\t\tthis.hideOverlay();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.showOverlay();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tstepItem.isFixedPos = this.isFixedPos(stepItem.element);\r\n\t\t}\r\n\t\treturn skipStep;\r\n\t}\r\n\r\n\thasTargetItemHiddenOverlay(item) {\r\n\t\tif (item) {\r\n\t\t\treturn item\r\n\t\t\t\t&& item.element\r\n\t\t\t\t&& item.enable_interaction.val == '1'\r\n\t\t\t\t&& !item.isDummyElement\r\n\t\t\t\t&& item.enable_interaction.ext?.hide_overlay == '1';\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tupdateIterateAfter(stepItem, clearOnly = false) {\r\n\t\tthis.updateIterateAfterClick(stepItem, clearOnly);\r\n\t\tthis.updateIterateAfterHover(stepItem, clearOnly);\r\n\r\n\t}\r\n\r\n\tupdateIterateAfterClick(stepItem, clearOnly = false) {\r\n\r\n\t\tif (stepItem && stepItem.element) {\r\n\t\t\t$(stepItem.element).off('mousedown', this.iterateStepAfterUserAction);\r\n\t\t\t$(stepItem.element).off('mousedown', this.stopClickPropagation);\r\n\t\t\t$(stepItem.element).off('click', this.stopClickPropagation);\r\n\t\t\t$(stepItem.element).off('mouseup', this.stopClickPropagation);\r\n\t\t\t$(stepItem.element).removeClass(LAYER_CLASSES.targetClick);\r\n\t\t\t$(stepItem.element).removeClass(LAYER_CLASSES.targetBlockEvents);\r\n\t\t}\r\n\t\tif (!clearOnly) {\r\n\t\t\tif (this.isIterateAfterClick(stepItem)) {\r\n\t\t\t\t$(stepItem.element).on('mousedown', this.iterateStepAfterUserAction);\r\n\t\t\t\t$(stepItem.element).addClass(LAYER_CLASSES.targetClick);\r\n\t\t\t}\r\n\t\t\tif (this.isStopClickPropagation(stepItem)) {\r\n\t\t\t\t$(stepItem.element).on('mousedown', this.stopClickPropagation);\r\n\t\t\t\t$(stepItem.element).on('click', this.stopClickPropagation);\r\n\t\t\t\t$(stepItem.element).on('mouseup', this.stopClickPropagation);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstopClickPropagation = (event) => {\r\n\t\tif (event) {\r\n\t\t\tif (event.target) {\r\n\t\t\t\tif (event.type === 'mousedown') {\r\n\t\t\t\t\t$(event.target).closest(LAYER_CLASSES.target).addClass(LAYER_CLASSES.targetBlockEvents);\r\n\t\t\t\t}\r\n\t\t\t\tif (event.type === 'mouseup') {\r\n\t\t\t\t\t$(event.target).closest(LAYER_CLASSES.target).removeClass(LAYER_CLASSES.targetBlockEvents);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tevent.stopImmediatePropagation();\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\titerateStepAfterUserAction = () => {\r\n\r\n\t\tif (!this.options.disableIterateAfterActions && this.currentTargetItem) {\r\n\t\t\tlet delay = this.currentTargetItem.enable_interaction?.ext?.iterate_after_click_delay_ms ?? 500;\r\n\t\t\t//this.reInitTarget();\r\n\t\t\tthis.inHighlightLayerAnimation.createAndRun();\r\n\r\n\t\t\thideElement(this.currentTargetItem?.element);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.inHighlightLayerAnimation.destroy();\r\n\t\t\t\tshowElement(this.currentTargetItem?.element);\r\n\t\t\t\tthis.goToNextStep();\r\n\t\t\t}, delay);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tisIterateAfterClick(stepData) {\r\n\t\treturn stepData\r\n\t\t\t&& stepData.element\r\n\t\t\t&& stepData.enable_interaction.val == '1'\r\n\t\t\t&& !stepData.isDummyElement\r\n\t\t\t&& stepData.enable_interaction.ext?.iterate_after_click == '1';\r\n\t}\r\n\r\n\r\n\r\n\tisStopClickPropagation(stepData) {\r\n\t\treturn stepData\r\n\t\t\t&& stepData.element\r\n\t\t\t&& stepData.enable_interaction.val == '1'\r\n\t\t\t&& !stepData.isDummyElement\r\n\t\t\t&& stepData.enable_interaction.ext?.iterate_after_click_stop_propagation == '1';\r\n\t}\r\n\r\n\tupdateIterateAfterHover(stepItem, clearOnly = false) {\r\n\t\tif (stepItem && stepItem.element) $(stepItem.element).off('mouseenter', this.iterateStepAfterUserAction).removeClass('dpit-target--hover');\r\n\t\tif (!clearOnly && this.isIterateAfterHover(stepItem)) $(stepItem.element).on('mouseenter', this.iterateStepAfterUserAction).addClass('dpit-target--hover');\r\n\t}\r\n\r\n\tisIterateAfterHover(stepData) {\r\n\t\treturn stepData\r\n\t\t\t&& stepData.element\r\n\t\t\t&& stepData.enable_interaction.val == '1'\r\n\t\t\t&& !stepData.isDummyElement\r\n\t\t\t&& stepData.enable_interaction.ext?.iterate_after_hover == '1';\r\n\t}\r\n\r\n\tisHideNextByCurrentStepMeta() {\r\n\t\treturn this.currentTargetItem\r\n\t\t\t&& this.currentTargetItem.element\r\n\t\t\t&& this.currentTargetItem.enable_interaction.val == '1'\r\n\t\t\t&& !this.currentTargetItem.isDummyElement\r\n\t\t\t&& this.currentTargetItem.enable_interaction.ext?.hide_next_btn == '1';\r\n\t}\r\n\r\n\tgetIsMobileSize(breakPointOverride = null) {\r\n\t\treturn this.options.mobileBreakpoints && (this.winBB.width <= (breakPointOverride ? breakPointOverride : this.options.mobileBreakpoints.mobile));\r\n\t}\r\n\r\n\t_shouldBeStepSkipped(stepItem, isMobileSize) {\r\n\t\tlet skipStep = false;\r\n\t\tif (this.options.skip_absent_ref_el\r\n\t\t\t&& (stepItem.selector || (isMobileSize && stepItem.alt_mobile_selector))\r\n\t\t\t&& (!stepItem.element || !$(stepItem.element).is(':visible') || !this.isElementInsideDocBoard(stepItem.element))\r\n\t\t) {\r\n\t\t\tskipStep = true;\r\n\t\t}\r\n\t\treturn skipStep;\r\n\r\n\t}\r\n\r\n\tisElementInsideDocBoard(element) {\r\n\t\tif (this.docBB && element) {\r\n\t\t\tconst bb = DPBoundingBox.getElBoundingBox(element, false, false);\r\n\t\t\treturn DPBoundingBox.intersect(bb, this.docBB) !== null;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tisElementInsideMaxScreenArea(element, relativeToCurrentScrollTop = true) {\r\n\t\tif (this.maxScreenArea && element) {\r\n\t\t\tconst bb = DPBoundingBox.getElBoundingBox(element, false, relativeToCurrentScrollTop);\r\n\t\t\treturn DPBoundingBox.intersect(bb, this.maxScreenArea) !== null;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t_isElementHidden(el) {\r\n\t\treturn (el.offsetParent === null);\r\n\t}\r\n\r\n\tgetHighlightLayerClass(targetItem) {\r\n\t\treturn classNames({\r\n\t\t\t[LAYER_CLASSES.highlight]: true,\r\n\t\t\t[targetItem?.highlightClass]: targetItem && typeof (targetItem.highlightClass) === 'string' && targetItem.highlightClass,\r\n\t\t\t[this.options.highlightClass]: typeof (this.options.highlightClass) === 'string' && this.options.highlightClass\r\n\t\t});\r\n\t}\r\n\r\n\treInitLayers(hideOverlay = false, targetItem = null) {\r\n\r\n\t\tconst highlightLayerClass = this.getHighlightLayerClass(targetItem);\r\n\t\tif (!this.highlightLayer) {\r\n\t\t\t// Check if layers was created\r\n\t\t\tthis.initLayers(highlightLayerClass);\r\n\t\t\tthis.actualizeBoardSizes();\r\n\t\t} else {\r\n\t\t\tthis.highlightLayer.className = highlightLayerClass;\r\n\t\t}\r\n\r\n\t\t$(this.tooltipTextLayer).removeClass(LAYER_CLASSES.tooltipText + '--compact');\r\n\r\n\t\t// Init\r\n\t\tif (targetItem) {\r\n\t\t\t$(document.documentElement).addClass('dpit-step-' + targetItem.step);\r\n\t\t\tthis.mainElement.setAttribute('id', 'dpit-step-' + targetItem.step);\r\n\t\t\tthis.tooltipLayer.setAttribute('id', 'dpit-tooltip-step-' + targetItem.step);\r\n\t\t\tthis.highlightLayer.setAttribute('id', `${LAYER_CLASSES.highlight}-step-${targetItem.step}`);\r\n\t\t\tif (targetItem.isDummyElement) $(this.highlightLayer).addClass('highlight-dummy');\r\n\t\t}\r\n\r\n\t\t// Hide\r\n\t\tif (!IS_DEBUG) this.hideIntroLayers(hideOverlay);\r\n\r\n\r\n\r\n\t\t$(this.numberLayer).removeClass(LAYER_CLASSES.numberOnTooltip);\r\n\t\t$(this.tooltipLayer).removeClass(LAYER_CLASSES.tooltipWithNumber);\r\n\r\n\t}\r\n\r\n\tactualizeUserInteraction(targetItem) {\r\n\t\t//disable interaction\r\n\t\tif (targetItem && targetItem.enable_interaction.val != '1' && !targetItem.isDummyElement) {\r\n\t\t\tthis._disableInteraction();\r\n\t\t} else {\r\n\t\t\tthis._enableInteraction();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgetStartStepIdx() {\r\n\t\tif (this.visibleFirstStep) return this.visibleFirstStep;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tgetEndStepIdx() {\r\n\t\tif (this.visibleLastStep) return this.visibleLastStep;\r\n\t\treturn this.introItems.length - 1;\r\n\t}\r\n\r\n\tsetTooltipContent(targetItem) {\r\n\t\tthis.tooltipTextLayer.innerHTML = targetItem ? targetItem.intro_proc || targetItem.intro : '';\r\n\t\tthis.checkTooltipIFrames(this.tooltipTextLayer.innerHTML);\r\n\t}\r\n\r\n\tcheckTooltipIFrames = (innerHTML) => {\r\n\t\tthis.tooltipBBRel = DPBoundingBox.getElBoundingBox(this.tooltipTextLayer, false, true);\r\n\t\tif (innerHTML) {\r\n\t\t\tconst start = innerHTML.indexOf('<iframe');\r\n\t\t\tif (start >= 0) {\r\n\t\t\t\tconst stop = innerHTML.indexOf('>', start + 7);\r\n\t\t\t\tif (stop >= 0) {\r\n\t\t\t\t\tconst iframeStr = innerHTML.substr(start, stop - start + 1);\r\n\t\t\t\t\tif (iframeStr && iframeStr.includes('allowfullscreen')) {\r\n\t\t\t\t\t\tthis._isIframeInTooltip = true;\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._isIframeInTooltip = false;\r\n\t}\r\n\r\n\r\n\tactualizeAutoFocus = (isRefresh) => {\r\n\t\tif (this.options.controlsAutoFocusEnable && !isRefresh) {\r\n\t\t\tlet control = null;\r\n\t\t\tswitch (this.activeControl) {\r\n\t\t\t\tcase 'next': control = this.buttonNextLayer; break;\r\n\t\t\t\tcase 'back': control = this.buttonPrevLayer; break;\r\n\t\t\t\tcase 'skip': control = this.buttonSkipLayer; break;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.options.dpDebugEn) console.log('Active control: ' + this.activeControl);\r\n\t\t\tif (control) {\r\n\t\t\t\tcontrol.focus({ preventScroll: true, focusVisible: false });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tactualizeProgressBar = () => {\r\n\t\tif (this.options.showProgress !== true) {\r\n\t\t\tthis.progressLayer.style.display = 'none';\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.progressLayer.style.display = '';\r\n\t\t}\r\n\t\tconst progressVal = this.getProgressInPercent();\r\n\t\tthis.progressBarLayer.style.cssText = 'width:' + progressVal + '%;';\r\n\t\tthis.progressBarLayer.setAttribute('aria-valuenow', progressVal);\r\n\t}\r\n\r\n\r\n\tactualizeBulletsNavig = (targetItem) => {\r\n\t\t$(this.bulletsLayer).find('.' + LAYER_CLASSES.bulletPulse).removeClass(LAYER_CLASSES.bulletPulse);\r\n\t\t// Adjusting bullets - skipped steps\r\n\t\tif (this.visibleLastStep) {\r\n\t\t\tfor (let i = this.visibleLastStep + 1; i < this.introItems.length; i++) {\r\n\t\t\t\tthis.setNotVisibleRefBullet(i + 1, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.visibleFirstStep) {\r\n\t\t\tfor (let i = this.visibleFirstStep - 1; i >= 0; i--) {\r\n\t\t\t\tthis.setNotVisibleRefBullet(i + 1, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//change active bullet\r\n\t\tif (this.options.showBullets) {\r\n\t\t\tthis.activateBullet(targetItem.step);\r\n\t\t}\r\n\r\n\t\tthis.actualizeBulletScrollBar();\r\n\r\n\t}\r\n\r\n\tactualizeStickyBullets() {\r\n\t\tconst isStickyTheme = this.isStickyTheme();\r\n\t\t$(this.bulletsLayer).removeClass(`${LAYER_CLASSES.bullets}--hidden`);\r\n\t\tif (isStickyTheme && this.bulletsLayer) {\r\n\t\t\tif (!this.currentTargetItem.isDummyElement) {\r\n\t\t\t\tconst bulletsBB = DPBoundingBox.getElBoundingBox(this.bulletsLayer);\r\n\t\t\t\tif (DPBoundingBox.intersect(bulletsBB, this.currentFlyingObjectBB)) {\r\n\t\t\t\t\t$(this.bulletsLayer).addClass(`${LAYER_CLASSES.bullets}--hidden`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tactualizeBulletScrollBar(autoScroll = false, backward = false) {\r\n\t\tlet jBulletsListElement = $(this.bulletsLayer).children('ul');\r\n\t\tif (jBulletsListElement) {\r\n\t\t\tif ($(jBulletsListElement).hasScrollBar(true, false)) {\r\n\t\t\t\t$(jBulletsListElement).addClass('dpit-has-scrollbar');\r\n\t\t\t\tif (autoScroll) {\r\n\t\t\t\t\tconst jActiveItem = jBulletsListElement.children('li.active');\r\n\t\t\t\t\tif (jActiveItem.length) {\r\n\t\t\t\t\t\tthis.scrollParentToTarget(jActiveItem.get(0), true, true, false, true, backward);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$(jBulletsListElement).removeClass('dpit-has-scrollbar');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tactualizeButtons() {\r\n\r\n\t\t// Buttons\r\n\t\tlet isHideNextByCurrentStepMeta = this.isHideNextByCurrentStepMeta();\r\n\t\tconst isLastStep = this.getEndStepIdx() <= this._currentStep;\r\n\t\tconst isFirstStep = this._currentStep <= this.getStartStepIdx();\r\n\r\n\t\tif (isFirstStep && this.introItems.length > 1) this.activeControl = 'next';\r\n\t\telse if (isLastStep) this.activeControl = 'skip';\r\n\r\n\t\t//const hidePrev = this.options.hide_previous_step_button || (this.options.hidePrev && isFirstStep);\r\n\t\t//const hideNext = this.options.hideNextAlways || isHideNextByCurrentStepMeta || (this.options.hideNext === true && isLastStep);\r\n\t\tconst buttonPrevClass = classNames({\r\n\t\t\t[this.options.buttonClass]: true,\r\n\t\t\t[LAYER_CLASSES.buttonPrev]: true,\r\n\t\t\t//[LAYER_CLASSES.hidden]: hidePrev,\r\n\t\t\t[LAYER_CLASSES.disabled]: isFirstStep,\r\n\t\t\t[LAYER_CLASSES.noTrans]: true,\r\n\t\t});\r\n\t\tconst buttonNextClass = classNames({\r\n\t\t\t[this.options.buttonClass]: true,\r\n\t\t\t[LAYER_CLASSES.buttonNext]: true,\r\n\t\t\t//[LAYER_CLASSES.hidden]: hideNext,\r\n\t\t\t[LAYER_CLASSES.disabled]: isLastStep || isHideNextByCurrentStepMeta,\r\n\t\t\t[LAYER_CLASSES.noTrans]: true,\r\n\t\t});\r\n\t\tconst buttonSkipClass = classNames({\r\n\t\t\t[this.options.buttonClass]: true,\r\n\t\t\t[LAYER_CLASSES.buttonSkip]: true,\r\n\t\t\t[LAYER_CLASSES.buttonDone]: isLastStep,\r\n\t\t\t[LAYER_CLASSES.noTrans]: true,\r\n\t\t});\r\n\t\tconst buttonSkipLabel = isLastStep ? this.options.labeling.doneLabel : this.options.labeling.skipLabel;\r\n\r\n\t\tif (this.buttonPrevLayer) {\r\n\t\t\tthis.buttonPrevLayer.className = buttonPrevClass;\r\n\t\t}\r\n\r\n\t\tif (this.buttonNextLayer) {\r\n\t\t\tthis.buttonNextLayer.className = buttonNextClass;\r\n\t\t}\r\n\r\n\t\tif (typeof this.buttonSkipLayer !== 'undefined' && this.buttonSkipLayer !== null) {\r\n\t\t\tconst isSticky = this.isStickyTheme();\r\n\t\t\tthis.buttonSkipLayer.className = buttonSkipClass;\r\n\t\t\tthis.buttonSkipLayer.setAttribute('title', isSticky && !isLastStep ? buttonSkipLabel : '');\r\n\t\t\tthis.buttonSkipLayer.innerHTML = isSticky && !isLastStep ? '' : buttonSkipLabel;\r\n\t\t}\r\n\r\n\t\tif (this.options.disable_navigation_by_bullets) $(this.bulletsLayer).addClass(LAYER_CLASSES.bullets + '--pointer-events-none');\r\n\t\telse $(this.bulletsLayer).removeClass(LAYER_CLASSES.bullets + '--pointer-events-none');\r\n\r\n\r\n\t\tif (this.introItems.length > 1) {\r\n\t\t\tif (this.options.showBullets) {\r\n\t\t\t\t$(this.bulletsLayer).slideDown();\r\n\t\t\t}\r\n\t\t\tif (this.options.showProgress === true) {\r\n\t\t\t\t$(this.progressLayer).slideDown();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$(this.bulletsLayer).slideUp();\r\n\t\t\t$(this.progressLayer).slideUp();\r\n\t\t}\r\n\t\t$(`.${LAYER_CLASSES.button}`).removeClass(LAYER_CLASSES.noTrans);\r\n\r\n\r\n\t}\r\n\r\n\tfixTargetLowContrast = (targetItem, isSecondTry = false) => {\r\n\t\t// check color of target element to ensure contrast background\r\n\t\ttry {\r\n\t\t\tif (!targetItem || targetItem.isDummyElement || !this.highlightLayer || targetItem.isFixedPos) return;\r\n\r\n\t\t\tconst targetElement = targetItem.element;\r\n\t\t\tif (this.highlightLayer && targetItem) {\r\n\t\t\t\tif (targetItem.highlight === 'light_bg') {\r\n\t\t\t\t\tthis.highlightLayer.style.backgroundColor = `rgb(${getCssVarVal(this.dpIntroWrapper, '--highlight-layer-bg-color', '255, 255, 255')})`;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\telse if (targetItem.highlight === 'dark_bg') {\r\n\t\t\t\t\tthis.highlightLayer.style.backgroundColor = `rgb(${getCssVarVal(this.dpIntroWrapper, '--highlight-layer-bg-color-darker', '34, 34, 34')})`;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet adjusted = false;\r\n\t\t\tlet lightBoxBgColorStr = this.highlightLayer.style.backgroundColor;\r\n\t\t\tif (!isSecondTry) {\r\n\t\t\t\tlightBoxBgColorStr = `rgb(${getCssVarVal(this.dpIntroWrapper, '--highlight-layer-bg-color', '255, 255, 255')})`;\r\n\t\t\t\t//if (this.options.dpDebugEn) console.log('Highlight layer bg: '+ lightBoxBgColorStr);\r\n\t\t\t}\r\n\r\n\t\t\tif (lightBoxBgColorStr) {\r\n\t\t\t\t//if (this.options.dpDebugEn) console.log('LightboxBg: ' + lightBoxBgColorStr, isSecondTry);\r\n\t\t\t\tconst lightBoxBgColor = new Color(lightBoxBgColorStr);\r\n\t\t\t\tif (lightBoxBgColor) {\r\n\r\n\t\t\t\t\tconst textChilds = $(targetElement).find(':visible').add(targetElement);\r\n\t\t\t\t\tif (textChilds) {\r\n\r\n\t\t\t\t\t\tlet parentOfTargetEl = $(targetElement).parent();\r\n\t\t\t\t\t\tif (parentOfTargetEl) parentOfTargetEl = parentOfTargetEl[0];\r\n\t\t\t\t\t\tconst _self = this;\r\n\t\t\t\t\t\ttextChilds.each(function () {\r\n\t\t\t\t\t\t\tlet opacity = getCssValFloat(this, 'opacity', 1); $(this).css('opacity');\r\n\r\n\t\t\t\t\t\t\tlet beforeOpacity = 1;\r\n\t\t\t\t\t\t\tconst beforeElStyle = window.getComputedStyle(this, ':before');\r\n\t\t\t\t\t\t\tconst hasBeforeContent = beforeElStyle.getPropertyValue('content') != 'none';\r\n\t\t\t\t\t\t\tif (hasBeforeContent) {\r\n\t\t\t\t\t\t\t\tconst beforeOpacityStr = beforeElStyle.getPropertyValue('opacity');\r\n\t\t\t\t\t\t\t\tif (beforeOpacityStr) beforeOpacity = Number(beforeOpacityStr);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlet afterOpacity = 1;\r\n\t\t\t\t\t\t\tconst afterElStyle = window.getComputedStyle(this, ':after');\r\n\t\t\t\t\t\t\tconst hasAfterContent = afterElStyle.getPropertyValue('content') != 'none';\r\n\t\t\t\t\t\t\tif (hasAfterContent) {\r\n\t\t\t\t\t\t\t\tconst afterOpacityStr = afterElStyle.getPropertyValue('opacity');\r\n\t\t\t\t\t\t\t\tif (afterOpacityStr) afterOpacity = Number(afterOpacityStr);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet isSvg = this.firstChild ? $(this.firstChild).prop('tagName') === 'svg' : false;\r\n\t\t\t\t\t\t\tconst hasActivePseudoEl = (hasBeforeContent && beforeOpacity > 0) || (hasAfterContent && afterOpacity > 0);\r\n\r\n\t\t\t\t\t\t\tif (this.firstChild && (this.firstChild.nodeType === Node.TEXT_NODE || isSvg) && opacity > 0 || hasActivePseudoEl) {\r\n\t\t\t\t\t\t\t\tconst text = this.textContent;\r\n\r\n\t\t\t\t\t\t\t\tlet targetColorStr = $(this).css('color');\r\n\r\n\t\t\t\t\t\t\t\tif (!text && hasActivePseudoEl) {\r\n\t\t\t\t\t\t\t\t\tif (hasBeforeContent) targetColorStr = beforeElStyle.getPropertyValue('color');\r\n\t\t\t\t\t\t\t\t\telse if (hasAfterContent) targetColorStr = afterElStyle.getPropertyValue('color');\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (targetColorStr) {\r\n\t\t\t\t\t\t\t\t\tconst targetColor = new Color(targetColorStr);\r\n\t\t\t\t\t\t\t\t\tif (targetColor) {\r\n\t\t\t\t\t\t\t\t\t\t// travel up to target element to mix bg\r\n\t\t\t\t\t\t\t\t\t\tlet finalBg = { r: 0, g: 0, b: 0, a: 0 };\r\n\t\t\t\t\t\t\t\t\t\t//let finalBg = new Color('rgba(0, 0, 0, 0)');\r\n\t\t\t\t\t\t\t\t\t\tlet elToScannBg = this;\r\n\t\t\t\t\t\t\t\t\t\twhile (elToScannBg && elToScannBg != parentOfTargetEl) {\r\n\t\t\t\t\t\t\t\t\t\t\tconst elBgColorStr = $(elToScannBg).css('background-color');\r\n\t\t\t\t\t\t\t\t\t\t\tif (elBgColorStr) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst elBgColor = new Color(elBgColorStr);\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (elBgColor) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (elBgColor.alpha()) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//finalBg = finalBg.mix(elBgColor);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfinalBg = normal(colorToRgbaObject(elBgColor), finalBg);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t//if (finalBg.alpha() > 0.9) break;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (finalBg.a > 0.9) break;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\telToScannBg = $(elToScannBg).parent();\r\n\t\t\t\t\t\t\t\t\t\t\tif (elToScannBg) elToScannBg = elToScannBg[0];\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t//if (finalBg.alpha() < 0.9) {\r\n\t\t\t\t\t\t\t\t\t\tif (finalBg.a < 0.9) {\r\n\t\t\t\t\t\t\t\t\t\t\t//const finalBgColorObj = finalBg.mix(lightBoxBgColor);\r\n\t\t\t\t\t\t\t\t\t\t\tconst finalBgColorObj = rgbaObjectToColor(normal(colorToRgbaObject(lightBoxBgColor), finalBg));\r\n\t\t\t\t\t\t\t\t\t\t\tconst bgLum = finalBgColorObj.luminosity();\r\n\t\t\t\t\t\t\t\t\t\t\tconst targetColorLum = targetColor.luminosity();\r\n\t\t\t\t\t\t\t\t\t\t\t//if (this.options.dpDebugEn) console.log('Final bg: ' + targetColor.toString(), isSecondTry);\r\n\t\t\t\t\t\t\t\t\t\t\t//if (this.options.dpDebugEn) console.log('Contrast:', bgLum - targetColorLum);\r\n\t\t\t\t\t\t\t\t\t\t\tconst contrast = Math.abs(bgLum - targetColorLum);\r\n\t\t\t\t\t\t\t\t\t\t\t//if (this.options.dpDebugEn) console.log(`contrast:${contrast}`);\r\n\t\t\t\t\t\t\t\t\t\t\tif (contrast < 0.3) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t//if (this.options.dpDebugEn) console.log(`LOW CONTRAST - text:${text.substr(0, 20)} | contrast:${contrast} | bg:${finalBgColorObj} | color:${targetColor}`);\r\n\t\t\t\t\t\t\t\t\t\t\t\t//if (this.options.dpDebugEn) console.log('Low contrast');\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (!isSecondTry) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet bgNew;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (lightBoxBgColor.isDark()) bgNew = 'rgb(255, 255, 255)';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\telse bgNew = 'rgb(34, 34, 34)';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_self.highlightLayer.style.backgroundColor = bgNew;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_self.fixTargetLowContrast(targetItem, true);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tadjusted = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(this).addClass(LAYER_CLASSES.colorAdjusted);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!$(this).data('init-color')) $(this).attr('data-init-color', targetColorStr);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (lightBoxBgColor.isDark()) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(this).css('color', targetColor.lighten(0.5).rgb().toString());\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(this).css('color', targetColor.darken(0.5).rgb().toString());\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.highlightLayer.style.backgroundColor && !isSecondTry && !adjusted) {\r\n\t\t\t\t\tthis._removeInlineProp(this.highlightLayer, 'background-color');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tconsole.warn('Exception thrown in fixTargetLowContrast', e.stack);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t_removeInlineProp(elem, propName) {\r\n\t\tif (elem.style.removeProperty) {\r\n\t\t\telem.style.removeProperty(propName);\r\n\t\t} else {\r\n\t\t\telem.style.removeAttribute(propName);\r\n\t\t}\r\n\t}\r\n\r\n\t_bulletClickCallback = (event) => {\r\n\t\tif (event && event.target && !this.options.disable_navigation_by_bullets) {\r\n\t\t\tthis.goToStep(event.target.closest('li').getAttribute('data-step-number'));\r\n\t\t}\r\n\t}\r\n\r\n\tcreateButtonContent(textContent) {\r\n\t\tlet buttonContentLayer = document.createElement('div');\r\n\t\tbuttonContentLayer.className = LAYER_CLASSES.buttonText;\r\n\t\tbuttonContentLayer.innerHTML = textContent;\r\n\t\treturn buttonContentLayer;\r\n\t}\r\n\r\n\tloadIcons() {\r\n\t\tswitch (this.options.labeling.button_arrows) {\r\n\t\t\tcase 'vector': {\r\n\t\t\t\tif (!$('.' + LAYER_CLASSES.button + ' .' + LAYER_CLASSES.buttonIco).length) {\r\n\t\t\t\t\timport(/* webpackChunkName: \"DPButtonIcon\" */ './DPButtonIcon').then(svgLoader => {\r\n\t\t\t\t\t\tconst svgString = svgLoader.default(LAYER_CLASSES.buttonIco);\r\n\t\t\t\t\t\tif (svgString) {\r\n\t\t\t\t\t\t\t$(svgString).appendTo(this.buttonNextLayer);\r\n\t\t\t\t\t\t\t$(svgString).prependTo(this.buttonPrevLayer);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'text':\r\n\t\t\t\t$('<span class=\"' + LAYER_CLASSES.buttonTextIco + '\"> &rarr;</span>').appendTo(this.buttonNextLayer);\r\n\t\t\t\t$('<span class=\"' + LAYER_CLASSES.buttonTextIco + '\">&larr; </span>').prependTo(this.buttonPrevLayer);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: {\r\n\t\t\t\tlet spacer = document.createElement('div');\r\n\t\t\t\tspacer.className = LAYER_CLASSES.buttonSpacer;\r\n\t\t\t\t$(spacer).appendTo(this.buttonNextLayer);\r\n\t\t\t\tspacer = document.createElement('div');\r\n\t\t\t\tspacer.className = LAYER_CLASSES.buttonSpacer;\r\n\t\t\t\t$(spacer).prependTo(this.buttonPrevLayer);\r\n\t\t\t}\r\n\t\t}\r\n\t\t/*if (this.options.labeling.button_arrows === 'vector' && !$('.' + LAYER_CLASSES.button + ' .' + LAYER_CLASSES.buttonIco).length) {\r\n\t\t\timport(/* webpackChunkName: \"DPButtonIcon\" */ /*'./DPButtonIcon').then(svgLoader => {\r\nconst svgString = svgLoader.default(LAYER_CLASSES.buttonIco);\r\nif (svgString) {\r\n\r\n$(svgString).appendTo(this.buttonNextLayer);\r\n$(svgString).prependTo(this.buttonPrevLayer);\r\n}\r\n});\r\n}\r\nelse {\r\nlet spacer = document.createElement('div');\r\nspacer.className = LAYER_CLASSES.buttonSpacer;\r\n$(spacer).appendTo(this.buttonNextLayer);\r\nspacer = document.createElement('div');\r\nspacer.className = LAYER_CLASSES.buttonSpacer;\r\n$(spacer).prependTo(this.buttonPrevLayer);\r\n}*/\r\n\t}\r\n\r\n\r\n\tinitLayers(highlightClass) {\r\n\r\n\t\t// Highlight\r\n\t\tthis.highlightLayer = document.createElement('div');\r\n\t\tthis.highlightLayer.className = highlightClass;\r\n\t\tthis.highlightLayer.setAttribute('role', 'presentation');\r\n\t\tthis.inHighlightLayerAnimation = new BulletsAnimation(\r\n\t\t\t'.' + highlightClass,\r\n\t\t\t'in-highlight-bullets-anim',\r\n\t\t\t[LAYER_CLASSES.rbAnim, `${LAYER_CLASSES.rbAnim}--in-highlight`], 3, 100);\r\n\r\n\t\tthis.mainElement.appendChild(this.highlightLayer);\r\n\r\n\t\t// Tooltip ref.\r\n\t\tthis.tooltipReferenceLayer = document.createElement('div');\r\n\t\tthis.tooltipReferenceLayer.className = LAYER_CLASSES.tooltipReference;\r\n\t\tthis.tooltipReferenceLayer.setAttribute('role', 'presentation');\r\n\t\tthis.mainElement.appendChild(this.tooltipReferenceLayer);\r\n\r\n\t\t// Tooltip\r\n\t\tthis.tooltipLayer = document.createElement('div');\r\n\t\tthis.actualizeTooltipMaxWidth();\r\n\t\tthis.tooltipLayer.className = LAYER_CLASSES.tooltip;\r\n\t\tthis.tooltipLayer.setAttribute('aria-label', i18n('aria-main', this.mainCfg.i18n));\r\n\t\tthis.tooltipLayer.setAttribute('aria-hidden', 'false');\r\n\t\tthis.tooltipLayer.setAttribute('role', 'dialog');\r\n\t\tthis.tooltipLayer.setAttribute('aria-describedby', 'dpit-tooltip-text');\r\n\r\n\t\tthis.tooltipReferenceLayer.appendChild(this.tooltipLayer);\r\n\r\n\t\t// Tooltip text\r\n\t\tthis.tooltipTextLayer = document.createElement('div');\r\n\t\tthis.tooltipTextLayer.className = LAYER_CLASSES.tooltipText;\r\n\t\tthis.tooltipTextLayer.id = 'dpit-tooltip-text';\r\n\t\tthis.tooltipLayer.appendChild(this.tooltipTextLayer);\r\n\r\n\r\n\t\t// Tooltip arrow\r\n\t\tthis.arrowLayer = document.createElement('div');\r\n\t\tthis.arrowLayer.className = LAYER_CLASSES.arrow;\r\n\t\tthis.arrowLayer.setAttribute('role', 'presentation');\r\n\t\t//this.tooltipLayer.appendChild(this.arrowLayer);\r\n\t\tthis.tooltipReferenceLayer.appendChild(this.arrowLayer);\r\n\r\n\t\t// Progress bar\r\n\t\tthis.progressLayer = document.createElement('div');\r\n\t\tthis.progressLayer.className = LAYER_CLASSES.progress;\r\n\t\tif (this.options.showProgress !== true) {\r\n\t\t\tthis.progressLayer.style.display = 'none';\r\n\t\t}\r\n\t\tthis.progressBarLayer = document.createElement('div');\r\n\t\tthis.progressBarLayer.className = LAYER_CLASSES.progressBar;\r\n\t\tthis.progressBarLayer.setAttribute('role', 'progress');\r\n\t\tthis.progressBarLayer.setAttribute('aria-valuemin', 0);\r\n\t\tthis.progressBarLayer.setAttribute('aria-valuemax', 100);\r\n\t\tthis.progressBarLayer.setAttribute('aria-valuenow', this.getProgressInPercent());\r\n\t\tthis.progressBarLayer.style.cssText = 'width:' + this.getProgressInPercent() + '%;';\r\n\t\tthis.progressLayer.appendChild(this.progressBarLayer);\r\n\t\tthis.tooltipLayer.appendChild(this.progressLayer);\r\n\r\n\t\t// Tooltip bullets\r\n\t\tthis.bulletsLayer = this.createBullets(\r\n\t\t\tLAYER_CLASSES.bullets,\r\n\t\t\tthis.options.showBullets,\r\n\t\t\ttrue,\r\n\t\t\t0,\r\n\t\t\tthis._bulletClickCallback\r\n\t\t);\r\n\t\tthis.actualizeBulletScrollBar();\r\n\t\tthis.tooltipLayer.appendChild(this.bulletsLayer);\r\n\r\n\t\t// Tooltip buttons\r\n\t\tthis.tooltipButtonsLayer = document.createElement('div');\r\n\t\tthis.tooltipButtonsLayer.className = LAYER_CLASSES.tooltipButtons;\r\n\t\tif (this.options.showButtons === false) {\r\n\t\t\tthis.tooltipButtonsLayer.style.display = 'none';\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tthis.tooltipButtonsLayer.setAttribute('role', 'navigation');\r\n\t\t\tthis.tooltipButtonsLayer.setAttribute('aria-label', i18n('aria-main', this.mainCfg.i18n));\r\n\t\t}\r\n\r\n\t\tthis.tooltipLayer.appendChild(this.tooltipButtonsLayer);\r\n\r\n\r\n\t\t//Tooltip number\r\n\t\tthis.numberLayer = document.createElement('div');\r\n\t\tthis.numberLayer.className = LAYER_CLASSES.number + ' ' + LAYER_CLASSES.hiddenByOpacityAndWidth;\r\n\t\tthis.tooltipReferenceLayer.appendChild(this.numberLayer);\r\n\r\n\r\n\t\tif (this.options.showStepNumbers !== true) {\r\n\t\t\t$(this.numberLayer).addClass(LAYER_CLASSES.hiddenByOpacityAndWidth);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.numberLayer.setAttribute('aria-label', i18n('aria-main', this.mainCfg.i18n) + ' - ' + i18n('aria-step-num', this.mainCfg.i18n));\r\n\t\t}\r\n\r\n\t\t//next button\r\n\t\tthis.buttonNextLayer = document.createElement('div');\r\n\t\tthis.buttonNextLayer.className = [LAYER_CLASSES.button, LAYER_CLASSES.buttonNext].join(' ');\r\n\t\t$(this.buttonNextLayer).on('click', this.goToNextStep.bind(this));\r\n\t\tthis._setAsButton(this.buttonNextLayer, this.options.labeling.nextLabel);\r\n\t\tthis.buttonNextLayer.appendChild(this.createButtonContent(this.options.labeling.nextLabel));\r\n\r\n\t\t//previous button\r\n\t\tthis.buttonPrevLayer = document.createElement('div');\r\n\t\tthis.buttonPrevLayer.className = [LAYER_CLASSES.button, LAYER_CLASSES.buttonPrev].join(' ');\r\n\t\t$(this.buttonPrevLayer).on('click', this.goToPreviousStep.bind(this));\r\n\t\tthis._setAsButton(this.buttonPrevLayer, this.options.labeling.prevLabel);\r\n\t\tthis.buttonPrevLayer.appendChild(this.createButtonContent(this.options.labeling.prevLabel));\r\n\r\n\t\t//skip button\r\n\t\tthis.buttonSkipLayer = document.createElement('div');\r\n\t\tthis.buttonSkipLayer.className = [LAYER_CLASSES.button, LAYER_CLASSES.buttonSkip].join(' ');\r\n\t\tthis._setAsButton(this.buttonSkipLayer, this.options.labeling.skipLabel);\r\n\t\tthis.buttonSkipLayer.innerHTML = this.options.labeling.skipLabel;\r\n\t\t$(this.buttonSkipLayer).on('click', this.onSkipButtonClick.bind(this));\r\n\t\tthis.tooltipButtonsLayer.appendChild(this.buttonSkipLayer);\r\n\r\n\t\t//in order to prevent displaying next/previous button always\r\n\t\tif (this.introItems.length >= 1) {\r\n\t\t\tthis.tooltipButtonsLayer.appendChild(this.buttonPrevLayer);\r\n\t\t\tthis.tooltipButtonsLayer.appendChild(this.buttonNextLayer);\r\n\t\t}\r\n\r\n\t\t$('html').on('scroll wheel DOMMouseScroll mousewheel touchmove', this.stopAutoScrollWhenUserAction.bind(this));\r\n\r\n\r\n\t\tthis.refreshStepNumber();\r\n\r\n\t\t// on layer init event\r\n\t\tthis.doAction(EVENTS.onInit);\r\n\t\tthis.loadIcons();\r\n\t}\r\n\r\n\tactualizeTooltipMaxWidth() {\r\n\t\tif (this.tooltipLayer) {\r\n\t\t\tif (this.options.max_tooltip_width\r\n\t\t\t\t&& !isNaN(this.options.max_tooltip_width)\r\n\t\t\t\t&& (!this.maxScreenArea || this.options.max_tooltip_width < this.maxScreenArea.width)\r\n\t\t\t\t&& !this.isStickyTheme()\r\n\t\t\t) {\r\n\t\t\t\tthis.tooltipLayer.style.maxWidth = this.options.max_tooltip_width + 'px';\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.tooltipLayer.style.maxWidth = '';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstopAutoScrollWhenUserAction() {\r\n\t\tthis.isUserScrolling = true;\r\n\t\tif (this.userInteractTimeout) clearTimeout(this.userInteractTimeout);\r\n\t\tthis.userInteractTimeout = setTimeout(() => {\r\n\t\t\tthis.isUserScrolling = false;\r\n\t\t}, 200);\r\n\t}\r\n\r\n\tonSkipButtonClick() {\r\n\t\tthis._exitIntro('skip');\r\n\t}\r\n\r\n\trefreshStepNumber(targetItem = null) {\r\n\t\tif (this.options.showStepNumbers === true && this.introItems.length > 1) {\r\n\t\t\t$(this.numberLayer).removeClass(LAYER_CLASSES.hiddenByOpacityAndWidth);\r\n\t\t\tthis.numberLayer.innerHTML = targetItem ? targetItem.step : '';\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$(this.numberLayer).addClass(LAYER_CLASSES.hiddenByOpacityAndWidth);\r\n\t\t}\r\n\t}\r\n\r\n\tgoToPreviousStep() {\r\n\t\tif (this._currentStep !== 0) {\r\n\t\t\tthis.previousStep();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgoToNextStep() {\r\n\t\tif (this.introItems.length - 1 !== this._currentStep) {\r\n\t\t\tthis.nextStep();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tisStickyThemeOnTop = () => {\r\n\t\treturn this.isStickyTheme() && $(this.tooltipLayer).hasClass(`${LAYER_CLASSES.tooltip}--on-top`);\r\n\t}\r\n\r\n\t_getStickyTooltipOffset = () => {\r\n\t\tif (this.isStickyTheme()) {\r\n\t\t\tconst tooltipEl = $(this.tooltipLayer);\r\n\t\t\tif (tooltipEl) {\r\n\t\t\t\tconst jBulletsEl = $(this.bulletsLayer);\r\n\t\t\t\tlet bulletsTop = null;\r\n\t\t\t\tlet bulletsHeight = null;\r\n\t\t\t\tif (jBulletsEl && jBulletsEl.length) {\r\n\t\t\t\t\tbulletsTop = getCssValFloat(jBulletsEl, 'top', 0);\r\n\t\t\t\t\tbulletsHeight = jBulletsEl.outerHeight();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (tooltipEl.hasClass(`${LAYER_CLASSES.tooltip}--on-top`)) {\r\n\t\t\t\t\treturn { top: tooltipEl.outerHeight(), bottom: (bulletsTop === null) ? 0 : bulletsTop };\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet top = 0;\r\n\t\t\t\t\tif (bulletsTop !== null && bulletsHeight !== null) {\r\n\t\t\t\t\t\ttop = bulletsTop + bulletsHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn { top: top, bottom: tooltipEl.outerHeight() };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { top: 0, bottom: 0 };\r\n\t}\r\n\r\n\r\n\t_getFlyingObjectsBB = (targetBB, tooltipBB, numberBB) => {\r\n\t\tif (this.isStickyTheme()) {\r\n\t\t\tif ($(this.numberLayer).hasClass(LAYER_CLASSES.numberOnTooltip)) return targetBB;\r\n\t\t\telse return targetBB; //DPBoundingBox.mergeBoundingBoxes(targetBB, numberBB);\r\n\t\t}\r\n\t\telse if (this.options.scrollTo === 'element') {\r\n\t\t\treturn DPBoundingBox.mergeBoundingBoxes(targetBB, numberBB);\r\n\t\t}\r\n\t\telse if (this.options.scrollTo === 'tooltip') {\r\n\t\t\treturn tooltipBB;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn DPBoundingBox.mergeBoundingBoxes(targetBB, tooltipBB, numberBB);\r\n\t\t}\r\n\t}\r\n\r\n\tgetBottomScrollOffset(flyingObjectsBB, targetBB, tooltipBB, winHeight, fixedTooltipOffset) {\r\n\t\tconst isStickyTheme = this.isStickyTheme();\r\n\t\tlet scrollOffsetY = flyingObjectsBB.top - ((winHeight / 2) - (flyingObjectsBB.height / 2));\r\n\t\tif (!isStickyTheme && flyingObjectsBB.height - 10 > winHeight) {\r\n\t\t\tif (tooltipBB.top > targetBB.bottom) {\r\n\t\t\t\tscrollOffsetY = flyingObjectsBB.bottom - winHeight + 20;\r\n\t\t\t}\r\n\t\t\telse if (tooltipBB.bottom < targetBB.top) {\r\n\t\t\t\tscrollOffsetY = flyingObjectsBB.top - 20;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isStickyTheme) {\r\n\r\n\t\t\tif (this.isStickyThemeOnTop()) {\r\n\t\t\t\tscrollOffsetY -= fixedTooltipOffset.bottom;\r\n\t\t\t} else {\r\n\t\t\t\tscrollOffsetY -= fixedTooltipOffset.top;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\treturn scrollOffsetY;\r\n\t}\r\n\r\n\r\n\t_getScrollOffset = (targetItem, omitNumberLayer = false) => {\r\n\t\tconst scrollOffset = {\r\n\t\t\tx: null,\r\n\t\t\ty: null\r\n\t\t};\r\n\t\tif (targetItem && targetItem.scrollTo !== 'off' && this.options.scrollToElement && !targetItem.isDummyElement && !targetItem.isFixedPos) {\r\n\t\t\tthis.actualizeNumberBB();\r\n\t\t\tconst numberBB = !omitNumberLayer && this.options.showStepNumbers === true ? this.numberLayerBB : null;\r\n\t\t\tthis.currentFlyingObjectBB = this._getFlyingObjectsBB(this.targetBB, this.tooltipBB, numberBB);\r\n\r\n\r\n\t\t\tif (this.docBB.height > this.winBB.height) {\r\n\t\t\t\tconst fixedTooltipOffset = this._getStickyTooltipOffset();\r\n\t\t\t\tconst winHeight = this.winBB.height - (fixedTooltipOffset.top + fixedTooltipOffset.bottom);\r\n\t\t\t\tscrollOffset.y = this.getBottomScrollOffset(this.currentFlyingObjectBB, this.targetBB, this.tooltipBB, winHeight, fixedTooltipOffset);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.docBB.width > this.winBB.width) {\r\n\t\t\t\tscrollOffset.x = this.currentFlyingObjectBB.left - ((this.winBB.width / 2) - (this.currentFlyingObjectBB.width / 2));\r\n\t\t\t\tif (this.currentFlyingObjectBB.width - 10 > this.winBB.width) {\r\n\t\t\t\t\tif (this.tooltipBB.left > this.targetBB.right) {\r\n\t\t\t\t\t\tscrollOffset.x = this.currentFlyingObjectBB.right - this.winBB.width + 20;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (this.tooltipBB.right < this.targetBB.left) {\r\n\t\t\t\t\t\tscrollOffset.x = this.currentFlyingObjectBB.left - 20;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn scrollOffset;\r\n\t}\r\n\r\n\r\n\t_calculateScrollTimeToTargetEl(targetOffset) {\r\n\r\n\t\tconst startOffset = { left: $(window).scrollLeft(), top: $(window).scrollTop() };\r\n\t\tconst dist = Math.max(Math.abs(startOffset.left - targetOffset.x), Math.abs(startOffset.top - targetOffset.y));\r\n\t\tconst res = Math.round(Math.min(this.options.maxScrollSpeedPerPageMs, Math.max(350, (dist / this.winBB.height) * this.options.scrollSpeedPerPageMs)));\r\n\t\t/*if (this.options.dpDebugEn) console.log({\r\n\t\t\t'Scroll time': res,\r\n\t\t\tmaxScrollSpeedPerPageMs: this.options.maxScrollSpeedPerPageMs,\r\n\t\t\tscrollSpeedPerPageMs: this.options.scrollSpeedPerPageMs\r\n\t\t});*/\r\n\t\treturn res;\r\n\t}\r\n\r\n\ttryUnlockActualizeTarget(processFce, processImmediatelyWhenReady = false) {\r\n\t\tif (!this.actualizeTargetLock) {\r\n\t\t\tif (processFce) {\r\n\t\t\t\tthis.lockActualizeTarget();\r\n\t\t\t\tprocessFce();\r\n\t\t\t\tthis.unlockActualizeTarget();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (processImmediatelyWhenReady) this.processFceToRun = processFce;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tunlockActualizeTarget() {\r\n\t\tthis.actualizeTargetLock = false;\r\n\t\tif (this.processFceToRun) {\r\n\t\t\tconst fceBkp = this.processFceToRun;\r\n\t\t\tthis.processFceToRun = null;\r\n\t\t\tthis.tryUnlockActualizeTarget(fceBkp, false);\r\n\t\t}\r\n\t}\r\n\r\n\tlockActualizeTarget() {\r\n\t\tthis.actualizeTargetLock = true;\r\n\t}\r\n\r\n\t_actualizeTargetPositionBasic(targetItem, processImmediatelyWhenReady = true, basicPositionOnly = false, forceShowLayersAfter = false, isFollowTarget = true) {\r\n\t\tif (this.highlightLayer && this.tooltipReferenceLayer) {\r\n\t\t\t//if (this.options.dpDebugEn) console.log(targetItem.element);\r\n\t\t\tthis.tryUnlockActualizeTarget(() => {\r\n\t\t\t\tthis.isTargetFollowingFired = true;\r\n\t\t\t\tthis.pauseFollowTarget();\r\n\t\t\t\tthis.scrollParentToTarget(targetItem?.element);\r\n\t\t\t\tthis.setTargetBBs(targetItem);\r\n\t\t\t\tthis.actualizeUserInteraction(targetItem);\r\n\t\t\t\tthis.setLayerPosition(this.highlightLayer, null, null, true);\r\n\t\t\t\tthis.setLayerPosition(this.tooltipReferenceLayer);\r\n\t\t\t\tthis.placeTooltip(targetItem/*, 2, {}, true*/); // do not iterate tooltip position\r\n\t\t\t\tthis.startFollowTarget();\r\n\t\t\t\tconst startStepIdx = this._currentStep;\r\n\r\n\r\n\t\t\t\tif (this.followTargetFinishedTimer) clearTimeout(this.followTargetFinishedTimer);\r\n\t\t\t\tif (!basicPositionOnly) {\r\n\t\t\t\t\tthis.followTargetFinishedTimer = setTimeout(() => {\r\n\t\t\t\t\t\tif (startStepIdx === this._currentStep) {\r\n\t\t\t\t\t\t\tif (this.options.dpDebugEn) {\r\n\t\t\t\t\t\t\t\tif (isFollowTarget) console.log(`---  STEP ${this._currentStep} FOLLOW TARGET: TARGET CHANGE POSITION: STOPPED ---`);\r\n\t\t\t\t\t\t\t\telse console.log(`---  STEP ${this._currentStep} RESIZE REACTION: STOPPED ---`);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.currentFlyingObjectBB) {\r\n\r\n\t\t\t\t\t\t\t\tconst flyingObjIntersectionWithScreen = DPBoundingBox.intersect(this.currentFlyingObjectBB, this.maxScreenArea);\r\n\t\t\t\t\t\t\t\tif (!flyingObjIntersectionWithScreen || DPBoundingBox.area(flyingObjIntersectionWithScreen) < DPBoundingBox.area(this.flyingObjectsBB)) {\r\n\t\t\t\t\t\t\t\t\tthis._actualizeTargetPosition(targetItem, processImmediatelyWhenReady);\r\n\t\t\t\t\t\t\t\t\tif (forceShowLayersAfter) {\r\n\t\t\t\t\t\t\t\t\t\tthis.showIntroLayers();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t} else if (forceShowLayersAfter) {\r\n\t\t\t\t\tthis.showIntroLayers();\r\n\t\t\t\t}\r\n\t\t\t}, processImmediatelyWhenReady);\r\n\t\t}\r\n\t}\r\n\r\n\t_actualizeTargetPosition(targetItem, processImmediatelyWhenReady = true) {\r\n\t\tif (this.highlightLayer && this.tooltipReferenceLayer) {\r\n\t\t\t//if (this.options.dpDebugEn) console.log(targetItem.element);\r\n\t\t\tthis.tryUnlockActualizeTarget(() => {\r\n\t\t\t\tthis.isTargetFollowingFired = true;\r\n\t\t\t\tthis.pauseFollowTarget();\r\n\r\n\t\t\t\tif (!this.actualizeTargetItem(targetItem, this.isCurrentBackward, false)) return; // if step should be skipped\r\n\t\t\t\tthis.scrollParentToTarget(targetItem?.element);\r\n\t\t\t\tthis.setTargetBBs(targetItem);\r\n\t\t\t\tthis.actualizeUserInteraction(targetItem);\r\n\t\t\t\tthis.setLayerPosition(this.highlightLayer, null, null, true);\r\n\t\t\t\tthis.setLayerPosition(this.tooltipReferenceLayer);\r\n\t\t\t\tthis.placeTooltip(targetItem);\r\n\t\t\t\tthis.startFollowTarget();\r\n\t\t\t\tconst startStepIdx = this._currentStep;\r\n\r\n\t\t\t\tif (this.followTargetFinishedTimer) clearTimeout(this.followTargetFinishedTimer);\r\n\t\t\t\tthis.followTargetFinishedTimer = setTimeout(() => {\r\n\t\t\t\t\tif (startStepIdx === this._currentStep) {\r\n\t\t\t\t\t\tif (this.options.dpDebugEn) console.log(`---  STEP ${this._currentStep} FOLLOW TARGET: TARGET CHANGE POSITION: STOPPED ---`);\r\n\t\t\t\t\t\tif (this.currentFlyingObjectBB) {\r\n\t\t\t\t\t\t\tif (!this.isScrolling) this.finalizeScrollAndPosition(true);\r\n\t\t\t\t\t\t\telse this.finalizeAfterScroll = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 100);\r\n\t\t\t}, processImmediatelyWhenReady);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfinalizeScrollAndPosition(isFromFollowTarget = false) {\r\n\t\tconst flyingObjectBBRel = DPBoundingBox.boundingBox2RelativeScrollPos(this.currentFlyingObjectBB, true);\r\n\t\tconst flyingObjIntersectionWithScreen = DPBoundingBox.intersect(flyingObjectBBRel, this.maxScreenArea);\r\n\t\tif (!flyingObjIntersectionWithScreen || DPBoundingBox.area(flyingObjIntersectionWithScreen) < DPBoundingBox.area(this.flyingObjectsBB)) {\r\n\t\t\tthis.refresh(isFromFollowTarget);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.tryToFinalizeStickyNumberPosition();\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\ttryToFinalizeStickyNumberPosition() {\r\n\t\tif (this.isStickyTheme()) {\r\n\t\t\tconst isTargetInsideMaxScreenArea = this.isElementInsideMaxScreenArea(this.currentTargetItem?.element);\r\n\t\t\tif (this.isTargetElementInsideMaxScreenArea !== isTargetInsideMaxScreenArea) {\r\n\t\t\t\tconst desiredNumberPos = {\r\n\t\t\t\t\tx: isTargetInsideMaxScreenArea ? 'right' : 'left',\r\n\t\t\t\t\ty: 'top',\r\n\t\t\t\t\tonTooltip: !isTargetInsideMaxScreenArea\r\n\t\t\t\t};\r\n\t\t\t\tlet scrollToPos = this._getScrollOffset(this.currentTargetItem, true);\r\n\t\t\t\tconst scrollToPosNotNull = {\r\n\t\t\t\t\tx: scrollToPos.x !== null ? scrollToPos.x : $(window).scrollLeft(),\r\n\t\t\t\t\ty: scrollToPos.y !== null ? scrollToPos.y : $(window).scrollTop(),\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis._placeNumberLayer(this.targetBB, scrollToPosNotNull, this.tooltipPos, desiredNumberPos);\r\n\t\t\t\t$(this.numberLayer).addClass(LAYER_CLASSES.gelatinePulse);\r\n\t\t\t}\r\n\t\t\tthis.isTargetElementInsideMaxScreenArea = isTargetInsideMaxScreenArea;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t_clearContrastAdjustment() {\r\n\t\t$('.' + LAYER_CLASSES.colorAdjusted).each((_, val) => {\r\n\t\t\t$(val).css('color', $(val).data('init-color'));\r\n\t\t\t$(val).removeClass(LAYER_CLASSES.colorAdjusted);\r\n\t\t});\r\n\t\tif (this.highlightLayer) this.highlightLayer.style.backgroundColor = '';\r\n\t}\r\n\r\n\t/**\r\n\t * To remove all show element(s)\r\n\t *\r\n\t * @api private\r\n\t * @method resetTargetElement\r\n\t */\r\n\tresetTargetElement = () => {\r\n\r\n\t\tif (this.currentTargetItem) {\r\n\t\t\tthis.updateIterateAfter(this.currentTargetItem, true);\r\n\t\t\t$(document.documentElement).removeClass('dpit-step-' + this.currentTargetItem.step);\r\n\t\t}\r\n\t\tthis._removePossiblyChangingPositionClassSafe(LAYER_CLASSES.targetParent, [\r\n\t\t\tLAYER_CLASSES.targetParentFixed,\r\n\t\t\tLAYER_CLASSES.targetParentFixedChild,\r\n\t\t\tLAYER_CLASSES.targetParentFixedCloser,\r\n\t\t\tLAYER_CLASSES.relativePosition].join(' ')\r\n\t\t);\r\n\t\tthis._resetInlineStyle();\r\n\r\n\t\tvar elms = document.querySelectorAll(`.${LAYER_CLASSES.target}`);\r\n\t\tthis._forEach(elms, (elm) => {\r\n\t\t\tconst isDummy = elm === this.targetDummy;\r\n\t\t\tif (elm.className && typeof elm.className === 'string') {\r\n\t\t\t\tconst classes = elm.className && elm.className.split(/\\s+/);\r\n\t\t\t\tif (classes && classes.length) {\r\n\t\t\t\t\tclasses.forEach((className) => {\r\n\t\t\t\t\t\tif (className.startsWith('dpit-')) {\r\n\t\t\t\t\t\t\t$(elm).removeClass(className);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$(elm).removeClass([LAYER_CLASSES.target, LAYER_CLASSES.targetBlockEvents, LAYER_CLASSES.relativePosition]);\r\n\t\t\t}\r\n\t\t\tif (isDummy) $(elm).addClass(LAYER_CLASSES.targetDummy);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * To set the show element\r\n\t * This function set a relative (in most cases) position and changes the z-index\r\n\t *\r\n\t * @api private\r\n\t * @method setTargetElement\r\n\t * @param {Object} targetElement\r\n\t */\r\n\tsetTargetElementClasses = (targetElement) => {\r\n\t\tvar parentElm;\r\n\r\n\t\tif (targetElement === this.targetDummy) return;\r\n\r\n\t\t// we need to add this show element class to the parent of SVG elements\r\n\t\t// because the SVG elements can't have independent z-index\r\n\t\tif (targetElement instanceof SVGElement) {\r\n\t\t\tparentElm = targetElement.parentNode;\r\n\r\n\t\t\twhile (targetElement.parentNode !== null) {\r\n\t\t\t\tif (!parentElm.tagName || parentElm.tagName.toLowerCase() === 'body') break;\r\n\r\n\t\t\t\tif (parentElm.tagName.toLowerCase() === 'svg') {\r\n\t\t\t\t\t$(parentElm).addClass(LAYER_CLASSES.target);\r\n\t\t\t\t\tthis._addPossiblyChangingPositionClassSafe($(parentElm), LAYER_CLASSES.relativePosition);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparentElm = parentElm.parentNode;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isCurrentStepItemInMobileMenu = this.isStepItemInMobileMenu(this.currentTargetItem);\r\n\t\t//const isCurrentStepItemInMobileMenu = false;\r\n\t\t$(targetElement).addClass(LAYER_CLASSES.target);\r\n\r\n\t\tlet currentElementPosition = $(targetElement).css('position');\r\n\t\tif (currentElementPosition !== 'absolute' &&\r\n\t\t\tcurrentElementPosition !== 'relative' &&\r\n\t\t\tcurrentElementPosition !== 'sticky' &&\r\n\t\t\tcurrentElementPosition !== 'fixed') {\r\n\t\t\t//change to new intro item\r\n\t\t\tthis._addPossiblyChangingPositionClassSafe($(targetElement), LAYER_CLASSES.relativePosition);\r\n\t\t}\r\n\r\n\r\n\r\n\t\tparentElm = targetElement.parentNode;\r\n\t\tlet hasFixedOrAbsParent = false;\r\n\t\tlet lastFixedParent = null;\r\n\t\tlet wasAnyFixedParent = false;\r\n\r\n\t\twhile (parentElm !== null) {\r\n\t\t\tif (!parentElm.tagName || parentElm.tagName.toLowerCase() === 'body') break;\r\n\r\n\t\t\t//fix The Stacking Context problem.\r\n\t\t\t//More detail: https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Understanding_z_index/The_stacking_context\r\n\t\t\tconst zIndex = $(parentElm).css('z-index');\r\n\t\t\tconst opacity = getCssValFloat(parentElm, 'opacity', 1);\r\n\t\t\tconst filter = $(parentElm).css('filter');\r\n\r\n\t\t\t//var transform =  $(parentElm).css('transform') ||  $(parentElm).css('-webkit-transform') ||  $(parentElm).css('-moz-transform') ||  $(parentElm).css('-ms-transform') ||  $(parentElm).css('-o-transform');\r\n\t\t\tconst transform = $(parentElm).css('transform');\r\n\t\t\tconst hasTransform = transform !== 'none' && transform !== undefined;\r\n\t\t\tconst hasDecreasedOpacity = opacity < 1;\r\n\r\n\t\t\tif (isCurrentStepItemInMobileMenu || /[0-9]+/.test(zIndex) || hasDecreasedOpacity || filter || hasTransform) {\r\n\t\t\t\tconst fixClasses = [LAYER_CLASSES.targetParent];\r\n\t\t\t\tconst cssPosition = $(parentElm).css('position');\r\n\t\t\t\tif (isCurrentStepItemInMobileMenu || hasTransform || hasDecreasedOpacity || cssPosition === 'fixed' || cssPosition === 'sticky') {\r\n\t\t\t\t\tfixClasses.push(LAYER_CLASSES.targetParentFixed);\r\n\t\t\t\t\tif (!wasAnyFixedParent) {\r\n\t\t\t\t\t\tfixClasses.push(LAYER_CLASSES.targetParentFixedCloser);\r\n\t\t\t\t\t\twasAnyFixedParent = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (isCurrentStepItemInMobileMenu || hasTransform || hasDecreasedOpacity || cssPosition === 'fixed' || cssPosition === 'sticky' || cssPosition === 'absolute') {\r\n\t\t\t\t\thasFixedOrAbsParent = true;\r\n\t\t\t\t\tlastFixedParent = parentElm;\r\n\t\t\t\t}\r\n\t\t\t\tthis._addPossiblyChangingPositionClassSafe($(parentElm), fixClasses.join(' '));\r\n\t\t\t}\r\n\t\t\tparentElm = parentElm.parentNode;\r\n\t\t}\r\n\t\tif (hasFixedOrAbsParent) {\r\n\t\t\t$(this.highlightLayer).addClass(`${LAYER_CLASSES.highlight}--fixed-pos`);\r\n\t\t\t// set all parents down to the LAYER_CLASSES.targetParentFixedChild\r\n\t\t\tif (lastFixedParent) {\r\n\t\t\t\t$(lastFixedParent).find(`.${LAYER_CLASSES.targetParent}`).addClass(LAYER_CLASSES.targetParentFixedChild);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$(this.highlightLayer).removeClass(`${LAYER_CLASSES.highlight}--fixed-pos`);\r\n\t\t}\r\n\t}\r\n\r\n\t_setInlineStyle(element, css) {\r\n\t\tif (element) {\r\n\r\n\t\t\t$(element).addClass('dpit-inline-style-adjusted');\r\n\t\t\tif (element.style.cssText) element.setAttribute('data-style-bkp', element.style.cssText);\r\n\t\t\tObject.keys(css).forEach(key => {\r\n\t\t\t\tif (element.style.cssText && element.style.cssText[element.style.cssText.length - 1] != ';') element.style.cssText += ';';\r\n\t\t\t\telement.style.cssText += `${key}:${css[key]};`;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_resetInlineStyle() {\r\n\r\n\t\t$('.dpit-inline-style-adjusted').each((index, element) => {\r\n\t\t\tconst styleText = $(element).data('style-bkp');\r\n\t\t\telement.style.cssText = styleText || '';\r\n\t\t\t$(element).removeClass('dpit-inline-style-adjusted');\r\n\t\t});\r\n\t}\r\n\r\n\t_addPossiblyChangingPositionClassSafe = (jElement, className) => {\r\n\t\tif (jElement.length && !jElement.hasClass(className)) {\r\n\t\t\tconst typePrefix = 'fix';\r\n\t\t\tthis.pauseFollowTarget();\r\n\t\t\tconst element = jElement[0];\r\n\t\t\tconst beforeOffset = jElement.offset();\r\n\r\n\t\t\tjElement.addClass(className);\r\n\r\n\t\t\tconst afterOffset = jElement.offset();\r\n\r\n\t\t\tlet setOffset = false;\r\n\t\t\tif (Math.abs(afterOffset.top - beforeOffset.top) > 1) {\r\n\t\t\t\tjElement.attr(`data-${typePrefix}-inline-top`, element.style.top);\r\n\t\t\t\tsetOffset = true;\r\n\t\t\t\t//jElement.css('top',beforeOffset.top);\r\n\t\t\t}\r\n\r\n\t\t\tif (Math.abs(afterOffset.left - beforeOffset.left) > 1) {\r\n\t\t\t\tjElement.attr(`data-${typePrefix}-inline-left`, element.style.left);\r\n\t\t\t\tsetOffset = true;\r\n\t\t\t\t//jElement.css('left',beforeOffset.left);\r\n\t\t\t}\r\n\t\t\tif (setOffset) {\r\n\t\t\t\tjElement.attr(`data-${typePrefix}-inline-position`, element.style.position);\r\n\t\t\t\tjElement.offset(beforeOffset);\r\n\t\t\t}\r\n\r\n\t\t\tthis.restoreFollowTarget();\r\n\t\t}\r\n\t}\r\n\r\n\t_restoreInlineStyleAfterAddingPossiblyChangingPositionClass = (element, typePrefix, stylePropName) => {\r\n\t\tconst attrName = `data-${typePrefix}-inline-${stylePropName}`;\r\n\t\tif (element.hasAttribute(attrName)) {\r\n\t\t\t$(element).css(stylePropName, element.getAttribute(attrName));\r\n\t\t\telement.removeAttribute(attrName);\r\n\t\t}\r\n\t\telse {\r\n\t\t\telement.removeAttribute(stylePropName);\r\n\t\t}\r\n\t}\r\n\r\n\t_removePossiblyChangingPositionClassSafe = (className, extraClassToRemove = '') => {\r\n\t\tconst typePrefix = 'fix';\r\n\t\tthis.pauseFollowTarget();\r\n\t\tvar fixedElements = document.querySelectorAll('.' + className);\r\n\t\tthis._forEach(fixedElements, (element) => {\r\n\t\t\t$(element).removeClass(className);\r\n\r\n\t\t\tif (extraClassToRemove) $(element).removeClass(extraClassToRemove);\r\n\t\t\tthis._restoreInlineStyleAfterAddingPossiblyChangingPositionClass(element, typePrefix, 'left');\r\n\t\t\tthis._restoreInlineStyleAfterAddingPossiblyChangingPositionClass(element, typePrefix, 'top');\r\n\t\t\tthis._restoreInlineStyleAfterAddingPossiblyChangingPositionClass(element, typePrefix, 'width');\r\n\t\t\tthis._restoreInlineStyleAfterAddingPossiblyChangingPositionClass(element, typePrefix, 'height');\r\n\t\t\tthis._restoreInlineStyleAfterAddingPossiblyChangingPositionClass(element, typePrefix, 'position');\r\n\t\t});\r\n\t\tthis.restoreFollowTarget();\r\n\t}\r\n\r\n\t/**\r\n\t* Iterates arrays\r\n\t*\r\n\t* @param {Array} arr\r\n\t* @param {Function} forEachFnc\r\n\t* @param {Function} completeFnc\r\n\t* @return {Null}\r\n\t*/\r\n\t_forEach = (arr, forEachFnc, completeFnc) => {\r\n\t\t// in case arr is an empty query selector node list\r\n\t\tif (arr) {\r\n\t\t\tfor (var i = 0, len = arr.length; i < len; i++) {\r\n\t\t\t\tforEachFnc(arr[i], i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (typeof (completeFnc) === 'function') {\r\n\t\t\tcompleteFnc();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Checks to see if target element (or parents) position is fixed or not\r\n\t *\r\n\t * @api private\r\n\t * @method isFixedPos\r\n\t * @param {Object} element\r\n\t * @returns Boolean\r\n\t */\r\n\tisFixedPos = (element) => {\r\n\t\tif (!element) return false;\r\n\t\tvar p = element.parentNode;\r\n\r\n\t\tif (!p || p.nodeName === 'HTML') {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif ($(element).css('position') === 'fixed') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn this.isFixedPos(p);\r\n\t}\r\n\r\n\r\n\t// targetElm can be body\r\n\taddOverlayLayer = (hidden = false, blurred = false) => {\r\n\r\n\t\tif (!this.overlayContainer) {\r\n\r\n\t\t\tthis.overlayContainer = document.createElement('div');\r\n\t\t\tthis.overlayContainer.className = classNames({\r\n\t\t\t\t[LAYER_CLASSES.overlayContainer]: true,\r\n\t\t\t\t[LAYER_CLASSES.hidden]: true\r\n\t\t\t});\r\n\r\n\t\t\tthis.overlayLayer = document.createElement('div');\r\n\t\t\tthis.overlayLayer.className = classNames({\r\n\t\t\t\t[LAYER_CLASSES.overlay]: true,\r\n\t\t\t\t[`${LAYER_CLASSES.overlay}--${LAYER_CLASSES.overlayBlurredModifier}`]: blurred\r\n\t\t\t});\r\n\r\n\t\t\tthis.overlayLayer.style.opacity = this.options.overlayOpacity;\r\n\t\t\tthis.overlayContainer.appendChild(this.overlayLayer);\r\n\t\t\tthis.overlayContainer.setAttribute('aria-hidden', 'true');\r\n\t\t\tthis.mainElement.appendChild(this.overlayContainer);\r\n\r\n\t\t\tif (!hidden) {\r\n\t\t\t\twindow.setTimeout(() => {\r\n\t\t\t\t\tthis.showOverlay();\r\n\t\t\t\t}, 10);\r\n\t\t\t}\r\n\t\t\tthis.overlayContainerTransitionDelayMs = getTransitionDurationMs(this.overlayContainer);\r\n\t\t\tthis.overlayTransitionDelayMs = getTransitionDurationMs(this.overlayLayer);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t* Find the nearest scrollable parent\r\n\t* copied from https://stackoverflow.com/questions/35939886/find-first-scrollable-parent\r\n\t*\r\n\t* @param Element element\r\n\t* @return Element\r\n\t*/\r\n\t_getScrollParent = (element) => {\r\n\t\tvar style = window.getComputedStyle(element);\r\n\t\tvar excludeStaticParent = (style.position === 'absolute');\r\n\t\tvar overflowRegex = /(auto|scroll)/;\r\n\r\n\t\tif (style.position === 'fixed') return document.body;\r\n\r\n\t\tfor (var parent = element; (parent = parent.parentElement);) {\r\n\t\t\tstyle = window.getComputedStyle(parent);\r\n\t\t\tif (excludeStaticParent && style.position === 'static') {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (overflowRegex.test(style.overflow + style.overflowY + style.overflowX)) {\r\n\t\t\t\t//if (this.options.dpDebugEn) console.log('_getScrollParent', parent, style.position, style.overflow, style.overflowY, style.overflowX);\r\n\t\t\t\treturn parent;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn document.body;\r\n\t}\r\n\r\n\tscrollParentToTarget = (element, animate = false, scrollInX = true, scrollInY = true, onlyWhenEjected = true, preferPositionOnTheEnd = false) => {\r\n\t\tif (element) {\r\n\t\t\t// scroll to element\r\n\t\t\tconst scrollContainer = this._getScrollParent(element);\r\n\t\t\tif (scrollContainer !== document.body) {\r\n\t\t\t\tif (this.options.dpDebugEn) console.log('Scroll parent: ' + scrollContainer);\r\n\t\t\t\t// target is within a scrollable element\t\r\n\t\t\t\tconst visibleContainerBB = scrollContainer.getBoundingClientRect();\r\n\t\t\t\tconst elementBB = DPBoundingBox.getElBoundingBox(element, false, true, null, visibleContainerBB.top - scrollContainer.scrollTop, visibleContainerBB.left - scrollContainer.scrollLeft);\r\n\t\t\t\tconst scrollToOffset = { left: scrollContainer.scrollLeft, top: scrollContainer.scrollTop };\r\n\r\n\t\t\t\tif (scrollInY && $(scrollContainer).hasScrollBar(false, true) && (!onlyWhenEjected || (elementBB.top <= scrollContainer.scrollTop || elementBB.right >= (scrollContainer.scrollTop + visibleContainerBB.height)))) {\r\n\t\t\t\t\tscrollToOffset.top = elementBB.top;\r\n\t\t\t\t\tif (1.5 * elementBB.height < visibleContainerBB.height) {\r\n\t\t\t\t\t\tif (preferPositionOnTheEnd) {\r\n\t\t\t\t\t\t\tscrollToOffset.top -= (visibleContainerBB.height - 1.5 * elementBB.height);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tscrollToOffset.top -= elementBB.height / 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (scrollInX && $(scrollContainer).hasScrollBar(true, false) && (!onlyWhenEjected || (elementBB.left <= scrollContainer.scrollLeft || elementBB.right >= (scrollContainer.scrollLeft + visibleContainerBB.width)))) {\r\n\t\t\t\t\tscrollToOffset.left = elementBB.left;\r\n\t\t\t\t\tif (1.5 * elementBB.width < visibleContainerBB.width) {\r\n\t\t\t\t\t\tif (preferPositionOnTheEnd) {\r\n\t\t\t\t\t\t\tscrollToOffset.left -= (visibleContainerBB.width - 1.5 * elementBB.width);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tscrollToOffset.left -= elementBB.width / 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// is change?\r\n\t\t\t\tif (scrollToOffset.left !== scrollContainer.scrollLeft || scrollToOffset.top !== scrollContainer.scrollTop) {\r\n\t\t\t\t\tif (animate) {\r\n\t\t\t\t\t\t$(scrollContainer).animate(\r\n\t\t\t\t\t\t\t{ scrollLeft: scrollToOffset.left, scrollTop: scrollToOffset.top },\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tduration: 100,\r\n\t\t\t\t\t\t\t\teasing: this.options.scrollEasing,\r\n\t\t\t\t\t\t\t\tcomplete: () => $(element).addClass(LAYER_CLASSES.bulletPulse),\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tscrollContainer.scrollLeft = scrollToOffset.left;\r\n\t\t\t\t\t\tscrollContainer.scrollTop = scrollToOffset.top;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t/*if (this.options.dpDebugEn) console.log('Scrolling inside parent container:', {\r\n\t\t\t\t\tparentPos: parentPos,\r\n\t\t\t\t\tchildPos: childPos,\r\n\t\t\t\t});*/\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetProgressInPercent = () => {\r\n\t\t// Steps are 0 indexed\r\n\t\tvar currentStep = parseInt((this._currentStep + 1), 10);\r\n\t\treturn ((currentStep / (this.introItems.length - this.getNotVisibleStepCnt())) * 100);\r\n\t}\r\n\r\n\tafterScrollOnNewTarget = (isFromFollowTarget, backward) => {\r\n\t\tthis.isScrolling = false;\r\n\t\tlet willBeRefreshed = false;\r\n\t\tif (this.finalizeAfterScroll) {\r\n\t\t\tthis.finalizeAfterScroll = false;\r\n\t\t\twillBeRefreshed = !this.finalizeScrollAndPosition();\r\n\t\t}\r\n\t\tif (this.tooltipReferenceLayer && !this.ending && !willBeRefreshed) {\r\n\t\t\tthis.actualizeStickyBullets();\r\n\t\t\t//this.actualizeBoardSizes();\r\n\t\t\t// is correctly scrolled to target element\r\n\t\t\t$(this.overlayLayer).css('opacity', this.options.overlayOpacity);\r\n\r\n\t\t\tconst isStickyTheme = this.isStickyTheme();\r\n\r\n\t\t\tconst isOnTop = $(this.mainElement).hasClass(`${LAYER_CLASSES.main}--on-top`);\r\n\r\n\t\t\tif (!isFromFollowTarget) {\r\n\t\t\t\tthis.doAction(EVENTS.afterStepChange, {\r\n\t\t\t\t\tisStickyTheme: isStickyTheme,\r\n\t\t\t\t\tisStickyThemeOnTop: isOnTop && isStickyTheme,\r\n\t\t\t\t\tbackward: backward,\r\n\t\t\t\t\tcurrentStepObj: this.stepObject4Hooks(this.currentTargetItem)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t/* To change the scroll of `window` after highlighting an element*/\r\n\t_scrollTo = (scrollToPos, isFromFollowTarget = false, backward = false) => {\r\n\t\tif (this.options.dpDebugEn) console.log('Scroll to: ', scrollToPos);\r\n\t\tlet isFlyingObjectInside = false;\r\n\t\tif (this.currentFlyingObjectBB) {\r\n\t\t\tconst currentFlyingObjectBBRel = DPBoundingBox.boundingBox2RelativeScrollPos(this.currentFlyingObjectBB);\r\n\t\t\tconst currentFlyingObjectBBRelArea = DPBoundingBox.area(currentFlyingObjectBBRel);\r\n\t\t\tconst intersection = DPBoundingBox.intersect(currentFlyingObjectBBRel, this.maxScreenArea);\r\n\t\t\tif (intersection && DPBoundingBox.area(intersection) === currentFlyingObjectBBRelArea) {\r\n\t\t\t\tisFlyingObjectInside = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ((scrollToPos.x !== null || scrollToPos.y !== null) && !((this.isUserScrolling || isFlyingObjectInside) && isFromFollowTarget)) {\r\n\r\n\t\t\tlet overlayOpacityAdjusted = false;\r\n\t\t\tlet bulletScrollBarActualized = false;\r\n\t\t\tlet triedToFinalizeStickyNumberPosition = false;\r\n\t\t\tconst duration = this.options.scrollDurationMsOverride >= 0 ? this.options.scrollDurationMsOverride : this._calculateScrollTimeToTargetEl(scrollToPos);\r\n\t\t\tif (duration > 1.5 * this.overlayTransitionDelayMs) {\r\n\t\t\t\t$(this.overlayLayer).css('opacity', this.options.overlayOpacityCoefWhenScroll * this.options.overlayOpacity);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\toverlayOpacityAdjusted = true;\r\n\t\t\t}\r\n\t\t\tconst scrollToCfg = {};\r\n\t\t\tif (scrollToPos.x !== null) scrollToCfg.scrollLeft = scrollToPos.x;\r\n\t\t\tif (scrollToPos.y !== null) scrollToCfg.scrollTop = scrollToPos.y;\r\n\t\t\tthis.isScrolling = true;\r\n\t\t\tthis.finalizeAfterScroll = true;\r\n\t\t\t$('html').animate(\r\n\t\t\t\tscrollToCfg,\r\n\t\t\t\t{\r\n\t\t\t\t\tduration: duration,\r\n\t\t\t\t\teasing: this.options.scrollEasing,\r\n\t\t\t\t\tcomplete: () => this.afterScrollOnNewTarget(isFromFollowTarget, backward),\r\n\t\t\t\t\tprogress: (_, __, remainingMs) => {\r\n\t\t\t\t\t\tif ((0.7 * remainingMs) <= this.overlayTransitionDelayMs) {\r\n\t\t\t\t\t\t\tif (!bulletScrollBarActualized) {\r\n\t\t\t\t\t\t\t\tbulletScrollBarActualized = true;\r\n\t\t\t\t\t\t\t\tthis.actualizeBulletScrollBar(true, backward);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!overlayOpacityAdjusted) {\r\n\t\t\t\t\t\t\t\toverlayOpacityAdjusted = true;\r\n\t\t\t\t\t\t\t\t$(this.overlayLayer).css('opacity', this.options.overlayOpacity);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!triedToFinalizeStickyNumberPosition) {\r\n\t\t\t\t\t\t\t\ttriedToFinalizeStickyNumberPosition = true;\r\n\t\t\t\t\t\t\t\tthis.tryToFinalizeStickyNumberPosition();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.actualizeBulletScrollBar(true, backward);\r\n\t\t\tthis.afterScrollOnNewTarget(isFromFollowTarget, backward);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tscrollToTargetItem = (targetItem, isFromFollowTarget = false, backward = false) => {\r\n\t\tconst scrollToPos = this._getScrollOffset(targetItem, false);\r\n\t\tthis._scrollTo(scrollToPos, isFromFollowTarget, backward);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Update placement of the intro objects on the screen\r\n\t * @api private\r\n\t */\r\n\trefresh = (isFromFollowTarget = false) => {\r\n\r\n\t\tif (this.currentTargetItem) {\r\n\t\t\tif (this.options.dpDebugEn) console.log(`-------------------  STEP REFRESH ${this.currentTargetItem.step} -------------------`);\r\n\t\t\tthis.showStepItem(this.currentTargetItem, true, false, isFromFollowTarget);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\t/**\r\n\t * Show an element on the page\r\n\t *\r\n\t * @api private\r\n\t * @method showStepItem\r\n\t * @param {Object} targetItem\r\n\t */\r\n\tshowStepItem = (targetItem, isRefresh = false, backward = false, isFromFollowTarget = false) => {\r\n\r\n\t\tif (!isRefresh || isFromFollowTarget) $('html').stop(true, false); // stop scroll animation\r\n\t\tlet waitMs = 0;\r\n\t\tif (this.onBeforeShowStepCallback instanceof Function) {\r\n\t\t\twaitMs = this.onBeforeShowStepCallback(this, targetItem, isRefresh);\r\n\t\t}\r\n\t\tthis.stopFollowTarget();\r\n\t\tif (waitMs > 0) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.mainThread(targetItem, isRefresh, backward, isFromFollowTarget);\r\n\t\t\t}, waitMs);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.mainThread(targetItem, isRefresh, backward, isFromFollowTarget);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tmainThread = (targetItem, isRefresh, backward = false, isFromFollowTarget = false) => {\r\n\t\tif (this.options.dpDebugEn) console.log(`-------------------  STEP ${targetItem.step} -------------------`);\r\n\t\tthis.tryUnlockActualizeTarget(() => {\r\n\t\t\tthis.currentFlyingObjectBB = null;\r\n\t\t\tthis.isCurrentBackward = backward;\r\n\t\t\tthis.actualizeBoardSizes();\r\n\t\t\tif (!this.actualizeTargetItem(targetItem, backward, !isFromFollowTarget && !isRefresh)) return; // if step should be skipped\r\n\r\n\t\t\tif (!isFromFollowTarget) this.reInitTarget(targetItem);\r\n\r\n\t\t\tthis.reInitLayers(false, targetItem);\r\n\t\t\tthis.scrollParentToTarget(targetItem?.element);\r\n\t\t\tthis.setTargetBBs(targetItem);\r\n\t\t\tthis.actualizeUserInteraction(targetItem);\r\n\t\t\tthis.refreshStepNumber(targetItem);\r\n\t\t\tthis.setTooltipContent(targetItem);\r\n\t\t\tthis.setLayerPosition(this.highlightLayer, null, null, true);\r\n\t\t\tthis.setLayerPosition(this.tooltipReferenceLayer);\r\n\t\t\tthis.setTargetElementClasses(targetItem.element);\r\n\t\t\tthis.fixTargetLowContrast(targetItem);\r\n\t\t\tthis.actualizeButtons();\r\n\t\t\tthis.actualizeBulletsNavig(targetItem);\r\n\t\t\tthis.actualizeAutoFocus(isRefresh);\r\n\t\t\tthis.actualizeProgressBar();\r\n\t\t\tthis.placeTooltip(targetItem);\r\n\t\t\tthis.startFollowTarget();\r\n\t\t\tthis.scrollToTargetItem(targetItem, isFromFollowTarget, backward);\r\n\t\t\tthis.showIntroLayers();\r\n\r\n\t\t}, true);\r\n\r\n\t}\r\n\r\n}\r\n","import replaceString from 'replace-string';\r\nimport urlJoin from 'url-join';\r\n\r\nexport default class DPIncUtils {\r\n\tconstructor(config) {\r\n\t\tif (config.dpDebugEn) console.log('DPIncUtils');\r\n\t}\r\n\r\n\tstatic isVariableUrl(url) {\r\n\t\tconst start = url.indexOf('{');\r\n\t\tconst stop = url.indexOf('}');\r\n\t\treturn start >= 0 && stop > start;\r\n\t}\r\n\r\n\tstatic fillUrlVariables(urlVars, url) {\r\n\t\tif (urlVars && url) {\r\n\t\t\tObject.keys(urlVars).forEach((varId) => {\r\n\t\t\t\turl = replaceString(url, `{${varId}}`, urlVars[varId]);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\tstatic simpleObjectToStr(obj, separator = '|', valueNameSeparator = '=') {\r\n\t\tlet res = '';\r\n\t\tif (obj) {\r\n\t\t\tObject.keys(obj).forEach((key, idx) => {\r\n\t\t\t\tif (idx != 0) res += separator;\r\n\t\t\t\tres += `${key}${valueNameSeparator}${obj[key]}`;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tstatic strToSimpleObject(str, separator = '|', valueNameSeparator = '=') {\r\n\t\tconst res = {};\r\n\t\tif (str) {\r\n\t\t\tconst items = str.split(separator);\r\n\t\t\tif (items) {\r\n\t\t\t\titems.forEach((item) => {\r\n\t\t\t\t\tconst parts = item.split(valueNameSeparator);\r\n\t\t\t\t\tif (parts && parts.length >= 2) {\r\n\t\t\t\t\t\tres[parts[0]] = parts[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tstatic getInfoIconHtml(className, text, title = '') {\r\n\t\tif (title) text = `<strong class=\"info-tip-title\">${title}</strong>${text}`;\r\n\t\treturn $(`<div class=\"${className}\"></div>`).attr('data-info-text', text);\r\n\t}\r\n\r\n\tstatic strLastPart(text, delimiter = '.', def = '') {\r\n\t\tconst dataParts = text.split(delimiter);\r\n\t\tif (dataParts && dataParts.length > 0) {\r\n\t\t\treturn dataParts[dataParts.length - 1];\r\n\t\t}\r\n\t\treturn def;\r\n\t}\r\n\r\n\tstatic strFirstPart(text, delimiter = '.', def = '') {\r\n\t\tconst dataParts = text.split(delimiter);\r\n\t\tif (dataParts && dataParts.length > 0) {\r\n\t\t\treturn dataParts[0];\r\n\t\t}\r\n\t\treturn def;\r\n\t}\r\n\r\n\tstatic rightTrimByString(url, delimiter = '.') {\r\n\r\n\t\tconst pos = url.indexOf(delimiter);\r\n\t\tif (pos >= 0) {\r\n\t\t\treturn url.substring(0, pos);\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\tstatic filterQMarkWithNoSlash(url) {\r\n\t\tconst qMarkIdx = url.indexOf('?');\r\n\t\tif (qMarkIdx >= 0) {\r\n\t\t\tif (qMarkIdx === 0 || url[qMarkIdx - 1] != '/') {\r\n\t\t\t\turl = `${url.substring(0, qMarkIdx)}/${url.substring(qMarkIdx)}`;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\tstatic forceQMarkWithoutSlash(url) {\r\n\t\tconst qMarkIdx = url.indexOf('?');\r\n\t\tif (qMarkIdx > 0 && url[qMarkIdx - 1] == '/') {\r\n\t\t\turl = url.substring(0, qMarkIdx - 1) + url.substring(qMarkIdx);\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\tstatic sanitizePossibleRelativeUrl(url, mainSiteUrl, forceSlashBeforeQMark = false) {\r\n\t\tif (url.startsWith('/')) {\r\n\t\t\turl = urlJoin(mainSiteUrl, url);\r\n\t\t\tif (forceSlashBeforeQMark) {\r\n\t\t\t\turl = DPIncUtils.filterQMarkWithNoSlash(url);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\tstatic absToRelativeUrl(url, mainSiteUrl) {\r\n\t\tif (mainSiteUrl && url.startsWith(mainSiteUrl)) {\r\n\t\t\turl = url.substring(mainSiteUrl.length);\r\n\t\t\tif (!url.startsWith('/')) url = `/${url}`;\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\tstatic removeURLParameter(url, parameter) {\r\n\t\t// prefer to use l.search if you have a location/link object\r\n\t\tconst urlparts = url.split('?');\r\n\t\tif (urlparts.length >= 2) {\r\n\t\t\tconst prefix = `${encodeURIComponent(parameter)}=`;\r\n\t\t\tconst pars = urlparts[1].split(/[&;]/g);\r\n\r\n\t\t\t// reverse iteration as may be destructive\r\n\t\t\tfor (let i = pars.length; i-- > 0;) {\r\n\t\t\t\t// idiom for string.startsWith\r\n\t\t\t\tif (pars[i].lastIndexOf(prefix, 0) !== -1) {\r\n\t\t\t\t\tpars.splice(i, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn urlparts[0] + (pars.length > 0 ? `?${pars.join('&')}` : '');\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\tstatic removeURLParameters(url, parameters) {\r\n\t\tlet paramKeys = parameters;\r\n\t\tif (!Array.isArray(parameters)) paramKeys = Object.keys(parameters);\r\n\t\tparamKeys.forEach((parameter) => {\r\n\t\t\turl = DPIncUtils.removeURLParameter(url, DPIncUtils.getDpUrlParamName(parameter, parameters));\r\n\t\t});\r\n\t\treturn url;\r\n\t}\r\n\r\n\tstatic unifyUrl(url, removeQuery = true, forceSlashBeforeQMark = false, removeHash = true, removeTrailingSlashes = true, prependSlash = false) {\r\n\t\tif (url) {\r\n\t\t\turl = DPIncUtils.strLastPart(url, '://', url);\r\n\t\t\tif (url && url.startsWith('www.')) url = url.substring(4);\r\n\t\t\tif (url && removeHash) url = DPIncUtils.strFirstPart(url, '#', url);\r\n\t\t\tif (url && removeQuery) {\r\n\t\t\t\turl = DPIncUtils.strFirstPart(url, '?', url);\r\n\t\t\t} else if (forceSlashBeforeQMark) {\r\n\t\t\t\turl = DPIncUtils.filterQMarkWithNoSlash(url);\r\n\t\t\t}\r\n\t\t\tif (url) {\r\n\t\t\t\tlet regExp = /\\/+$/;\r\n\t\t\t\tif (!removeTrailingSlashes) {\r\n\t\t\t\t\tregExp = /^\\/+/g;\r\n\t\t\t\t}\r\n\t\t\t\turl = url.replace(regExp, '');\r\n\t\t\t}\r\n\t\t\tif (url && prependSlash) {\r\n\t\t\t\turl = `/${url}`;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!url) {\r\n\t\t\turl = '/';\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (url.endsWith('/index.php')) {\r\n\t\t\t\turl = DPIncUtils.rightTrimByString(url, '/index.php');\r\n\t\t\t\t//$url = Str::separed_supplement_of_last_part( $url, '/index.php', $url );\r\n\t\t\t} else if (!removeQuery) {\r\n\t\t\t\turl = replaceString(url, '/index.php/?', '/');\r\n\t\t\t\tif (!forceSlashBeforeQMark) {\r\n\t\t\t\t\turl = replaceString(url, '/index.php?', '/');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\tstatic getDpUrlParamName(id, queryParamsDefinitions) {\r\n\t\tlet res = id;\r\n\t\tif (queryParamsDefinitions) res = queryParamsDefinitions[id];\r\n\t\treturn res;\r\n\t}\r\n\r\n\tstatic getDpUrlParam(id, queryParamsDefinitions, currentUrl = null, defVal = null) {\r\n\t\tlet res = defVal;\r\n\t\tconst key = DPIncUtils.getDpUrlParamName(id, queryParamsDefinitions);\r\n\t\tif (key) {\r\n\t\t\tif (!currentUrl) currentUrl = new URL(window.location);\r\n\t\t\tres = currentUrl.searchParams.get(key);\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tstatic setDpUrlParam(id, queryParamsDefinitions, val, postfixAmpersand = true) {\r\n\t\tlet res = '';\r\n\t\tconst key = DPIncUtils.getDpUrlParamName(id, queryParamsDefinitions);\r\n\t\tif (key) {\r\n\t\t\tres = key + '=' + val;\r\n\t\t\tif (postfixAmpersand) res += '&';\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tstatic buildDpQueryString(params, queryParamsDefinitions, prefix = '?', unmappedParams = null) {\r\n\t\tlet res = prefix;\r\n\t\tif (unmappedParams) {\r\n\t\t\tconst idsUm = Object.keys(unmappedParams);\r\n\t\t\tidsUm.forEach((id) => {\r\n\t\t\t\tif (unmappedParams[id] !== null && unmappedParams[id] !== undefined && unmappedParams[id] !== '')\r\n\t\t\t\t\tres += id + '=' + unmappedParams[id] + '&';\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tconst ids = Object.keys(params);\r\n\t\t\tids.forEach((id) => {\r\n\t\t\t\tif (params[id] !== null && params[id] !== undefined && params[id] !== '')\r\n\t\t\t\t\tres += DPIncUtils.setDpUrlParam(id, queryParamsDefinitions, params[id]);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (res && res[res.length - 1] == '&') res = res.substr(0, res.length - 1);\r\n\t\tif (res == prefix) res = '';\r\n\t\treturn res;\r\n\t}\r\n\r\n\tstatic decodeStepParamAdvancedVal(value, paramName, stepDefs, mainValOnlyForSimpleVal = true, onlyValForExtProps = false) {\r\n\t\tconst stepDef = stepDefs?.[paramName];\r\n\t\tconst extCfg = stepDef?.ext;\r\n\t\tlet res = {\r\n\t\t\tval: value ?? stepDef?.defMain,\r\n\t\t\text: {}\r\n\t\t};\r\n\t\tif (value?.startsWith('base64__') || extCfg) {\r\n\t\t\tlet dataObj = null;\r\n\t\t\tif (value?.startsWith('base64__')) {\r\n\t\t\t\tconst dataObjStr = atob(value.substr(8));\r\n\t\t\t\tdataObj = dataObjStr ? JSON.parse(dataObjStr) : null;\r\n\t\t\t\tres.val = dataObj?.val ?? stepDef?.defMain;\r\n\t\t\t}\r\n\t\t\tif (extCfg) {\r\n\t\t\t\tObject.keys(extCfg).forEach(id => {\r\n\t\t\t\t\tif (onlyValForExtProps) {\r\n\t\t\t\t\t\tres.ext[id] = dataObj?.ext?.[id] ?? extCfg[id]?.def;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tres.ext[id] = {\r\n\t\t\t\t\t\t\t...extCfg[id],\r\n\t\t\t\t\t\t\tval: dataObj?.ext?.[id] ?? extCfg[id]?.def\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t} else if (mainValOnlyForSimpleVal) {\r\n\t\t\tres = value;\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tstatic encodeStepParamAdvancedVal(value, paramName, stepDefs) {\r\n\t\tconst extCfg = stepDefs?.[paramName]?.ext;\r\n\t\treturn extCfg ? 'base64__' + btoa(JSON.stringify(value)) : value;\r\n\t}\r\n\r\n\tstatic initStepParams(stepDefinitions) {\r\n\t\tconst res = {};\r\n\t\tObject.keys(stepDefinitions).forEach(paramName => {\r\n\t\t\tlet mainVal = '';\r\n\t\t\tif (stepDefinitions[paramName]) {\r\n\t\t\t\tmainVal = stepDefinitions[paramName].def || '';\r\n\t\t\t\tif (stepDefinitions[paramName].ext) {\r\n\t\t\t\t\tlet extVals = {};\r\n\t\t\t\t\tObject.keys(stepDefinitions[paramName].ext).forEach(extName => {\r\n\t\t\t\t\t\textVals[extName] = stepDefinitions[paramName].ext[extName].def;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tmainVal = {\r\n\t\t\t\t\t\tval: mainVal,\r\n\t\t\t\t\t\text: extVals\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tres[paramName] = mainVal;\r\n\t\t});\r\n\t\treturn res;\r\n\t}\r\n\r\n\tstatic getNthStr(idx, supEnabled = false) {\r\n\t\tif (idx !== false && !isNaN(idx)) {\r\n\t\t\tlet supStart = '';\r\n\t\t\tlet supEnd = '';\r\n\t\t\tif (supEnabled) {\r\n\t\t\t\tsupStart = '<sup>';\r\n\t\t\t\tsupEnd = '</sup>';\r\n\t\t\t}\r\n\t\t\tlet res = '';\r\n\t\t\tswitch (idx) {\r\n\t\t\t\tcase 1: res = `1${supStart}st${supEnd}`; break;\r\n\t\t\t\tcase 2: res = `2${supStart}nd${supEnd}`; break;\r\n\t\t\t\tcase 3: res = `3${supStart}rd${supEnd}`; break;\r\n\t\t\t\tdefault: res = `${idx}${supStart}th${supEnd}`; break;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n\r\n\tstatic textStylesIsHOrPOption($key) {\r\n\t\treturn $key.length >= 3 && ($key[0] === 'p' && $key[1] === '_' || $key[0] === 'h' && $key[2] === '_');\r\n\t}\r\n\r\n\tstatic textStylesIsFontFamilyVal($key) {\r\n\t\treturn ['p_font', 'h_font', 'btn_font'].includes($key);\r\n\t}\r\n\r\n\tstatic setMobileSizeCoef(rootDivEl, textStylesCfg, mobileBreakPoint = -1) {\r\n\t\tif (textStylesCfg) {\r\n\t\t\tconst mobSizeCoef = (mobileBreakPoint > 0 && ($(window).width() <= mobileBreakPoint || $(window).height() <= mobileBreakPoint)) ? textStylesCfg.mobile_size_coef / 100 : 1;\r\n\t\t\trootDivEl.style.setProperty('--font-size-coef', mobSizeCoef * textStylesCfg.all_in_1_size_coef / 100);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic setTextStyles(rootDivEl, textStylesCfg, mobileBreakPoint = -1) {\r\n\r\n\r\n\t\tif (textStylesCfg && rootDivEl /*&& textStylesCfg.see_advanced_text_styles*/) {\r\n\t\t\tDPIncUtils.setMobileSizeCoef(rootDivEl, textStylesCfg, mobileBreakPoint);\r\n\t\t\tconst text_styles = { ...textStylesCfg };\r\n\t\t\tconst font_size_unit = text_styles.font_size_unit ?? 'em';\r\n\t\t\tconst cssVariables = [];\r\n\r\n\t\t\tObject.keys(text_styles).forEach(propName => {\r\n\t\t\t\tif (this.textStylesIsFontFamilyVal(propName)) {\r\n\t\t\t\t\tcssVariables[`--${propName}`] = (text_styles[propName] || text_styles[propName] == '0') ? text_styles[propName] : 'inherit';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (text_styles.p_font_size || text_styles.p_font_size === '0') {\r\n\t\t\t\tcssVariables['--p_font_size'] = 'calc(' + text_styles.p_font_size + font_size_unit + '*var(--font-size-coef))';\r\n\t\t\t\tif (text_styles.p_mb || text_styles.p_mb === '0') {\r\n\t\t\t\t\tcssVariables['--p_mb'] = 'calc(' + (text_styles.p_mb / 100) + '*' + cssVariables['--p_font_size'] + ')';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (text_styles.h2_font_size || text_styles.h2_font_size == 0 && text_styles.h5_font_size || text_styles.h5_font_size == 0) {\r\n\t\t\t\tconst unit = (text_styles.h2_font_size - text_styles.h5_font_size) / 4;\r\n\t\t\t\tfor (let i = 1; i <= 6; i++) {\r\n\t\t\t\t\tconst unitCnt = i - 2;\r\n\t\t\t\t\tcssVariables[`--h${i}_font_size`] = 'calc(' + (text_styles.h2_font_size - unitCnt * unit) + font_size_unit + '*var(--font-size-coef))';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (text_styles.h2_mb || text_styles.h2_mb == 0 && text_styles.h5_mb || text_styles.h5_mb == 0) {\r\n\t\t\t\tconst unit = (text_styles.h2_mb - text_styles.h5_mb) / 4;\r\n\t\t\t\tfor (let i = 1; i <= 6; i++) {\r\n\t\t\t\t\tconst unitCnt = i - 2;\r\n\t\t\t\t\tconst percentVal = Math.round(10 * (text_styles.h2_mb - unitCnt * unit)) / 10;\r\n\t\t\t\t\tcssVariables[`--h${i}_mb`] = 'calc(' + (percentVal / 100) + '*' + cssVariables[`--h${i}_font_size`] + ')';\r\n\t\t\t\t\tif (i === 2) cssVariables['--dp_unit'] = 'calc(' + (percentVal * 1.3 /*lineheight*/ / 1000 /* smaller unit */) + '*' + cssVariables[`--h${i}_font_size`] + ')';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tObject.keys(cssVariables).forEach(propName => {\r\n\t\t\t\trootDivEl.style.setProperty(propName, cssVariables[propName]);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tstatic loadBuilder = (mainCfg, instanceCreatorFce) => {\r\n\t\tif (mainCfg.dpDebugEn) console.log('builder config:', mainCfg);\r\n\t\tconst currentUrl = new URL(window.location);\r\n\t\tconst queryParamsDefs = mainCfg.queryParamsDefs;\r\n\t\tconst tourId = DPIncUtils.getDpUrlParam('dp_qp_tour_id', queryParamsDefs, currentUrl);\r\n\t\tconst createNew = DPIncUtils.getDpUrlParam('dp_qpb_create_new', queryParamsDefs, currentUrl);\r\n\t\tconst builderMode = DPIncUtils.getDpUrlParam('dp_qpb_builder_mode', queryParamsDefs, currentUrl);\r\n\t\tif ((mainCfg.tours && mainCfg.tours.length) || builderMode === '3') {\r\n\t\t\tconst mainCfgProcessed = { ...mainCfg };\r\n\t\t\tdelete mainCfgProcessed.tours;\r\n\t\t\tmainCfgProcessed.builderOrigin = DPIncUtils.getDpUrlParam('dp_qpb_builder_origin', queryParamsDefs, currentUrl);\r\n\t\t\tmainCfgProcessed.builderMode = builderMode;\r\n\t\t\tmainCfgProcessed.originHashId = DPIncUtils.getDpUrlParam('dp_qpb_origin_el_id', queryParamsDefs, currentUrl);\r\n\t\t\tmainCfgProcessed.triggerId = DPIncUtils.getDpUrlParam('dp_qp_trigger_id', queryParamsDefs, currentUrl) || 0;\r\n\t\t\tmainCfgProcessed.initState = DPIncUtils.getDpUrlParam('dp_qpb_init_state', queryParamsDefs, currentUrl);\r\n\t\t\tmainCfgProcessed.inNewWindow = DPIncUtils.getDpUrlParam('dp_qpb_in_new_window', queryParamsDefs, currentUrl) === '1';\r\n\t\t\tmainCfgProcessed.mobileAltStepMode = DPIncUtils.getDpUrlParam('dp_qpb_mobile_alt_step_mode', queryParamsDefs, currentUrl);\r\n\t\t\tconst delay = mainCfgProcessed.mobileAltStepMode === 'mobile_menu' ? 500 : 0;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (builderMode === '3') {\r\n\t\t\t\t\tinstanceCreatorFce(mainCfgProcessed, null);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmainCfg.tours.forEach((tourCfg) => {\r\n\t\t\t\t\t\tif ((createNew && tourCfg.createNew) || tourCfg.tourId == tourId) {\r\n\t\t\t\t\t\t\tinstanceCreatorFce(mainCfgProcessed, tourCfg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}, delay);\r\n\t\t}\r\n\t};\r\n}\r\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}"],"sourceRoot":""}