/*!
 * 
 * Intro Tour Tutorial
 * 
 * @author [object Object]
 * @version 5.4.1
 * @link http://www.gnu.org/licenses/gpl-2.0.txt
 * @license GPL-2.0+
 * 
 * Copyright (c) 2023 [object Object]
 * 
 * This plugin is released under GPL-2.0+ license to be included in wordpres.org plugin repository
 * 
 * Compiled with the help of https://wpack.io
 * A zero setup Webpack Bundler Script for WordPress
 */
(window.wpackiodpIntroToursmainJsonp=window.wpackiodpIntroToursmainJsonp||[]).push([[13],{11:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var a=i(14);var n=i(21);function o(t){return function(t){if(Array.isArray(t))return Object(a.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Object(n.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},14:function(t,e,i){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}i.d(e,"a",(function(){return a}))},168:function(t,e,i){i(15),t.exports=i(173)},169:function(t,e,i){var a,n,o;
/*!
	autosize 4.0.4
	license: MIT
	http://www.jacklmoore.com/autosize
*/n=[t,e],void 0===(o="function"==typeof(a=function(t,e){"use strict";var i,a,n="function"==typeof Map?new Map:(i=[],a=[],{has:function(t){return i.indexOf(t)>-1},get:function(t){return a[i.indexOf(t)]},set:function(t,e){-1===i.indexOf(t)&&(i.push(t),a.push(e))},delete:function(t){var e=i.indexOf(t);e>-1&&(i.splice(e,1),a.splice(e,1))}}),o=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){o=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function l(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!n.has(t)){var e,i=null,a=null,l=null,r=function(){t.clientWidth!==a&&u()},s=function(e){window.removeEventListener("resize",r,!1),t.removeEventListener("input",u,!1),t.removeEventListener("keyup",u,!1),t.removeEventListener("autosize:destroy",s,!1),t.removeEventListener("autosize:update",u,!1),Object.keys(e).forEach((function(i){t.style[i]=e[i]})),n.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",s,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",u,!1),window.addEventListener("resize",r,!1),t.addEventListener("input",u,!1),t.addEventListener("autosize:update",u,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",n.set(t,{destroy:s,update:u}),"vertical"===(e=window.getComputedStyle(t,null)).resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),i="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(i)&&(i=0),u()}function c(e){var i=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=i,t.style.overflowY=e}function d(){if(0!==t.scrollHeight){var e=function(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}(t),n=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+i+"px",a=t.clientWidth,e.forEach((function(t){t.node.scrollTop=t.scrollTop})),n&&(document.documentElement.scrollTop=n)}}function u(){d();var e=Math.round(parseFloat(t.style.height)),i=window.getComputedStyle(t,null),a="content-box"===i.boxSizing?Math.round(parseFloat(i.height)):t.offsetHeight;if(a<e?"hidden"===i.overflowY&&(c("scroll"),d(),a="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==i.overflowY&&(c("hidden"),d(),a="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),l!==a){l=a;var n=o("autosize:resized");try{t.dispatchEvent(n)}catch(t){}}}}function r(t){var e=n.get(t);e&&e.destroy()}function s(t){var e=n.get(t);e&&e.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(t){return t}).destroy=function(t){return t},c.update=function(t){return t}):((c=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],(function(t){return l(t)})),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],r),t},c.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t}),e.default=c,t.exports=e.default})?a.apply(e,n):a)||(t.exports=o)},17:function(t,e,i){"use strict";window.DpitHooks||(window.DpitHooks={}),DpitHooks.actions=DpitHooks.actions||{},DpitHooks.filters=DpitHooks.filters||{},DpitHooks.init=function(t){DpitHooks.dpDebugEn=t,t&&console.log("DpitHooks.init")},DpitHooks.addAction=function(t,e,i){void 0===i&&(i=10),DpitHooks.actions[t]=DpitHooks.actions[t]||[],DpitHooks.actions[t].push({priority:i,callback:e})},DpitHooks.addFilter=function(t,e,i){void 0===i&&(i=10),DpitHooks.filters[t]=DpitHooks.filters[t]||[],DpitHooks.filters[t].push({priority:i,callback:e})},DpitHooks.removeAction=function(t,e){DpitHooks.actions[t]=DpitHooks.actions[t]||[],DpitHooks.actions[t].forEach((function(i,a){i.callback===e&&DpitHooks.actions[t].splice(a,1)}))},DpitHooks.removeFilter=function(t,e){DpitHooks.filters[t]=DpitHooks.filters[t]||[],DpitHooks.filters[t].forEach((function(i,a){i.callback===e&&DpitHooks.filters[t].splice(a,1)}))},DpitHooks.doAction=function(t,e){var i=[];DpitHooks.dpDebugEn&&console.log("API action - Tag:",t,", Subscribed count:",DpitHooks.actions[t]?DpitHooks.actions[t].length:0,", Args:",e),void 0!==DpitHooks.actions[t]&&DpitHooks.actions[t].length>0&&(DpitHooks.actions[t].forEach((function(t){i[t.priority]=i[t.priority]||[],i[t.priority].push(t.callback)})),i.forEach((function(t){t.forEach((function(t){t(e)}))})))},DpitHooks.applyFilters=function(t,e,i){var a=[],n=e;return DpitHooks.dpDebugEn&&console.log("API filter - Tag:",t,", Subscribed count:",DpitHooks.filters[t]?DpitHooks.filters[t].length:0,", Args:",i),void 0!==DpitHooks.filters[t]&&DpitHooks.filters[t].length>0&&(DpitHooks.filters[t].forEach((function(t){a[t.priority]=a[t.priority]||[],a[t.priority].push(t.callback)})),a.forEach((function(t){t.forEach((function(t){n=t(n,i)}))}))),n},e.a=DpitHooks},173:function(t,e,i){"use strict";i.r(e);var a=i(0),n=i(3),o=i(2),l=i(26),r=i.n(l),s=i(28),c=i.n(s),d=i(12),u=i.n(d),f=i(20),h=i(23),p=function(){function t(e){var i=this;Object(n.a)(this,t),Object(a.a)(this,"adjustReloadButtonsClickAbility",(function(){i.checkRelatedPostsUrlForButtonsClickability(),i.config.isPRO?($(document).on("mouseup",'.acf-field[data-name="global_start_at_all_pages"] .acf-switch',(function(){setTimeout((function(){i.checkRelatedPostsUrlForButtonsClickability()}),100)})),$(document).on("mouseup",'.acf-field[data-name="url_vars_enabled"] .acf-switch',(function(){setTimeout((function(){i.checkRelatedPostsUrlForButtonsClickability()}),100)}))):$(document).on("change",'.acf-field[data-name="intro_trigger"] .acf-field[data-name="intro_related_posts"] .select2-hidden-accessible',(function(){setTimeout(i.checkRelatedPostsUrlForButtonsClickability,100)}))})),Object(a.a)(this,"checkRelatedPostsUrlForButtonsClickability",(function(){Object(h.a)(i.config.isPRO,i.config.siteUrl)})),Object(a.a)(this,"setPostTransient",(function(t,e,a,n,o){var l=$("#"+e),s={name:t,expirationS:o,transientData:{postId:n,redirectQueryString:a,isGlobalStartAtAllPagesSet:Object(h.c)()?1:0}};i.bulletsAnimation[e].createAndRun(),l.addClass("in-process"),r.a.post(u()(i.config.restApiUrl,"dpintrotours/v1/set-transient"),s,{headers:{"X-WP-Nonce":i.config.nonces.wp_rest}}).then((function(){$("#publishing-action #publish").trigger("click")})).catch((function(t){console.log(new c.a(t)),l.removeClass("in-process"),i.bulletsAnimation[e].destroy()}))})),e.dpDebugEn&&console.log("DPTourEditCTAs"),this.config=e,this.bulletsAnimation=[],this.insertConfigStepsVisuallyButton(),$('.acf-field-group[data-name="intro_trigger"]').attr("id","dp-trigger-config-group"),this.addTriggerSelectorButton("intro_trigger",0),this.config.isPRO&&this.addTriggerSelectorButton("intro_trigger_2",1),$("#edit-slug-box strong").text(this.config.i18n.permalink_title),this.adjustReloadButtonsClickAbility(),$('.acf-field[data-name="url_vars_examples"] textarea').on("click",(function(){Object(h.d)()&&i.getRelatedPostsJEl().trigger("click")})),this.printTourId(),setTimeout((function(){return Object(h.f)(i.config.queryParamsDefs)}),300)}return Object(o.a)(t,[{key:"printTourId",value:function(){$("#edit-slug-box").append("<strong>".concat(this.config.i18n.tour_id,': </strong><span class="dpit-tour-id">').concat(this.config.tourId,"</span>"))}},{key:"initMultipleChoiceSelectLongTouch",value:function(){$(".select2-selection__choice__remove").on("touchend",(function(t){var e=$(t.target).closest("li");e.length&&$(e[0]).remove()}))}},{key:"insertConfigStepsVisuallyButton",value:function(){var t=this,e=Object(h.b)(this.config.queryParamsDefs,this.config.tourId,1,"dp-step-table","admin"),i='<div class="dpit-admin-action">\n    <div id="dp-config-steps-vis-btn" role="button" class="dpit-admin-btn dpit-admin-btn-for-reload dpit-admin-action__btn">\n        <span class="dpit-admin-btn__text">'.concat(this.config.i18n.configure_steps_visually,'</span>\n        <span class="dpit-admin-btn__inactive-text">').concat(this.config.isPRO?this.config.i18n.set_first_step_url_PRO:this.config.i18n.set_first_step_url_FREE,'</span>\n        <span class="dpit-admin-btn__inactive-text-2">').concat(this.config.i18n.set_example_vars_first,'</span>\n    </div>\n    <div class="dp-or-set-manually">~ ').concat(this.config.i18n.or_set_adjust_man_in_tab," ~</div>\n</div>");$('.acf-field-table[data-name="intro_steps"] .acf-label').append(i),$('.acf-field-table[data-name="intro_steps"] .acf-table-table').attr("id","dp-step-table"),this.bulletsAnimation["dp-config-steps-vis-btn"]=new f.a("#dp-config-steps-vis-btn","dpselectelbuttonanimation",["dpit-admin-btn__bullets"],8,100),$("#dp-config-steps-vis-btn").on("click",(function(i){$("#dp-config-steps-vis-btn").hasClass("inactive")?t.scrollToRelatedPostsEl():($(i.target).data("href"),t.setPostTransient("dpintro_builder_transient","dp-config-steps-vis-btn",e,t.config.tourId,30))}))}},{key:"keyboardKeyCodeInput",value:function(){$(".acf-field--key-code input").on("keydown",(function(t){t.preventDefault(),t.stopPropagation(),$(t.target).val(t.keyCode)}))}},{key:"getRelatedPostsJEl",value:function(){var t=this.config.isPRO?'.acf-field-table[data-name="intro_steps"] .acf-table-table .acf-table-body-row:nth-child(3) .acf-table-body-cell--link':'.acf-field[data-name="intro_trigger"] .acf-field[data-name="intro_related_posts"]';return $(t)}},{key:"scrollToRelatedPostsEl",value:function(){Object(h.e)(this.getRelatedPostsJEl(),!1,this.config.isPRO)}},{key:"getTriggerButtonId",value:function(t,e){return"".concat(t,"_dp-select-trigger-btn_").concat(e)}},{key:"addTriggerSelectorButton",value:function(t,e){var i=this,a=function(t,e){"custom_selector"==t.val()?$("#".concat(e)).fadeIn():$("#".concat(e)).fadeOut()};if($('.acf-field[data-name="'.concat(t,'"]')).length){var n="dp-select-trigger_".concat(e),o="".concat(n,"_input"),l=$('.acf-field[data-name="'.concat(t,'"] .acf-field[data-name="intro_trigger_selector"] .acf-input')),r='.acf-field[data-name="'.concat(t,'"] .acf-field[data-name="trigger_object"] input');l.attr("id",o),$('.acf-field[data-name="'.concat(t,'"] .acf-field[data-name="intro_trigger_selector"]')).attr("id");var s=Object(h.b)(this.config.queryParamsDefs,this.config.tourId,2,o,"admin",e),c=this.getTriggerButtonId(t,e),d='<div id="'.concat(n,'" class="dp-select-trigger">\n    <div id="').concat(c,'" role="button" class="dpit-admin-btn dpit-admin-btn--trigger dpit-admin-btn-for-reload">\n        <span class="dpit-admin-btn__text">').concat(this.config.i18n.set_trigger_selector_visually,'</span>\n        <span class="dpit-admin-btn__inactive-text">').concat(this.config.isPRO?this.config.i18n.set_first_step_url_PRO:this.config.i18n.set_first_step_url_FREE,'</span>\n        <span class="dpit-admin-btn__inactive-text-2">').concat(this.config.i18n.set_example_vars_first,'</span>\n    </div>\n    <div class="dp-or-set-manually">~ ').concat(this.config.i18n.or_set_man," ~</div>\n</div>");l.before(d),a($(r+":checked"),n),$(r).on("change",(function(t){a($(t.target),n)})),this.bulletsAnimation[c]=new f.a("#".concat(c),"".concat(c,"_anim"),["dpit-admin-btn__bullets"],8,100),$("#".concat(c)).on("click",(function(t){t.preventDefault(),$("#".concat(c)).hasClass("inactive")?i.scrollToRelatedPostsEl():i.setPostTransient("dpintro_builder_transient",c,s,i.config.tourId,30)}))}}}]),t}(),b=Object(o.a)((function t(e){Object(n.a)(this,t),e.dpDebugEn&&console.log("DPProPromoButton"),this.config=e;var i='<div class="dpit-admin-action">\n                <a href="'.concat(e.proDemoLink,'" target=_blank role="button" class="dpit-admin-btn dpit-admin-action__btn">\n                    <span class="dpit-admin-btn__text">').concat(e.proCTAText,"</span>\n                </a>\n            </div>");$('.acf-field[data-name="intro_enabled"]').append($(i).addClass("dpit-admin-action--top")),$('.acf-field-group[data-name="intro_url_variables"]>.acf-label').append(i)})),v=Object(o.a)((function t(e){Object(n.a)(this,t),e.dpDebugEn&&console.log("DPAcfAdjust"),$(document).on("tap",".acf-icon",(function(t){$(t.target).trigger("click")})),$(document).on("mousedown",'.acf-field-relationship .values-list .acf-rel-item .acf-icon[data-name="remove_item"]',(function(t){console.log("mouseDown"),$(t.target).trigger("click")}))})),_=i(25),g=(i(32),i(33),i(34),i(8)),m=i(17),y=Object(o.a)((function t(e){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(n.a)(this,t),Object(a.a)(this,"init",(function(){$("#post-body-content .acf-field:not(.acf-field-group):not(.acf-field--no-info-icon) .acf-label").each((function(t,e){var i=$(e).find(".description"),a=$(e).closest(".acf-field"),n=a.find("span.message"),o=i.html(),l=n.html()||"";if(l&&o&&(l+="<br>"),(l+=i.html()||"").length){var r=a.hasClass("acf-field--ia")?"dp-info-icon dp-info-icon--ia":"dp-info-icon";$(e).addClass("acf-label--with-info-icon").append(g.a.getInfoIconHtml(r,l,$(e).children("label").text())),i.add(n).hide()}})),i.config.stepDefinitions&&Object.keys(i.config.stepDefinitions).forEach((function(t){var e=i.config.stepDefinitions[t];e.hint&&$("#acf-t-header-"+t).addClass("acf-table-header-cell--with-info-icon").append(g.a.getInfoIconHtml("dp-info-icon dp-info-icon--in-table-header",e.hint,e.title))})),$(".dp-info-icon").each((function(t,e){var i=$(e).hasClass("dp-info-icon--ia");Object(_.b)(e,{content:function(t){return t.getAttribute("data-info-text")},animation:"scale",theme:"material",allowHTML:!0,interactive:i,zIndex:100000003})})),setTimeout((function(){$("#acf-group_5e4c8efda20c2").addClass("dp-acf-tippy"),$(".post-type-dp_intro_tours #post-body").fadeIn(700),$(".dp-info-icon").load(u()(i.config.assetsUrl,"../../includes/assets/icons/info-circle-solid.svg")),setTimeout((function(){$("#acf-intro-data-loader").fadeOut(700,(function(){setTimeout((function(){m.a.doAction("adminEditTourLoaded",{tourId:i.config.tourId}),i.afterLoaderFinished&&i.afterLoaderFinished()}),300)})),$(".dp-info-icon").fadeIn(700)}),400)}),300)})),e.dpDebugEn&&console.log("AcfTippy"),this.config=e,this.afterLoaderFinished=o,this.init()})),k=i(9),w=i(38),j=i(39),x=i(5),C=i.n(x),O=function(){function t(e){Object(n.a)(this,t),Object(a.a)(this,"classes",{btn_small:"acf-icon acf-icon--s",btn_very_small:"acf-icon acf-icon--xs",btn_very_very_small:"acf-icon acf-icon--xxs",btn_add_row:"acf-icon-plus -plus",btn_add_col:"acf-icon-plus -plus",btn_remove_row:"acf-icon-minus -minus",btn_remove_col:"acf-icon-minus -minus"}),Object(a.a)(this,"htmleditor",'<div class="acf-table-cell-editor"><textarea name="acf-table-cell-editor-textarea" class="acf-table-cell-editor-textarea"></textarea></div>'),this.htmlButtons={add_row:'<a href="#" class="acf-table-add-row no-drag '.concat(this.classes.btn_small," ").concat(this.classes.btn_add_row,'"></a>'),remove_row:'<a href="#" class="acf-table-remove-row '.concat(this.classes.btn_small," ").concat(this.classes.btn_remove_row,'"></a>'),add_col:'<a href="#" class="acf-table-add-col '.concat(this.classes.btn_small," ").concat(this.classes.btn_add_col,'"></a>'),remove_col:'<a href="#" class="acf-table-remove-col '.concat(this.classes.btn_small," ").concat(this.classes.btn_remove_row,'"></a>'),add_link:'<a href="#" class="acf-table-add-link no-drag '.concat(this.classes.btn_very_small," ").concat(this.classes.btn_add_row,'"></a>'),remove_link:'<a href="#" class="acf-table-remove-link no-drag '.concat(this.classes.btn_very_very_small," ").concat(this.classes.btn_remove_row,'"></a>')},this.body_row="".concat('<div class="acf-table-body-row"><div class="acf-table-body-left">').concat(this.htmlButtons.add_row,'<div class="acf-table-body-left-wrap">')+'<div class="acf-table-body-cont">\x3c!--ph--\x3e</div><div class="acf-table-sort-row-icon"></div></div></div>'+'<div class="acf-table-body-right">'.concat(this.htmlButtons.remove_row,"</div>")+"</div>",this.top_cell='<div class="acf-table-top-cell" data-colparam="">'.concat(this.htmlButtons.add_col,'<div class="acf-table-top-cont">\x3c!--ph--\x3e</div>')+"</div>",this.bottom_cell='<div class="acf-table-bottom-cell">'.concat(this.htmlButtons.remove_col,"</div>"),this.table='<div class="acf-table-wrap'.concat($.isEmptyObject(e.text_styles)?"":" acf-table-wrap--cs",'">')+'<div class="acf-table-table"><div class="acf-table-top-row"><div class="acf-table-top-left">'+this.htmlButtons.add_col+'</div><div class="acf-table-top-right"></div></div><div class="acf-table-header-row acf-table-header-hide-off"><div class="acf-table-header-left">'+this.htmlButtons.add_row+'</div><div class="acf-table-header-right"></div></div><div class="acf-table-bottom-row"><div class="acf-table-bottom-left"></div><div class="acf-table-bottom-right"></div></div></div></div>'}return Object(o.a)(t,[{key:"header_cell",value:function(t,e,i){var a=["acf-table-header-cell"];return e&&a.push(e),'<div class="'.concat(a.join(" "),'"').concat(i?' id="acf-t-header-'.concat(i,'"'):"",'>\n\t\t\t\t<div class="acf-table-header-cont" data-val="').concat(i,'">').concat(t,"</div>\n\t\t\t</div>")}},{key:"body_cell",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.extra_data(i,!0),n=["acf-table-body-cell"];return e&&n.push(e),'<div class="'.concat(n.join(" "),'">')+'<div class="acf-table-body-cont">'.concat(t).concat(a,"</div>")+"</div>"}},{key:"body_cell_link",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o="";if(0===n){o+=" acf-table-body-cell--link-multi";var l=e.split(",").filter((function(t){return t}));e="<ul>",l&&l.length&&l.forEach((function(i){e+=t.body_cell_link_sub_item(i)})),e+="</ul>",e+=this.htmlButtons.add_link}return i&&(i+=" "),this.body_cell(e,i+o,a)}},{key:"body_cell_link_sub_item",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return'<li class="acf-table-body-cont-li"><span>'.concat(t,"</span>").concat(this.htmlButtons.remove_link,"</li>")}},{key:"body_cell_checkbox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.extra_data(i,t),n=["acf-table-body-cell"];e&&n.push(e);var o=t?" checked":"";return'<div class="'.concat(n.join(" "),'">')+'<div class="acf-table-body-cont acf-table-body-cont--checkbox">'+'<input type="checkbox" class="acf-table-body-cont-sub"'.concat(o,">")+a+"</div></div>"}},{key:"body_cell_select",value:function(t,e,i){var a=["acf-table-body-cont-sub"];return i&&a.push(i),'<div class="acf-table-body-cell"><div class="acf-table-body-cont acf-table-body-cont--select">'+'<select class="'.concat(a.join(" "),'">')+t.map((function(t){var i=t.split(":"),a=i[0],n=i.length>1?i[1]:i[0],o=a==e?' selected="selected"':"";return'<option value="'.concat(a,'"').concat(o,">").concat(n,"</option>")})).join("")+"</select></div></div>"}},{key:"extra_data",value:function(t,e){var i="";if(t&&!jQuery.isEmptyObject(t)){var n,o=C()((n={},Object(a.a)(n,"acf-table-cell-ec",!0),Object(a.a)(n,"acf-table-cell-ec--hidden",!e),n));i+='<div class="'.concat(o,'">'),Object.keys(t).forEach((function(e){var a,n=t[e];switch(n.title&&(i+='<div class="acf-cell-eci-wrap" data-id="'.concat(e,'">')),n.type){case"checkbox":i+='<input type="checkbox" class="acf-table-body-cont-sub"'.concat(1==n.val?" checked":"",">");break;case"number":var o,l=void 0!==n.min&&null!==n.min?' min="'.concat(n.min,'"'):"",r=void 0!==n.max&&null!==n.max?' max="'.concat(n.max,'"'):"",s=void 0!==n.step&&null!==n.step?' step="'.concat(n.step,'"'):"";i+='<input type="number"'.concat(l).concat(r).concat(s,' class="acf-table-body-cont-sub" value="').concat(null!==(o=n.val)&&void 0!==o?o:n.def,'">');break;default:i+='<input type="text" class="acf-table-body-cont-sub" value="'.concat(null!==(a=n.val)&&void 0!==a?a:n.def,'">')}n.title&&(i+="<span>".concat(n.title,"</span></div>"))})),i+="</div>"}return i}}]),t}(),D=function(){function t(e,i){Object(n.a)(this,t),this.dragPos={x:null,left:null},this.containerEl=e,this.jContainerEl=$(e),this.jDragAndDropHandler=this.jContainerEl.find(i),this.cursorOrig=this.containerEl.style.cursor,this.jDragAndDropHandler.length&&(this.cursorHandlerOrig=this.jDragAndDropHandler[0].style.cursor),this.setDraggingInProcess(!1),this.jDragAndDropHandler.on("mousedown",this.onMouseDown.bind(this)),document.addEventListener("mousemove",this.onMouseMove.bind(this)),document.addEventListener("mouseup",this.onMouseUp.bind(this)),$(window).on("resize",this.onContainerResize.bind(this))}return Object(o.a)(t,[{key:"setDraggingInProcess",value:function(t){var e=this.isContainerScrollable();this.isDragging=!!e&&t,this.adjustCursor(e)}},{key:"refresh",value:function(){this.adjustCursor(this.isContainerScrollable())}},{key:"adjustCursor",value:function(t){this.isDragging?t&&(this.containerEl.style.cursor="grabbing",this.containerEl.style.userSelect="none",this.jDragAndDropHandler.css("cursor","grabbing")):(this.containerEl.style.cursor=this.cursorOrig,this.containerEl.style.userSelect="",t?this.jDragAndDropHandler.css("cursor","grab"):this.jDragAndDropHandler&&this.jDragAndDropHandler.css("cursor",this.cursorHandlerOrig))}},{key:"onContainerResize",value:function(){this.setDraggingInProcess(!1)}},{key:"isContainerScrollable",value:function(){var t=this.jContainerEl.width(),e=parseInt(window.getComputedStyle(this.containerEl)["padding-left"],10),i=parseInt(window.getComputedStyle(this.containerEl)["padding-right"],10),a=0;return isNaN(e)||(a+=e),isNaN(i)||(a+=i),this.containerEl.scrollWidth-a-1>t}},{key:"onMouseDown",value:function(t){this.dragPos={left:this.containerEl.scrollLeft,x:t.clientX},this.setDraggingInProcess(!0)}},{key:"onMouseUp",value:function(){this.isDragging&&this.setDraggingInProcess(!1)}},{key:"onMouseMove",value:function(t){if(this.isDragging){var e=t.clientX-this.dragPos.x;this.containerEl.scrollLeft=this.dragPos.left-e}}}]),t}(),E=i(169),T=function(){function t(e){var i=this;Object(n.a)(this,t),Object(a.a)(this,"allowedColumnsIdx",[]),e.dpDebugEn&&console.log("ACFTableField config:",e),this.config=e,this.jBody=$("body"),this.var={ajax:!1,columIds:[]},this.state={current_cell_obj:!1,cell_editor_cell:!1,cell_editor_last_keycode:!1},this.version=e.version?e.version:"1.4.0",e.dpWpLink&&(this.dpWpLink=new j.a(e.dpWpLink)),this.tableHtml=new O(this.config),this.jBody.on("click blur",".acf-table-body-cont--checkbox .acf-table-body-cont-sub",(function(t){var e=$(t.target).closest(".acf-table-body-cont--checkbox .acf-table-body-cont-sub");if(i.state.current_cell_obj=$(e.closest(".acf-table-body-cell")[0])||!1,!e.parent(".acf-cell-eci-wrap").length){var a=i.state.current_cell_obj.find(".acf-table-cell-ec");$(e[0]).is(":checked")?a.removeClass("acf-table-cell-ec--hidden"):a.addClass("acf-table-cell-ec--hidden")}i.rebuild_table_data(e)})),$(document).on("dpwplink-canceled",(function(){i.state.current_cell_obj&&i.dpWpLink&&i.state.current_cell_obj.find(".acf-table-body-cont .acf-table-body-cont-li span:empty").closest(".acf-table-body-cont-li").remove()})),$("body").on("click","#dp_wp-link-submit",(function(t){if(i.state.current_cell_obj&&i.dpWpLink){var e=i.state.current_cell_obj.find(".acf-table-body-cont")[0];if(e){var a=i.dpWpLink.getAttrs(),n=a.href,o=a.jSubEl,l=i.state.current_cell_obj.closest(".acf-table-body-row").find(".acf-table-body-left .acf-table-body-cont").text();o&&o.length?o.text(n||""):$(e).text(n||""),"1"==l&&(a.urlVarExamples&&$('.acf-field[data-name="url_vars_examples"] textarea').val(g.a.simpleObjectToStr(a.urlVarExamples,"\n")),Object(h.a)(!0,i.config.siteUrl)),i.rebuild_table_data(e)}}return t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1})),this.jBody.on("click",".acf-table-body-cont--select .acf-table-body-cont-sub",(function(t){var e=$(t.target).closest(".acf-table-body-cont--select .acf-table-body-cont-sub");i.state.current_cell_obj=$(e.closest(".acf-table-body-cell")[0])||!1,i.rebuild_table_data(e)})),this.init()}return Object(o.a)(t,[{key:"init",value:function(){this.each_table(),this.table_add_col_event(),this.table_remove_col(),this.table_add_row_event(),this.table_remove_row(),this.table_add_link(),this.table_remove_link(),this.simple_cell_editor(),this.link_editor(),this.tmce_cell_editor(),this.cell_editor_tab_navigation(),this.prevent_cell_links(),this.sortable_row(),this.sortable_col(),this.ui_event_use_header(),this.ui_event_caption(),this.ui_event_new_flex_field(),this.ui_event_change_location_rule(),this.ui_event_ajax(),this.editor_custom_style()}},{key:"ui_event_ajax",value:function(){var t=this;$(document).ajaxComplete((function(){t.each_table()}))}},{key:"ui_init_drag_to_scroll",value:function(){var t=this;this.containerDraggers={},$(".acf-table-wrap").each((function(e,i){t.containerDraggers[i]=new D(i,".acf-table-header-cell")}))}},{key:"ui_event_change_location_rule",value:function(){var t=this;this.jBody.on("change",'[name="post_category[]"], [name="post_format"], [name="page_template"], [name="parent_id"], [name="role"], [name^="tax_input"]',(function(){var e=setInterval((function(){$(".field_type-table").length>0&&(t.each_table(),clearInterval(e))}),100)}))}},{key:"each_table",value:function(){var t=this;$(".acf-field-table .acf-table-root").not(".acf-table-rendered").each((function(e,i){var a={};a.obj_root=$(i),a.obj_root.find(".acf-table-wrap").length>0||(a.obj_root.addClass("acf-table-rendered"),t.data_get(a),t.data_default(a),t.field_options_get(a),t.table_render(a),t.misc_render(a),void 0===a.data.b[1]&&void 0===a.data.b[0][1]&&""===a.data.b[0][0].c&&(a.obj_root.find(".acf-table-remove-col").hide(),a.obj_root.find(".acf-table-remove-row").hide()),t.containerDraggers&&t.containerDraggers[i]&&t.containerDraggers[i].refresh())}))}},{key:"field_options_get",value:function(t){try{t.field_options=$.parseJSON(decodeURIComponent(t.obj_root.find("[data-field-options]").data("field-options")))}catch(e){t.field_options={use_header:2},console.log("The tablefield options value is not a valid JSON string:",decodeURIComponent(t.obj_root.find("[data-field-options]").data("field-options"))),console.log("The parsing error:",e)}}},{key:"ui_event_use_header",value:function(){var t=this;this.jBody.on("change",".acf-table-fc-opt-use-header",(function(e){var i=$(e.target).closest(".acf-table-fc-opt-use-header"),a={};a.obj_root=i.parents(".acf-table-root"),a.obj_table=a.obj_root.find(".acf-table-table"),t.data_get(a),t.data_default(a),"1"===i.val()?(a.obj_table.removeClass("acf-table-hide-header"),a.data.p.o.uh=1,t.update_table_data_field(a)):(a.obj_table.addClass("acf-table-hide-header"),a.data.p.o.uh=0,t.update_table_data_field(a))}))}},{key:"ui_event_caption",value:function(){this.jBody.on("change",".acf-table-fc-opt-caption",(function(t){var e=$(t.target).closest(".acf-table-fc-opt-caption"),i={};i.obj_root=e.parents(".acf-table-root"),i.obj_table=i.obj_root.find(".acf-table-table"),this.data_get(i),this.data_default(i),i.data.p.ca=e.val(),this.update_table_data_field(i)}))}},{key:"ui_event_new_flex_field",value:function(){var t=this;this.jBody.on("click",".acf-fc-popup",(function(){$(".acf-table-table").sortable("destroy").unbind(),window.setTimeout((function(){t.sortable_row()}),300)}))}},{key:"data_get",value:function(t){var e=t.obj_root.find("input.table").val();if(t.data=!1,t.obj_root.closest(".acf-fields").hasClass("acf-block-fields")?t.field_context="block":t.field_context="box",""!==e){try{"box"===t.field_context&&(t.data=$.parseJSON(decodeURIComponent(e.replace(/\+/g,"%20")))),"block"===t.field_context&&(t.data=$.parseJSON(decodeURIComponent(e.replace(/\+/g,"%20"))))}catch(i){"box"===t.field_context&&(console.log("The parsing error:",i),console.log("The tablefield value is not a valid JSON string:",decodeURIComponent(e.replace(/\+/g,"%20")))),"block"===t.field_context&&(console.log("The parsing error:",i),console.log("The tablefield value is not a valid JSON string:",decodeURIComponent(e.replace(/\+/g,"%20"))))}"object"!==Object(k.a)(t.data.p)&&(console.log("The tablefield value is not a tablefield JSON string:",t.data),t.data=!1)}return t.data}},{key:"data_default",value:function(t){(t.data_defaults={acftf:{v:this.version},p:{o:{uh:0},ca:""},c:[{c:""}],h:[{c:""}],b:[[{c:""}]]},t.data)?"array"===Object(k.a)(t.data.b)&&$.extend(!0,t.data,t.data_defaults):t.data=t.data_defaults}},{key:"table_render",value:function(t){var e=this;if(t.obj_root.find(".acf-table-wrap").remove(),t.obj_root.append(this.tableHtml.table),t.obj_table=t.obj_root.find(".acf-table-table"),t.obj_top_row=t.obj_root.find(".acf-table-top-row"),t.obj_top_insert=t.obj_top_row.find(".acf-table-top-right"),t.obj_header_row=t.obj_root.find(".acf-table-header-row"),t.obj_header_insert=t.obj_header_row.find(".acf-table-header-right"),t.obj_bottom_row=t.obj_root.find(".acf-table-bottom-row"),t.obj_bottom_insert=t.obj_bottom_row.find(".acf-table-bottom-right"),t.data.c)for(var i in t.data.c)t.obj_top_insert.before(this.tableHtml.top_cell);if(this.table_top_labels(t),t.data.h)for(i in t.data.h){var a,n=t.data.h[i].v.replace(/xxx&quot/g,'"').trim(),o=t.data.h[i].c.replace(/xxx&quot/g,'"').trim();this.var.columIds.push(n);var l="";if(!Object.keys(this.config.stepDefinitions).includes(n)||null!==(a=this.config.stepDefinitions[n])&&void 0!==a&&a.hide)l="dp-hidden";else{var r=this.config.stepDefinitions[n];r&&(this.allowedColumnsIdx.push(Number(i)),o=r.title)}t.obj_header_insert.before(this.tableHtml.header_cell(o,l,n))}if(t.data.b){for(i in t.data.b)t.obj_bottom_row.before(this.tableHtml.body_row.replace("\x3c!--ph--\x3e",parseInt(i)+1));$(".acf-table-sort-row-icon").load(u()(this.config.assetsUrl,"/icons/arrows-alt-v-solid.svg")).addClass("acf-table-sort-row-icon--loaded").fadeIn(700)}var s=t.obj_root.find(".acf-table-body-row"),c=0;if(s&&s.each((function(a,n){var o=$(n),l=o.find(".acf-table-body-right");for(i in t.data.b[c]){var r=t.data.b[c][i].c;r&&(r=t.data.b[c][i].c.replace(/xxx&quot/g,'"')),l.before(e.get_column_html(Number(i),r,c,o))}c+=1})),t.data.c)for(i in t.data.c)t.obj_bottom_insert.before(this.tableHtml.bottom_cell)}},{key:"get_column_html",value:function(t,e,i,a){var n,o,l,r=this.var.columIds[t],s=null===(n=this.config.stepDefinitions)||void 0===n?void 0:n[r],c=s?s.type:"",d=[];this.allowedColumnsIdx.includes(t)||d.push("dp-hidden"),d.push("acf-table-body-cell--".concat(c));var u=d.join(" "),f=g.a.decodeStepParamAdvancedVal(e,r,this.config.stepDefinitions,!1);switch("hidden_meta"===r&&"1"===(null==f||null===(o=f.ext)||void 0===o||null===(l=o.build_with_wp_editor)||void 0===l?void 0:l.val)&&a&&a.find(".acf-table-body-cell--text_wp_edit .acf-table-body-cont").addClass("acf-table-body-cont--rt"),c){case"link":return this.tableHtml.body_cell_link(f.val,u,f.ext,i);case"select":return this.tableHtml.body_cell_select(s.options,f.val,u,f.ext);case"checkbox":return this.tableHtml.body_cell_checkbox(!0===f.val||1==f.val,u,f.ext);default:return this.tableHtml.body_cell(f.val,u,f.ext)}}},{key:"misc_render",value:function(t){this.init_option_use_header(t),this.init_option_caption(t)}},{key:"init_option_use_header",value:function(t){var e={};e.obj_use_header=t.obj_root.find(".acf-table-fc-opt-use-header"),2===t.field_options.use_header&&(t.obj_table.addClass("acf-table-hide-header"),t.data.p.o.uh=0,this.update_table_data_field(t)),1===t.field_options.use_header&&(t.data.p.o.uh=1,this.update_table_data_field(t)),1===t.data.p.o.uh&&e.obj_use_header.val("1"),0===t.data.p.o.uh&&e.obj_use_header.val("0"),1===t.data.p.o.uh&&t.obj_table.removeClass("acf-table-hide-header"),0===t.data.p.o.uh&&t.obj_table.addClass("acf-table-hide-header")}},{key:"init_option_caption",value:function(t){if("number"==typeof t.field_options.use_caption&&2!==t.field_options.use_caption){var e={};e.obj_caption=t.obj_root.find(".acf-table-fc-opt-caption"),e.obj_caption.val(t.data.p.ca)}}},{key:"table_add_col_event",value:function(){var t=this;this.jBody.on("click",".acf-table-add-col",(function(e){e.preventDefault();var i=$(e.target).closest(".acf-table-add-col"),a={};a.obj_col=i.parent(),t.table_add_col(a)}))}},{key:"table_add_col",value:function(t){var e=this,i=t.obj_col.index();t.obj_root=t.obj_col.parents(".acf-table-root"),t.obj_table=t.obj_root.find(".acf-table-table"),$(t.obj_table.find(".acf-table-top-row").children()[i]).after(this.tableHtml.top_cell.replace("\x3c!--ph--\x3e","")),$(t.obj_table.find(".acf-table-header-row").children()[i]).after(this.tableHtml.header_cell("")),t.obj_table.find(".acf-table-body-row").each((function(t,a){$($(a).children()[i]).after(e.tableHtml.body_cell())})),$(t.obj_table.find(".acf-table-bottom-row").children()[i]).after(this.tableHtml.bottom_cell.replace("\x3c!--ph--\x3e","")),this.table_top_labels(t),t.obj_table.find(".acf-table-remove-col").show(),t.obj_table.find(".acf-table-remove-row").show(),this.table_build_json(t)}},{key:"table_remove_col",value:function(){var t=this;this.jBody.on("click",".acf-table-remove-col",(function(e){e.preventDefault();var i,a,n={},o=$(e.target).closest(".acf-table-remove-col"),l=o.parent().index();n.obj_root=o.parents(".acf-table-root"),n.obj_table=n.obj_root.find(".acf-table-table"),n.obj_top=n.obj_root.find(".acf-table-top-row"),i=n.obj_table.find(".acf-table-body-row"),a=n.obj_top.find(".acf-table-top-cell").length,$(n.obj_table.find(".acf-table-top-row").children()[l]).remove(),$(n.obj_table.find(".acf-table-header-row").children()[l]).remove(),1==a?(i.remove(),t.table_add_col({obj_col:n.obj_table.find(".acf-table-top-left")}),t.table_add_row({obj_row:n.obj_table.find(".acf-table-header-row")}),n.obj_table.find(".acf-table-remove-col").hide(),n.obj_table.find(".acf-table-remove-row").hide()):i.each((function(t,e){$($(e).children()[l]).remove()})),$(n.obj_table.find(".acf-table-bottom-row").children()[l]).remove(),t.table_top_labels(n),t.table_build_json(n)}))}},{key:"table_add_row_event",value:function(){var t=this;this.jBody.on("mouseup",".acf-table-add-row",(function(e){e.preventDefault(),e.stopPropagation();var i=$(e.target).closest(".acf-table-add-row"),a={};return a.obj_row=i.parent().parent(),t.table_add_row(a),!1}))}},{key:"table_add_row",value:function(t){var e,i,a="";t.obj_root=t.obj_row.parents(".acf-table-root"),t.obj_table=t.obj_root.find(".acf-table-table"),t.obj_table_rows=t.obj_table.children(),i=t.obj_table.find(".acf-table-top-cell").size(),e=t.obj_row.index();for(var n=0;n<i;n++){var o=null,l=this.var.columIds[n];if(l){var r;o=this.config.stepDefinitions[l]?this.config.stepDefinitions[l].def:"";var s=null===(r=this.config.stepDefinitions)||void 0===r?void 0:r[l];s&&"link"===s.type&&(o="$keep-prev-step-url")}a+=this.get_column_html(Number(n),o,e)}$(t.obj_table_rows[e]).after(this.tableHtml.body_row).next().find(".acf-table-body-left").after(a),this.table_left_labels(t),t.obj_table.find(".acf-table-remove-col").show(),t.obj_table.find(".acf-table-remove-row").show(),this.table_build_json(t),$(".acf-table-sort-row-icon:not(.acf-table-sort-row-icon--loaded)").load(u()(this.config.assetsUrl,"/icons/arrows-alt-v-solid.svg")).addClass("acf-table-sort-row-icon--loaded").fadeIn(700)}},{key:"table_add_link",value:function(){var t=this;this.jBody.on("click",".acf-table-add-link",(function(e){e.preventDefault();var i=$(e.target).closest(".acf-table-body-cont").find("ul");i.length&&(i.append(t.tableHtml.body_cell_link_sub_item("")),$(i).children("li:last-child").trigger("click"))}))}},{key:"table_remove_link",value:function(){var t=this;this.jBody.on("click",".acf-table-remove-link",(function(e){e.preventDefault(),e.stopPropagation();var i={},a=$(e.target).closest(".acf-table-remove-link");i.obj_root=a.parents(".acf-table-root"),i.obj_table=i.obj_root.find(".acf-table-table"),i.obj_rows=i.obj_root.find(".acf-table-body-row"),$(e.target).closest("li").remove(),t.table_build_json(i),Object(h.a)(!0,t.config.siteUrl)}))}},{key:"table_remove_row",value:function(){var t=this;this.jBody.on("click",".acf-table-remove-row",(function(e){e.preventDefault();var i,a=$(e.target).closest(".acf-table-remove-row"),n={};n.obj_root=a.parents(".acf-table-root"),n.obj_table=n.obj_root.find(".acf-table-table"),n.obj_rows=n.obj_root.find(".acf-table-body-row"),i=n.obj_rows.length,a.parent().parent().remove(),1==i&&(t.table_add_row({obj_row:n.obj_table.find(".acf-table-header-row")}),n.obj_table.find(".acf-table-remove-row").hide()),t.table_left_labels(n),t.table_build_json(n)}))}},{key:"table_top_labels",value:function(t){var e="A".charCodeAt(0),i="A".charCodeAt(0),a=!1;t.obj_table.find(".acf-table-top-cont").each((function(t,n){var o="";a?(o=String.fromCharCode(e)+String.fromCharCode(i),i==="Z".charCodeAt(0)?(e+=1,i="A".charCodeAt(0)):i+=1):(o=String.fromCharCode(e),e==="Z".charCodeAt(0)?(e="A".charCodeAt(0),a=!0):e+=1),$(n).text(o)}))}},{key:"table_left_labels",value:function(t){var e=0;t.obj_table.find(".acf-table-body-left").each((function(t,i){e+=1,$(i).find(".acf-table-body-cont").text(e)}))}},{key:"getTableBodyCellContValAtomic",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".acf-table-body-cont-sub";switch(t){case"checkbox":return e.find(i)[0].checked?"1":"0";case"number":case"select":return $(e.find(i)[0]).val();case"link":if(e.parent().hasClass("acf-table-body-cell--link-multi")){var a=[],n=$(e[0]).find(".acf-table-body-cont-li");return n.length&&n.each((function(t,e){a.push($(e).find("span").text())})),a.filter((function(t){return t})).join(",")}return e.html();case"ext_only":return"";default:var o=e.clone().children(".acf-table-cell-ec").remove().end().html();return o}}},{key:"getStepExtCfg",value:function(t){var e;return t&&this.config.stepDefinitions[t]?null===(e=this.config.stepDefinitions[t])||void 0===e?void 0:e.ext:null}},{key:"getTableBodyCellContVal",value:function(t,e){var i,a=this,n={},o=null===(i=this.config.stepDefinitions)||void 0===i?void 0:i[t],l=this.getStepExtCfg(t);if(o){var r=this.getTableBodyCellContValAtomic(o.type,e);if(l){var s={};e.find(".acf-cell-eci-wrap").each((function(t,e){var i=$(e).attr("data-id");if(i&&l[i]){var n=l[i].type;n&&(s[i]=a.getTableBodyCellContValAtomic(n,$(e)))}})),r=g.a.encodeStepParamAdvancedVal({val:r,ext:s},t,this.config.stepDefinitions)}n=r}return n}},{key:"table_build_json",value:function(t){var e=this,i=0,a=0;t.data=this.data_get(t),this.data_default(t),t.data.c=[],t.data.h=[],t.data.b=[],i=0,t.obj_table.find(".acf-table-top-cont").each((function(e,a){t.data.c[i]={},t.data.c[i].p=$(a).parent().data("colparam"),i+=1})),i=0,t.obj_table.find(".acf-table-header-cont").each((function(e,a){t.data.h[i]={},t.data.h[i].c=$(a).html(),t.data.h[i].v=$(a).data("val"),i+=1})),i=0,a=0,t.obj_table.find(".acf-table-body-row").each((function(n,o){t.data.b[i]=[],$(o).find(".acf-table-body-cell .acf-table-body-cont").each((function(n,o){t.data.b[i][a]={};var l=e.var.columIds[a];l&&(t.data.b[i][a].c=e.getTableBodyCellContVal(l,$(o))),a+=1})),a=0,i+=1})),this.update_table_data_field(t)}},{key:"update_table_data_field",value:function(t){t.data=this.update_table_data_version(t.data);var e=JSON.stringify(t.data);e.replace(/\\"/g,'\\"'),e=encodeURIComponent(e),t.obj_root.find("input.table").val(e),this.field_changed(t)}},{key:"update_table_data_version",value:function(t){return void 0===t.acftf&&(t.acftf={}),t.acftf.v=this.version,t}},{key:"tmce_cell_editor",value:function(){var t=this;this.tmce=new w.a(this.config.tmce,(function(e,i){if(e){e.html(i);var a={};a.obj_root=e.parents(".acf-table-root"),a.obj_table=a.obj_root.find(".acf-table-table"),a.obj_rows=a.obj_root.find(".acf-table-body-row");var n=e.closest(".acf-table-body-row");n.find('.acf-cell-eci-wrap[data-id="build_with_wp_editor"] input').prop("checked",!0),n.find(".acf-table-body-cell--text_wp_edit .acf-table-body-cont").addClass("acf-table-body-cont--rt"),t.table_build_json(a)}}),!1,this.config.dpDebugEn),this.jBody.on("click",".acf-table-body-cell--text_wp_edit",(function(e){var i=$(e.target).hasClass("acf-table-body-cont")?$(e.target):$(e.target).find(".acf-table-body-cont");i.length||(i=$(e.target).closest(".acf-table-body-cont")),t.tmce.open(i,i.html(),t.getStepIdx($(e.target)))}))}},{key:"editor_custom_style",value:function(){var t;g.a.setTextStyles(this.jBody[0],null===(t=this.config)||void 0===t?void 0:t.text_styles)}},{key:"link_editor",value:function(){var t=this;this.jBody.on("click",".acf-table-body-cell--link",(function(e){if(t.dpWpLink){var i=$(e.target).closest(".acf-table-body-cell--link");t.state.current_cell_obj=i;var a=!0,n="",o=null,l=i.find(".acf-table-body-cont");if(l.length){var r=$(e.target).closest(".acf-table-body-cont-li");r.length?(o=$(r[0]).find("span")).length&&(n=$(o[0]).text()):l.find("ul").length?a=!1:n=$(l[0]).text()}if(a){var s=t.getStepIdx(i),c=$('.acf-field[data-name="url_vars_examples"] textarea').val(),d=null;c&&(d=g.a.strToSimpleObject(c,"\n")),t.dpWpLink.open(n,null,!1,!0,s,Object(h.d)(),d,t.config.sysUrlVars,o)}return!1}}))}},{key:"simple_cell_editor",value:function(){var t=this;this.jBody.on("click",".acf-table-body-cell--text",(function(e){var i=$(e.target).closest(".acf-table-body-cell--text");e.stopImmediatePropagation(),$(e.target).closest(".acf-table-cell-ec").length||(t.cell_editor_save(),t.cell_editor_add_editor({that:i}))})),this.jBody.on("click",".acf-table-cell-editor-textarea",(function(t){t.stopImmediatePropagation()})),this.jBody.on("click",(function(){t.cell_editor_save()}))}},{key:"getStepIdx",value:function(t){return Number(t.closest(".acf-table-body-row").find(".acf-table-body-left .acf-table-body-cont").text())}},{key:"cell_editor_add_editor",value:function(t){if((t=$.extend(!0,{that:!1},t)).that&&(this.state.current_cell_obj=t.that,t.that.hasClass("acf-table-body-cell--text"))){var e=t.that.find(".acf-table-body-cont, .acf-table-header-cont").html();this.state.cell_editor_is_open=!0,t.that.prepend(this.tableHtml.htmleditor).find(".acf-table-cell-editor-textarea").html(e).focus(),$(".acf-table-cell-editor").fadeIn(),t.that.find(".acf-table-body-cont").addClass("hidden-for-edit");var i=$(".acf-table-cell-editor-textarea")[0];E(i),i.focus(),i.setSelectionRange(i.value.length,i.value.length)}}},{key:"get_next_table_cell",value:function(){var t=this.state.current_cell_obj.next(".acf-table-body-cell, .acf-table-header-cell");0===t.length&&(t=this.state.current_cell_obj.parent().next(".acf-table-body-row").find(".acf-table-body-cell").first()),0!==t.length?this.state.current_cell_obj=t:this.state.current_cell_obj=!1}},{key:"get_prev_table_cell",value:function(){var t=this.state.current_cell_obj.closest(".acf-table-table").hasClass("acf-table-hide-header"),e=this.state.current_cell_obj.prev(".acf-table-body-cell, .acf-table-header-cell");if(0===e.length){var i=[".acf-table-body-row"];!1===t&&i.push(".acf-table-header-row"),e=this.state.current_cell_obj.parent().prev(i.join(",")).find(".acf-table-body-cell, .acf-table-header-cell").last()}0!==e.length?this.state.current_cell_obj=e:this.state.current_cell_obj=!1}},{key:"rebuild_table_data",value:function(t){var e=$(t).parents(".acf-table-root"),i={obj_root:e,obj_table:e.find(".acf-table-table")};this.table_build_json(i)}},{key:"cell_editor_save",value:function(){var t=this.jBody.find(".acf-table-cell-editor"),e=t.find(".acf-table-cell-editor-textarea"),i={},a="";$(t.next()).removeClass("hidden-for-edit"),void 0!==e.val()&&(i.obj_root=t.parents(".acf-table-root"),i.obj_table=i.obj_root.find(".acf-table-table"),a=(a=(a=e.val()).replace(/<(script)/gi,"&#060;$1")).replace(/<\/(script)/gi,"&#060;/$1"),t.next().html(a),this.table_build_json(i),t.remove(),this.state.cell_editor_is_open=!1,i.obj_root.find(".acf-table-remove-col").show(),i.obj_root.find(".acf-table-remove-row").show()),$(".acf-table-cell-editor").fadeOut()}},{key:"cell_editor_tab_navigation",value:function(){var t=this;this.jBody.on("keydown",".acf-table-cell-editor",(function(e){var i=e.keyCode||e.which;9==i&&(e.preventDefault(),t.cell_editor_save(),16===t.state.cell_editor_last_keycode?t.get_prev_table_cell():t.get_next_table_cell(),t.cell_editor_add_editor({that:t.state.current_cell_obj})),t.state.cell_editor_last_keycode=i}))}},{key:"prevent_cell_links",value:function(){this.jBody.on("click",".acf-table-body-cont a, .acf-table-header-cont a",(function(t){t.preventDefault()}))}},{key:"sortable_fix_width",value:function(t,e){return e.children().each((function(t,e){var i=$(e);i.width(i.width())})),e}},{key:"sortable_row",value:function(){var t=this,e={axis:"y",items:"> .acf-table-body-row",containment:"parent",handle:".acf-table-body-left",helper:this.sortable_fix_width,cancel:".no-drag",update:function(e,i){var a={};a.obj_root=i.item.parents(".acf-table-root"),a.obj_table=a.obj_root.find(".acf-table-table"),t.table_left_labels(a),t.table_build_json(a)}};$(".acf-table-table").sortable(e)}},{key:"sortable_col",value:function(){var t={start_index:0,end_index:0},e={axis:"x",items:"> .acf-table-top-cell",containment:"parent",helper:this.sortable_fix_width,start:function(e,i){t.start_index=i.item.index()},update:function(e,i){t.end_index=i.item.index(),t.obj_root=i.item.parents(".acf-table-root"),t.obj_table=t.obj_root.find(".acf-table-table"),this.table_top_labels(t),this.sort_cols(t),this.table_build_json(t)}};$(".acf-table-top-row").sortable(e),this.jBody.on("click",".acf-fc-popup",(function(){$(".acf-table-top-row").sortable("destroy").unbind(),window.setTimeout((function(){$(".acf-table-top-row").sortable(e)}),300)}))}},{key:"field_changed",value:function(t){"block"===t.field_context&&t.obj_root.change()}},{key:"sort_cols",value:function(t){t.obj_table.find(".acf-table-header-row").each((function(e,i){t.header_row=$(i),t.header_row_children=t.header_row.children(),t.end_index<t.start_index&&$(t.header_row_children[t.end_index]).before($(t.header_row_children[t.start_index])),t.end_index>t.start_index&&$(t.header_row_children[t.end_index]).after($(t.header_row_children[t.start_index]))})),t.obj_table.find(".acf-table-body-row").each((function(e,i){t.body_row=$(i),t.body_row_children=t.body_row.children(),t.end_index<t.start_index&&$(t.body_row_children[t.end_index]).before($(t.body_row_children[t.start_index])),t.end_index>t.start_index&&$(t.body_row_children[t.end_index]).after($(t.body_row_children[t.start_index]))}))}}]),t}();function U(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function S(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?U(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}jQuery(document).ready((function(t){window.$=t,window.dpIntroToursAdminTourEditConfig.dpDebugEn&&console.log("Admin Tour Edit Config:",window.dpIntroToursAdminTourEditConfig),new v(window.dpIntroToursAdminTourEditConfig),new b(window.dpIntroToursAdminTourEditConfig)})),window.acf&&window.acf.addAction("load",(function(){window.$=jQuery;var t=new T(S(S({},window.dpIntroToursAdminTourEditConfig.acfTable),{},{stepDefinitions:window.dpIntroToursAdminTourEditConfig.stepDefinitions}));new y(window.dpIntroToursAdminTourEditConfig,(function(){t.ui_init_drag_to_scroll(),new p(window.dpIntroToursAdminTourEditConfig)}))}))},20:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var a=i(3),n=i(2),o=function(){function t(e,i,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;Object(a.a)(this,t),this.containerSelector=e,this.bulletsClasses=n,this.id=i,this.count=o,this.clockPeriodMs=l}return Object(n.a)(t,[{key:"createAndRun",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.backward=t;var i=$(e||this.containerSelector);if(i&&i.length){var a=i.find("#".concat(this.id));if(a&&a.length)a.removeClass("inactive");else{var n=this.createBullets(this.count);i[0].appendChild(n)}t?this.startReloadingSpinnerBack():this.startReloadingSpinner()}}},{key:"createBullets",value:function(t){var e=document.createElement("div");$(e).addClass(this.bulletsClasses.join(" ")),$(e).attr("aria-hidden","true"),e.id=this.id,e.style.opacity=0,e.style.display="block";for(var i=document.createElement("ul"),a=0;a<t;a++){var n=document.createElement("li");i.appendChild(n)}return e.appendChild(i),e.style.opacity=1,e}},{key:"activateBullet",value:function(t){$("#".concat(this.id," li")).removeClass("active"),$("#".concat(this.id," li")).removeClass("semi-active"),$("#".concat(this.id," li")).removeClass("semi-active--2"),this.backward?(t>=0&&t<this.count&&$("#".concat(this.id," li:nth-child(").concat(t+1,")")).addClass("semi-active semi-active--2"),t-1>=0&&t-1<this.count&&$("#".concat(this.id," li:nth-child(").concat(t,")")).addClass("semi-active"),t-2>=0&&t-2<this.count&&$("#".concat(this.id," li:nth-child(").concat(t-1,")")).addClass("active")):(t>=0&&t<this.count&&$("#".concat(this.id," li:nth-child(").concat(t+1,")")).addClass("active"),t-1>=0&&t-1<this.count&&$("#".concat(this.id," li:nth-child(").concat(t,")")).addClass("semi-active"),t-2>=0&&t-2<this.count&&$("#".concat(this.id," li:nth-child(").concat(t-1,")")).addClass("semi-active semi-active--2"))}},{key:"destroy",value:function(){$("#".concat(this.id)).addClass("inactive"),$("#".concat(this.id," li")).removeClass("active"),$("#".concat(this.id," li")).removeClass("semi-active"),this.stopReloadSpinner()}},{key:"stopReloadSpinner",value:function(){this.spinnerInterval&&clearInterval(this.spinnerInterval),this.spinnerInterval=null}},{key:"startReloadingSpinner",value:function(){var t=this,e=0;this.spinnerInterval&&clearInterval(this.spinnerInterval),this.bulletHideTimeout&&clearTimeout(this.bulletHideTimeout),this.spinnerInterval=setInterval((function(){t.activateBullet(e),++e>Math.round(2.2*t.count)&&(e=0)}),this.clockPeriodMs)}},{key:"startReloadingSpinnerBack",value:function(){var t=this;this.spinnerInterval&&clearInterval(this.spinnerInterval),this.bulletHideTimeout&&clearTimeout(this.bulletHideTimeout);var e=this.count+2;this.spinnerInterval=setInterval((function(){t.activateBullet(e),--e<0&&(e=Math.round(2.2*t.count))}),this.clockPeriodMs)}}]),t}()},21:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var a=i(14);function n(t,e){if(t){if("string"==typeof t)return Object(a.a)(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(a.a)(t,e):void 0}}},23:function(t,e,i){"use strict";i.d(e,"f",(function(){return l})),i.d(e,"e",(function(){return r})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return d})),i.d(e,"d",(function(){return f})),i.d(e,"a",(function(){return p}));var a=i(5),n=i.n(a),o=i(8),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dp_qpb_origin_el_id",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dp_qpb_canceled",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=new URL(window.location),l=o.a.getDpUrlParam(e,t,n),s=o.a.getDpUrlParam(i,t,n);l&&r($("#".concat(l)),s,a)},r=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t&&t.length){var a=$("#wpadminbar").outerHeight()||0;$([document.documentElement,document.body]).animate({scrollTop:t.offset().top-(window.innerHeight-a)/4},700);var n=b(t[0]);n!==document.body&&v(n,t[0]),e||setTimeout((function(){t.addClass("dp-visual-edited-acf"),i&&(t.addClass("dp-highlighted-el"),t.on("click",(function(){t.removeClass("dp-highlighted-el")}))),setTimeout((function(){t.removeClass("dp-visual-edited-acf")}),1100)}),750)}},s=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"admin",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r={dp_qpb_builder_mode:i,dp_qpb_builder_origin:n,dp_qpb_origin_el_id:a,dp_qp_tour_id:e,dp_qp_run_always_on_load:"1",dp_qp_trigger_id:l};return o.a.buildDpQueryString(r,t,"?")},c=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.isVariableUrl=!1,i.origUrl=t,i.globalStartAtAllPages=e;var a=!1;return i.enableUrlVariables=f(),i.enableUrlVariables&&(i.isVariableUrl=o.a.isVariableUrl(t),i.isVariableUrl&&(i.urlVarExamples=o.a.strToSimpleObject($('.acf-field[data-name="url_vars_examples"] textarea').val(),"\n"),i.urlVarExamples&&Object.keys(i.urlVarExamples).length>0&&(a=Object.values(i.urlVarExamples).every((function(t){return t.length>0}))))),t&&t.length&&(!i.isVariableUrl||a)||e},d=function(){return $('.acf-field[data-name="global_start_at_all_pages"] .acf-switch').hasClass("-on")},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){var i=$('.acf-field-table[data-name="intro_steps"] .acf-table-body-row').first().find(".acf-table-body-cell--link"),a=i.find(".acf-table-body-cont li:first-child span"),n=a.text(),o=d();return o?i.addClass("acf-table-body-cell--link-all-pages"):i.removeClass("acf-table-body-cell--link-all-pages"),c(n,o,e)}var l=$('.acf-field[data-name="intro_trigger"] .acf-field[data-name="intro_related_posts"] ul.select2-selection__rendered li:not(.select2-search--inline)');return l.length>0},f=function(){return $('.acf-field[data-name="url_vars_enabled"] .acf-switch').hasClass("-on")},h=function(t,e,i,a){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:300,r=$("#wp-admin-bar-view a, .updated.notice > p > a"),s=$("#wp-admin-bar-view, .updated.notice"),c=$("#sample-permalink"),d=$("#edit-slug-box");if($("#post-preview").fadeOut(l),e){t.removeClass("inactive"),s.fadeIn(l),d.fadeIn(l);var u="";if(i.enableUrlVariables?u=o.a.fillUrlVariables(i.urlVarExamples,i.origUrl):i.origUrl&&(u=i.origUrl),u){u=o.a.sanitizePossibleRelativeUrl(u,a);var f=i.globalStartAtAllPages?"$ALL":o.a.sanitizePossibleRelativeUrl(i.origUrl,a);c.attr("href",u).text(f),r.attr("href",u)}}else d.fadeOut(l),s.fadeOut(l),t.addClass(n()({inactive:!0,"inactive--var-url":i.isVariableUrl}));i.enableUrlVariables?$('.acf-field[data-name="url_vars_examples"] textarea').removeClass("url-vars-disabled"):$('.acf-field[data-name="url_vars_examples"] textarea').addClass("url-vars-disabled")},p=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,a={},n=u(t,a);return h($(".dpit-admin-btn-for-reload"),n,a,e,i),n},b=function(t){var e=window.getComputedStyle(t),i="absolute"===e.position,a=/(auto|scroll)/;if("fixed"===e.position)return document.body;for(var n=t;n=n.parentElement;)if(e=window.getComputedStyle(n),(!i||"static"!==e.position)&&a.test(e.overflow+e.overflowY+e.overflowX))return n;return document.body},v=function(t,e){t.scrollTop=e.offsetTop,t.scrollLeft=e.offsetLeft}},38:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var a=i(3),n=i(2),o=i(8),l=function(){function t(e,i,n,o){var l=this;Object(a.a)(this,t),this.config=e,this.onTmceCancel=n,o&&console.log("DpTinyMceDialog"),$("#dp-step-content-edit .dp-tmce-dialog__btn").on("click",(function(){i&&($("#dp-tmce-editor-tmce").trigger("click"),i(l.target,window.tinyMCE.activeEditor.getContent())),l.close(!1)})),$("#dp-step-content-edit .dp-tmce-dialog__close,#dp-step-content-edit__backdrop").on("click",(function(){l.close()})),$(window).on("keydown",this.keydown.bind(this))}return Object(n.a)(t,[{key:"keydown",value:function(t){this.modalOpened&&27===t.keyCode&&this.close()}},{key:"open",value:function(t,e,i){if(this.modalOpened=!0,!1!==i&&!isNaN(i)){var a=o.a.getNthStr(i);$("#dp-step-content-edit .dp-tmce-dialog__title").text(this.config.title.replace("%s",a))}$("#dp-step-content-edit").show(),$("#dp-step-content-edit__backdrop").show(),this.hadDpitRelPos=$("body").hasClass("dpit-relative-position"),this.hadDpitRelPos&&$("body").removeClass("dpit-relative-position"),$("body").addClass("dp-noscroll"),this.target=t,$("#dp-tmce-editor-tmce").trigger("click"),this.editor=window.tinyMCE.get("dp-tmce-editor"),this.editor.setContent(null!=e?e:"",{format:"html"}),this.editor.selection&&(this.editor.selection.select(this.editor.getBody(),!0),this.editor.selection.collapse(!1)),this.editor.focus()}},{key:"close",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.target=null,this.modalOpened=!1,$("#dp-step-content-edit").hide(),$("#dp-step-content-edit__backdrop").hide(),$("body").removeClass("dp-noscroll"),t&&this.onTmceCancel&&this.onTmceCancel(),this.hadDpitRelPos&&$("body").addClass("dpit-relative-position")}}]),t}()},39:function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var a=i(3),n=i(2),o=i(0),l=i(5),r=i.n(l),s=i(25),c=(i(32),i(12)),d=i.n(c),u=(i(33),i(34),i(8)),f=i(11),h=function(){function t(e,i){Object(a.a)(this,t),i.dpDebugEn&&console.log("DpWpLinkQuery"),this.config=i,this.page=1,this.allLoaded=!1,this.querying=!1,this.search=e,this.init()}return Object(n.a)(t,[{key:"init",value:function(){$.extend(t.prototype,{ready:function(){return!(this.querying||this.allLoaded)},ajax:function(t){var e=this,i={action:"dp-wp-link-ajax",page:this.page,_dp_wplink_nonce:this.config._dp_wplink_nonce};this.search&&(i.search=this.search),this.querying=!0,$.post(this.config.ajaxUrl,i,(function(a){e.page++,e.querying=!1,e.allLoaded=!a,t(a,i)}),"json")}})}}]),t}(),p=function(){function t(e,i){Object(a.a)(this,t),Object(o.a)(this,"timeToTriggerRiver",150),Object(o.a)(this,"minRiverAJAXDuration",200),Object(o.a)(this,"riverBottomThreshold",5),Object(o.a)(this,"posts",{}),i.config.dpDebugEn&&console.log("DpWpLinkRiver"),this.dpWpLink=i,this.config=i.config,this.element=e,this.ul=e.children("ul"),this.contentHeight=e.children("#dp_link-selector-height"),this.waiting=e.find(".river-waiting"),this.init()}return Object(n.a)(t,[{key:"delayedCallback",value:function(t,e){var i,a,n,o;return e?(setTimeout((function(){if(a)return t.apply(o,n);i=!0}),e),function(){if(i)return t.apply(this,arguments);n=arguments,o=this,a=!0}):t}},{key:"init",value:function(){var e=this;$.extend(t.prototype,{posts:{},refresh:function(){this.deselect(),this.visible=this.element.is(":visible")},show:function(){this.visible||(this.deselect(),this.element.show(),this.visible=!0)},hide:function(){this.element.hide(),this.visible=!1},select:function(t,e){var i,a,n,o;t.hasClass("unselectable")||t==this.selected||(this.deselect(),this.selected=t.addClass("selected"),i=t.outerHeight(),a=this.element.height(),n=t.position().top,o=this.element.scrollTop(),n<0?this.element.scrollTop(o+n):n+i>a&&this.element.scrollTop(o+n-a+i),this.element.trigger("river-select",[t,e,this]))},deselect:function(){this.selected&&this.selected.removeClass("selected"),this.selected=!1},prev:function(){var t;this.visible&&(this.selected&&(t=this.selected.prev("li")).length&&this.select(t))},next:function(){if(this.visible){var t=this.selected?this.selected.next("li"):$("li:not(.unselectable):first",this.element);t.length&&this.select(t)}},ajax:function(t){var e=this,i=this.query&&1==this.query.page?0:this.minRiverAJAXDuration,a=this.dpWpLink.inputs.search.parent().find(".spinner").addClass("is-active"),n=this.delayedCallback((function(i,n){e.process(i,n),a.removeClass("is-active"),t&&t(i,n)}),i);this.query&&this.query.ajax(n)},change:function(t){this.query&&this._search==t||(this.posts={},this._search=t,this.query=new h(t,this.config),this.element.scrollTop(0))},process:function(t,e){var i=this,a="",n=!0,o=1==e.page;if(t){var l=this.dpWpLink.isFirstStep?"dpit-special-link dpit-special-link--hidden":"dpit-special-link";a+=this.printPostTypeItem({title:this.config.keepPreviousStepUrl,permalink:"$keep-prev-step-url",info:this.config.variableLink,infoLong:this.config.keepPreviousStepUrlLngInfo},!0,l),a+=this.printPostTypeItem({title:this.config.keepCurrentUrl,permalink:"$keep-current-url",info:this.config.variableLink,infoLong:this.config.keepCurrentUrlLngInfo},!0,l);var r={},s=this.config.allowedPostTypesInPagePostURL,c=s.includes("all_post_types");$.each(t,(function(){if(this.info){var t=this.info.toLowerCase();!isNaN(parseInt(t[0]))&&(t="post"),(s.includes(t)||c)&&(r[t]||(r[t]=[]),r[t].push(this))}})),Object.keys(r).forEach((function(t){i.posts[t]?i.posts[t]=[].concat(Object(f.a)(r[t]),Object(f.a)(i.posts[t])):i.posts[t]=r[t]})),s.forEach((function(t){"all_post_types"!==t?i.posts[t]&&i.posts[t].forEach((function(t){a+=i.printPostTypeItem(t,n),n=!n})):Object.keys(i.posts).forEach((function(t){s.includes(t)||i.config.disabledPostTypes.includes(t)||i.posts[t].forEach((function(t){a+=i.printPostTypeItem(t,n),n=!n}))}))})),this.ul.html(a)}else o?(a+='<li class="unselectable no-matches-found"><span class="item-title"><em>'.concat(this.config.noMatchesFound,"</em></span></li>"),this.ul.html(a)):this.ul.append(a)},printPostTypeItem:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a="",n=[];e&&n.push("alternate"),i&&n.push(i),t.title||n.push("no-title");var o=t.permalink;return o.startsWith("http://localhost:3000")?o=o.replace("http://localhost:3000",this.config.siteUrl):o.startsWith("http://localhost")&&(o=o.replace("http://localhost",this.config.siteUrl)),a+=(n=n.join(" "))?'<li class="'.concat(n,'">'):"<li>",a+='<input type="hidden" class="item-permalink" value="'.concat(o,'" />'),a+='<span class="item-title">',a+=t.title?t.title:this.config.noTitle,a+="</span>",a+='<span class="item-info">'.concat(t.info,"</span>"),t.infoLong&&(a+='<div class="item-long-info">'.concat(t.infoLong,"</div>")),a+="</li>"},maybeLoad:function(){var t=this,e=this,i=this.element,a=i.scrollTop()+i.height();!this.query.ready()||a<this.contentHeight.height()-this.riverBottomThreshold||setTimeout((function(){var a=i.scrollTop(),n=a+i.height();!e.query.ready()||n<e.contentHeight.height()-t.riverBottomThreshold||(e.waiting.addClass("is-active"),i.scrollTop(a+e.waiting.outerHeight()),e.ajax((function(){e.waiting.removeClass("is-active")})))}),this.timeToTriggerRiver)}}),this.refresh(),$("#dp_wp-link .query-results, #dp_wp-link #dp_link-selector").scroll(this.maybeLoad.bind(this)),this.element.on("click","li",(function(t){e.select($(t.target).closest("li"),t)})),this.change("")}}]),t}(),b=function(){function t(e){var i=this;Object(a.a)(this,t),Object(o.a)(this,"keySensitivity",100),Object(o.a)(this,"lastSearch",""),Object(o.a)(this,"modalOpen",!1),Object(o.a)(this,"startScrollTop",0),Object(o.a)(this,"inputs",{}),Object(o.a)(this,"rivers",{}),Object(o.a)(this,"onUrlVarClick",(function(t){var e="";if(e=t.target&&"span"===t.target.tagName.toLowerCase()?$(t.target).text():$(t.target).find("span").text()){for(var a=i.inputs.url.val(),n=-1,o=a.length-1;o>=0&&"}"!==a.charAt(o);o--)if("{"===a.charAt(o)){n=o;break}n>=0?i.inputs.url.val(a.slice(0,n)+e):i.inputs.url.val(a+e),i.inputs.url.focus()}})),e.dpDebugEn&&console.log("DpWpLink"),this.config=e,this.unifiedSiteUrl=u.a.unifyUrl(e.siteUrl,!0,!0,!0,!0,!0),this.init()}return Object(n.a)(t,[{key:"init",value:function(){var t=this;this.inputs.wrap=$("#dp_wp-link-wrap"),this.inputs.dialog=$("#dp_wp-link"),this.inputs.backdrop=$("#dp_wp-link-backdrop"),this.inputs.submit=$("#dp_wp-link-submit"),this.inputs.close=$("#dp_wp-link-close"),this.inputs.text=$("#wp-link-text"),this.inputs.url=$("#dp_wp-link-url"),this.inputs.nonce=$("#_ajax_linking_nonce"),this.inputs.openInNewTab=$("#wp-link-target"),this.inputs.search=$("#dp_wp-link-search"),this.inputs.search.focus(),this.rivers.search=new p($("#dp_search-results"),this),this.rivers.recent=new p($("#dp_most-recent-results"),this),this.rivers.elements=this.inputs.dialog.find(".query-results"),this.inputs.queryNotice=$("#query-notice-message"),this.inputs.queryNoticeTextDefault=this.inputs.queryNotice.find(".query-notice-default"),this.inputs.queryNoticeTextHint=this.inputs.queryNotice.find(".query-notice-hint"),this.inputs.dialog.keydown(this.keydown.bind(this)),this.inputs.dialog.keyup(this.keyup.bind(this)),this.inputs.submit.click((function(e){e.preventDefault(),t.update()})),this.inputs.close.add(this.inputs.backdrop).add("#dp_wp-link-cancel button").click((function(e){e.preventDefault(),t.close()})),this.rivers.elements.on("river-select",this.updateFields.bind(this)),this.inputs.search.on("focus.this",(function(){t.inputs.queryNoticeTextDefault.hide(),t.inputs.queryNoticeTextHint.removeClass("screen-reader-text").show()})).on("blur.this",(function(){t.inputs.queryNoticeTextDefault.show(),t.inputs.queryNoticeTextHint.addClass("screen-reader-text").hide()})),this.inputs.search.on("keyup input",(function(){window.clearTimeout(t.searchTimer),t.searchTimer=window.setTimeout((function(){t.searchInternalLinks()}),500)})),this.inputs.url.on("input",(function(){t.updateAfterUrlChanged(!0)})),this.inputs.url.on("paste",(function(){setTimeout(t.correctURL.bind(t),0)})),this.inputs.url.on("blur",(function(){t.correctURL(!1)})),!0===this.config.loadTippy&&($(".dp-info-icon").load(d()(this.config.assetsUrl,"icons/info-circle-solid.svg")),$(".dp-info-icon").each((function(t,e){var i=$(e).hasClass("dp-info-icon--ia");Object(s.b)(e,{content:function(t){return t.getAttribute("data-info-text")},animation:"scale",theme:"material",allowHTML:!0,interactive:i,zIndex:100000003})}))),this.updateAfterUrlChanged()}},{key:"sanitizeUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.startsWith("$")){var i=/^\/+|\/+$/g;e||(i=/^\/+/g),t.startsWith("/")&&(t="/".concat(t.replace(i,"")));var a=u.a.unifyUrl(t,!1,!1,!0,e,!0);a.startsWith(this.unifiedSiteUrl)?(t=a.replace(this.unifiedSiteUrl,""))||(t="/"):/^((http|https|ftp):\/\/)/.test(t=a)||t.startsWith("www.")||(t="/".concat(t.replace(i,""))),t&&t.startsWith("/wp-admin")&&(t=u.a.forceQMarkWithoutSlash(t))}return t}},{key:"activateSubmitButtonSpinner",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?($("#dp_wp-link-update .spinner").addClass("is-active"),$(".dp_wp-link-wrap").addClass("no-pointer-events"),$("#dp_wp-link-update #dp_wp-link-submit").addClass("spinner-bg")):($("#dp_wp-link-update .spinner").removeClass("is-active"),$("#dp_wp-link-update #dp_wp-link-submit").removeClass("spinner-bg"),$(".dp_wp-link-wrap").removeClass("no-pointer-events"))}},{key:"correctURL",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=$.trim(this.inputs.url.val());if(e&&this.correctedURL!==e){var i=this.sanitizeUrl(e,t);this.inputs.url.val(i),this.correctedURL=i}this.updateAfterUrlChanged()}},{key:"open",value:function(t,e){var i,a,n,o,l,r,s=this,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],f=arguments.length>4&&void 0!==arguments[4]&&arguments[4],h=arguments.length>5&&void 0!==arguments[5]&&arguments[5],p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,v=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(this.closeAfterSubmit=d,this.isFirstStep=1===f,this.enableUrlVarExamples=h,this.sysUrlVars=b,this.jSubEl=v,!1!==f&&!isNaN(f)){var _=u.a.getNthStr(f);$("#dp_link-modal-title").text(this.config.title.replace("%s",_))}if(this.startScrollTop=null!==(i=null!==(a=null===(n=document)||void 0===n||null===(o=n.documentElement)||void 0===o?void 0:o.scrollTop)&&void 0!==a?a:null===(l=document)||void 0===l||null===(r=l.body)||void 0===r?void 0:r.scrollTop)&&void 0!==i?i:0,this.modalOpen=!0,c?(this.inputs.wrap.removeClass("active"),this.inputs.backdrop.removeClass("active")):(this.inputs.wrap.addClass("active"),this.inputs.backdrop.addClass("active"),$("body").addClass("dp-noscroll")),!this.isFirstStep&&(this.urlVars={},p)){var g=b||{};Object.keys(p).forEach((function(t){t in g||(s.urlVars[t]=p[t])}))}this.refresh(t,e),p&&this.setUrlExamples(p),this.isFirstStep?($(".dpit-special-link").addClass("dpit-special-link--hidden"),$("#dpwplink-url-vars-1st-step").show(),$("#dpwplink-url-vars-other-step").hide()):($(".dpit-special-link").removeClass("dpit-special-link--hidden"),$("#dpwplink-url-vars-1st-step").hide(),$("#dpwplink-url-vars-other-step").show()),$(document).trigger("wplink-open",this.inputs.wrap)}},{key:"refresh",value:function(t,e){var i=this;this.rivers.search.refresh(),this.rivers.recent.refresh(),this.inputs.wrap.hasClass("has-text-field")||this.inputs.wrap.addClass("has-text-field"),this.inputs.text.val(e),this.setDefaultValues(),t&&this.inputs.url.val(t),window.setTimeout((function(){i.inputs.search&&i.inputs.search.length&&(i.inputs.search[0].select(),i.inputs.search.focus())})),this.rivers.recent.ul.children().length||this.rivers.recent.ajax();var a=this.inputs.url.val();this.correctedURL=a?this.inputs.url.val().replace(/^http:\/\//,""):"",this.updateAfterUrlChanged()}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(!t||this.closeAfterSubmit||e)&&(this.activateSubmitButtonSpinner(!1),document.documentElement.scrollTop=this.startScrollTop,$("body").removeClass("dp-noscroll"),this.modalOpen=!1,this.inputs.backdrop.removeClass("active"),this.inputs.wrap.removeClass("active"),this.correctedURL=!1,$(document).trigger("wplink-close",this.inputs.wrap)),t||$(document).trigger("dpwplink-canceled")}},{key:"getAttrs",value:function(){return this.correctURL(!0),{href:$.trim(this.inputs.url.val()),target:this.inputs.openInNewTab.prop("checked")?"_blank":null,urlVarExamples:this.getUrlExamples(),jSubEl:this.jSubEl}}},{key:"update",value:function(){this.htmlUpdate()}},{key:"htmlUpdate",value:function(){var t;t=this.getAttrs();var e=document.createElement("a");e.href=t.href,"javascript:"!==e.protocol&&"data:"!==e.protocol||(t.href=""),t.href&&this.close(!0)}},{key:"updateSubmitButton",value:function(){this.inputs.url.val()?$("#dp_wp-link-submit").removeClass("disabled"):$("#dp_wp-link-submit").addClass("disabled")}},{key:"updateVariableUrlsGUI",value:function(t){var e=this,i=this.inputs.url.val();if(this.isVariableUrl(i,!0)&&this.enableUrlVarExamples)$("#search-panel,#wplink-link-existing-content").addClass("dpwplink-inactive-el"),$("#dpwplink-url-vars-wrap").removeClass("dpwplink-inactive-el"),t?(this.renderUrlVarExTimeout&&clearTimeout(this.renderUrlVarExTimeout),this.renderUrlVarExTimeout=setTimeout((function(){e.renderUrlVarItems(i,e.isFirstStep)}),10)):this.renderUrlVarItems(i,this.isFirstStep);else{if(this.isFirstStep&&this.isVariableUrl(i)){this.nonActiveUrlVarExamples={};var a=this.getUrlVarIdsFromUrl(i);a&&a.length&&a.forEach((function(t){e.nonActiveUrlVarExamples[t]=""}))}$("#dpwplink-url-vars-wrap").addClass("dpwplink-inactive-el"),$("#search-panel,#wplink-link-existing-content").removeClass("dpwplink-inactive-el")}}},{key:"getUrlVarIdsFromUrl",value:function(t){for(var e=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=/\{([^}]+)\}/g,n=[],o=a.exec(t);null!=o;)n.push(o[1]),o=a.exec(t);var l=n.filter((function(t,e,i){return i.indexOf(t)===e}));return i&&this.sysUrlVars&&(l=l.filter((function(t){return!Object.keys(e.sysUrlVars).includes(t)}))),l}},{key:"renderUrlVarItems",value:function(t,e){var i=this,a=this.urlVars?Object.keys(this.urlVars):[];e?(a=this.getUrlVarIdsFromUrl(t)||[],$("#dpwplink-url-vars-hint-next-steps").hide(),a.length?($("#dpwplink-url-vars-hint-1st-step").hide(),$("#dpwplink-url-vars-hint-1st-step-fill").show()):($("#dpwplink-url-vars-hint-1st-step").show(),$("#dpwplink-url-vars-hint-1st-step-fill").hide())):($("#dpwplink-url-vars-hint-1st-step").hide(),$("#dpwplink-url-vars-hint-1st-step-fill").hide(),a.length?$("#dpwplink-url-vars-hint-next-steps").hide():$("#dpwplink-url-vars-hint-next-steps").show());var n=0;if(this.sysUrlVars&&Object.keys(this.sysUrlVars).forEach((function(t){a.unshift(t),n++})),a){$(".dpwplink-url-vars__item--id-only").off("click",this.onUrlVarClick),a.forEach((function(t,a){var o=a<n,l=e&&!o,r=$('.dpwplink-url-vars__item[data-idx="'.concat(a,'"]'));r.length?(r.find("span").text("{".concat(t,"}")),r.attr("data-var-id",t),r.removeClass("dpwplink-url-vars__item--inactive").show(),l?r.removeClass("dpwplink-url-vars__item--id-only"):r.addClass("dpwplink-url-vars__item--id-only")):$(o?"#dpwplink-sys-url-vars":"#dpwplink-url-vars").append(i.getUrlVarExampleHtml(a,t,e,o))})),$(".dpwplink-url-vars__item--id-only").on("click",this.onUrlVarClick);var o=a.length;do{var l=$('.dpwplink-url-vars__item[data-idx="'.concat(o,'"]'));l.addClass("dpwplink-url-vars__item--inactive").hide(),o++}while(l.length)}}},{key:"getUrlExamples",value:function(){var t=this;if(!this.isFirstStep)return null;if(!this.enableUrlVarExamples)return this.nonActiveUrlVarExamples;var e=this.isVariableUrl(this.inputs.url.val(),!0)&&this.enableUrlVarExamples;if(e){var i={};return $(".dpwplink-url-vars__item:not(.dpwplink-url-vars__item--inactive)").each((function(a,n){var o=$(n).data("var-id");o&&($(n).hasClass("dpwplink-url-vars__item--system")&&t.sysUrlVars?i[o]=t.sysUrlVars[o]:e&&(i[o]=$(n).find("input").val()))})),i}return this.sysUrlVars}},{key:"setUrlExamples",value:function(t){if(!this.enableUrlVarExamples||!this.isFirstStep)return null;t||(t={}),Object.keys(t).forEach((function(e){$('.dpwplink-url-vars__item[data-var-id="'.concat(e,'"]')).find("input").val(t[e])}))}},{key:"getUrlVarExampleHtml",value:function(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=r()({"dpwplink-url-vars__item":!0,"dpwplink-url-vars__item--id-only":!i||a,"dpwplink-url-vars__item--system":a});return'<li class="'.concat(n,'" data-idx="').concat(t,'" data-var-id="').concat(e,'"><span>{').concat(e,"}</span><input></li>")}},{key:"updateAfterUrlChanged",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.updateSubmitButton(),this.updateVariableUrlsGUI(t)}},{key:"isVariableUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return!1;var i=t.indexOf("{");if(e&&i>=0)return!0;var a=t.indexOf("}");return i>=0&&a>i}},{key:"updateFields",value:function(t,e){if(e.length){var i=e.children(".item-permalink").val();this.inputs.url.val(this.sanitizeUrl(i,!0)),this.updateAfterUrlChanged(),this.inputs.wrap.hasClass("has-text-field")&&!this.inputs.text.val()&&this.inputs.text.val($(e[0]).children(".item-title").text())}}},{key:"setDefaultValues",value:function(){this.inputs.url.val(""),this.updateAfterUrlChanged(),this.inputs.search.val(""),this.searchInternalLinks(),this.inputs.submit.val(this.config.save)}},{key:"searchInternalLinks",value:function(){var t,e=this.inputs.search.val()||"",i=parseInt(this.config.minInputLength,10)||3;if(e.length>=i){if(this.rivers.recent.hide(),this.rivers.search.show(),this.lastSearch==e)return;this.lastSearch=e,t=this.inputs.search.parent().find(".spinner").addClass("is-active"),this.rivers.search.change(e),this.rivers.search.ajax((function(){t.removeClass("is-active")}))}else this.rivers.search.hide(),this.rivers.recent.show()}},{key:"next",value:function(){this.rivers.search.next(),this.rivers.recent.next()}},{key:"prev",value:function(){this.rivers.search.prev(),this.rivers.recent.prev()}},{key:"keydown",value:function(t){if(this.modalOpen){var e,i;if(27===t.keyCode?($("#dp_wp-link-close").trigger("click"),t.stopImmediatePropagation()):9===t.keyCode&&("dp_wp-link-submit"!==(i=t.target.id)||t.shiftKey?"dp_wp-link-close"===i&&t.shiftKey&&(this.inputs.submit.focus(),t.preventDefault()):(this.inputs.close.focus(),t.preventDefault())),t.shiftKey||38!==t.keyCode&&40!==t.keyCode)return;if(document.activeElement&&("link-title-field"===document.activeElement.id||"url-field"===document.activeElement.id))return;e=38===t.keyCode?"prev":"next",clearInterval(this.keyInterval),this[e](),this.keyInterval=setInterval(this[e],this.keySensitivity),t.preventDefault()}}},{key:"keyup",value:function(t){38!==t.keyCode&&40!==t.keyCode||(clearInterval(this.keyInterval),t.preventDefault())}}]),t}()},8:function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var a=i(3),n=i(2),o=i(0),l=i(18),r=i.n(l),s=i(12),c=i.n(s);function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var f=function(){function t(e){Object(a.a)(this,t),e.dpDebugEn&&console.log("DPIncUtils")}return Object(n.a)(t,null,[{key:"isVariableUrl",value:function(t){var e=t.indexOf("{"),i=t.indexOf("}");return e>=0&&i>e}},{key:"fillUrlVariables",value:function(t,e){return t&&e&&Object.keys(t).forEach((function(i){e=r()(e,"{".concat(i,"}"),t[i])})),e}},{key:"simpleObjectToStr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"|",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"=",a="";return t&&Object.keys(t).forEach((function(n,o){0!=o&&(a+=e),a+="".concat(n).concat(i).concat(t[n])})),a}},{key:"strToSimpleObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"|",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"=",a={};if(t){var n=t.split(e);n&&n.forEach((function(t){var e=t.split(i);e&&e.length>=2&&(a[e[0]]=e[1])}))}return a}},{key:"getInfoIconHtml",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return i&&(e='<strong class="info-tip-title">'.concat(i,"</strong>").concat(e)),$('<div class="'.concat(t,'"></div>')).attr("data-info-text",e)}},{key:"strLastPart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=t.split(e);return a&&a.length>0?a[a.length-1]:i}},{key:"strFirstPart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=t.split(e);return a&&a.length>0?a[0]:i}},{key:"rightTrimByString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",i=t.indexOf(e);return i>=0?t.substring(0,i):t}},{key:"filterQMarkWithNoSlash",value:function(t){var e=t.indexOf("?");return e>=0&&(0!==e&&"/"==t[e-1]||(t="".concat(t.substring(0,e),"/").concat(t.substring(e)))),t}},{key:"forceQMarkWithoutSlash",value:function(t){var e=t.indexOf("?");return e>0&&"/"==t[e-1]&&(t=t.substring(0,e-1)+t.substring(e)),t}},{key:"sanitizePossibleRelativeUrl",value:function(e,i){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.startsWith("/")&&(e=c()(i,e),a&&(e=t.filterQMarkWithNoSlash(e))),e}},{key:"absToRelativeUrl",value:function(t,e){return e&&t.startsWith(e)&&((t=t.substring(e.length)).startsWith("/")||(t="/".concat(t))),t}},{key:"removeURLParameter",value:function(t,e){var i=t.split("?");if(i.length>=2){for(var a="".concat(encodeURIComponent(e),"="),n=i[1].split(/[&;]/g),o=n.length;o-- >0;)-1!==n[o].lastIndexOf(a,0)&&n.splice(o,1);return i[0]+(n.length>0?"?".concat(n.join("&")):"")}return t}},{key:"removeURLParameters",value:function(e,i){var a=i;return Array.isArray(i)||(a=Object.keys(i)),a.forEach((function(a){e=t.removeURLParameter(e,t.getDpUrlParamName(a,i))})),e}},{key:"unifyUrl",value:function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e){if((e=t.strLastPart(e,"://",e))&&e.startsWith("www.")&&(e=e.substring(4)),e&&n&&(e=t.strFirstPart(e,"#",e)),e&&i?e=t.strFirstPart(e,"?",e):a&&(e=t.filterQMarkWithNoSlash(e)),e){var s=/\/+$/;o||(s=/^\/+/g),e=e.replace(s,"")}e&&l&&(e="/".concat(e))}return e?e.endsWith("/index.php")?e=t.rightTrimByString(e,"/index.php"):i||(e=r()(e,"/index.php/?","/"),a||(e=r()(e,"/index.php?","/"))):e="/",e}},{key:"getDpUrlParamName",value:function(t,e){var i=t;return e&&(i=e[t]),i}},{key:"getDpUrlParam",value:function(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=n,l=t.getDpUrlParamName(e,i);return l&&(a||(a=new URL(window.location)),o=a.searchParams.get(l)),o}},{key:"setDpUrlParam",value:function(e,i,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o="",l=t.getDpUrlParamName(e,i);return l&&(o=l+"="+a,n&&(o+="&")),o}},{key:"buildDpQueryString",value:function(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"?",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=a;if(n){var l=Object.keys(n);l.forEach((function(t){null!==n[t]&&void 0!==n[t]&&""!==n[t]&&(o+=t+"="+n[t]+"&")}))}if(e){var r=Object.keys(e);r.forEach((function(a){null!==e[a]&&void 0!==e[a]&&""!==e[a]&&(o+=t.setDpUrlParam(a,i,e[a]))}))}return o&&"&"==o[o.length-1]&&(o=o.substr(0,o.length-1)),o==a&&(o=""),o}},{key:"decodeStepParamAdvancedVal",value:function(t,e,i){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=null==i?void 0:i[e],l=null==o?void 0:o.ext,r={val:null!=t?t:null==o?void 0:o.defMain,ext:{}};if(null!=t&&t.startsWith("base64__")||l){var s=null;if(null!=t&&t.startsWith("base64__")){var c,d,f=atob(t.substr(8));s=f?JSON.parse(f):null,r.val=null!==(c=null===(d=s)||void 0===d?void 0:d.val)&&void 0!==c?c:null==o?void 0:o.defMain}l&&Object.keys(l).forEach((function(t){var e,i,a,o,c,d,f,h;n?r.ext[t]=null!==(e=null===(i=s)||void 0===i||null===(a=i.ext)||void 0===a?void 0:a[t])&&void 0!==e?e:null===(o=l[t])||void 0===o?void 0:o.def:r.ext[t]=u(u({},l[t]),{},{val:null!==(c=null===(d=s)||void 0===d||null===(f=d.ext)||void 0===f?void 0:f[t])&&void 0!==c?c:null===(h=l[t])||void 0===h?void 0:h.def})}))}else a&&(r=t);return r}},{key:"encodeStepParamAdvancedVal",value:function(t,e,i){var a;return(null==i||null===(a=i[e])||void 0===a?void 0:a.ext)?"base64__"+btoa(JSON.stringify(t)):t}},{key:"initStepParams",value:function(t){var e={};return Object.keys(t).forEach((function(i){var a="";if(t[i]&&(a=t[i].def||"",t[i].ext)){var n={};Object.keys(t[i].ext).forEach((function(e){n[e]=t[i].ext[e].def})),a={val:a,ext:n}}e[i]=a})),e}},{key:"getNthStr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!1!==t&&!isNaN(t)){var i="",a="";e&&(i="<sup>",a="</sup>");var n="";switch(t){case 1:n="1".concat(i,"st").concat(a);break;case 2:n="2".concat(i,"nd").concat(a);break;case 3:n="3".concat(i,"rd").concat(a);break;default:n="".concat(t).concat(i,"th").concat(a)}return n}return""}},{key:"textStylesIsHOrPOption",value:function(t){return t.length>=3&&("p"===t[0]&&"_"===t[1]||"h"===t[0]&&"_"===t[2])}},{key:"textStylesIsFontFamilyVal",value:function(t){return["p_font","h_font","btn_font"].includes(t)}},{key:"setMobileSizeCoef",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(e){var a=i>0&&($(window).width()<=i||$(window).height()<=i)?e.mobile_size_coef/100:1;t.style.setProperty("--font-size-coef",a*e.all_in_1_size_coef/100)}}},{key:"setTextStyles",value:function(e,i){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(i&&e){var o;t.setMobileSizeCoef(e,i,n);var l=u({},i),r=null!==(o=l.font_size_unit)&&void 0!==o?o:"em",s=[];if(Object.keys(l).forEach((function(t){a.textStylesIsFontFamilyVal(t)&&(s["--".concat(t)]=l[t]||"0"==l[t]?l[t]:"inherit")})),(l.p_font_size||"0"===l.p_font_size)&&(s["--p_font_size"]="calc("+l.p_font_size+r+"*var(--font-size-coef))",(l.p_mb||"0"===l.p_mb)&&(s["--p_mb"]="calc("+l.p_mb/100+"*"+s["--p_font_size"]+")")),l.h2_font_size||0==l.h2_font_size&&l.h5_font_size||0==l.h5_font_size)for(var c=(l.h2_font_size-l.h5_font_size)/4,d=1;d<=6;d++){var f=d-2;s["--h".concat(d,"_font_size")]="calc("+(l.h2_font_size-f*c)+r+"*var(--font-size-coef))"}if(l.h2_mb||0==l.h2_mb&&l.h5_mb||0==l.h5_mb)for(var h=(l.h2_mb-l.h5_mb)/4,p=1;p<=6;p++){var b=p-2,v=Math.round(10*(l.h2_mb-b*h))/10;s["--h".concat(p,"_mb")]="calc("+v/100+"*"+s["--h".concat(p,"_font_size")]+")",2===p&&(s["--dp_unit"]="calc("+1.3*v/1e3+"*"+s["--h".concat(p,"_font_size")]+")")}Object.keys(s).forEach((function(t){e.style.setProperty(t,s[t])}))}}}]),t}();Object(o.a)(f,"loadBuilder",(function(t,e){t.dpDebugEn&&console.log("builder config:",t);var i=new URL(window.location),a=t.queryParamsDefs,n=f.getDpUrlParam("dp_qp_tour_id",a,i),o=f.getDpUrlParam("dp_qpb_create_new",a,i),l=f.getDpUrlParam("dp_qpb_builder_mode",a,i);if(t.tours&&t.tours.length||"3"===l){var r=u({},t);delete r.tours,r.builderOrigin=f.getDpUrlParam("dp_qpb_builder_origin",a,i),r.builderMode=l,r.originHashId=f.getDpUrlParam("dp_qpb_origin_el_id",a,i),r.triggerId=f.getDpUrlParam("dp_qp_trigger_id",a,i)||0,r.initState=f.getDpUrlParam("dp_qpb_init_state",a,i),r.inNewWindow="1"===f.getDpUrlParam("dp_qpb_in_new_window",a,i),r.mobileAltStepMode=f.getDpUrlParam("dp_qpb_mobile_alt_step_mode",a,i);var s="mobile_menu"===r.mobileAltStepMode?500:0;setTimeout((function(){"3"===l?e(r,null):t.tours.forEach((function(t){(o&&t.createNew||t.tourId==n)&&e(r,t)}))}),s)}}))}},[[168,0,2,3]]]);
//# sourceMappingURL=dpit-admin-tour-edit-a79e0e59.js.map